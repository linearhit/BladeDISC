

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Design goals &mdash; BladeDISC 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../../../index.html">
                BladeDISC
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a></li>
        
      <li>Design goals</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../../../_sources/tao/third_party/json/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../../../search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../README_.html">BladeDISC Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#api-quickview">API QuickView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#for-pytorch-users">For PyTorch Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#setup-and-examples">Setup and Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#publications">Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#tutorials-and-documents-for-developers">Tutorials and Documents for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#faq">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../README_.html#contact-us">Contact Us</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/install_with_docker.html">Install with Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/install_with_docker.html#download-a-bladedisc-docker-image">Download a BladeDISC Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/install_with_docker.html#start-a-docker-container">Start a Docker Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/build_from_source.html">Build from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/build_from_source.html#prerequisite">Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/build_from_source.html#checkout-the-source">Checkout the Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/build_from_source.html#building-bladedisc-for-tensorflow-users">Building BladeDISC for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/build_from_source.html#building-bladedisc-for-pytorch-users">Building BladeDISC for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/quickstart.html">Quickstart for TensorFlow/PyTorch users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/quickstart.html#quickstart-for-tensorflow-users">Quickstart for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/quickstart.html#quickstart-for-pytorch-users">Quickstart for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/contribution.html">How to Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/contribution.html#local-development-environment">Local Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/contribution.html#submit-a-pull-request-to-bladedisc">Submit a Pull Request to BladeDISC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/developers/index.html">Documentation for Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/developers/pass_pipeline.html">Tutorial: A Walkthough of the BladeDISC Pass Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/developers/runtime_abstraction_layer.html">Runtime Abstraction Layer Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/developers/bladedisc_torch_overview.html">BladeDISC Torch Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/developers/torch_add_a_new_converter.html">Tutorial: How to add the support of a new Torch Op</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../docs/tutorials/index.html">Tutorials on Example Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/tutorials/tensorflow_inference_and_training.html">Use case of TensorFlow Inference and Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docs/tutorials/torch_bert_inference.html">Use case of PyTorch Inference</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <p><a class="reference external" href="https://github.com/nlohmann/json/releases"><img alt="JSON for Modern C++" src="https://raw.githubusercontent.com/nlohmann/json/master/doc/json.gif" /></a></p>
<p><a class="reference external" href="https://app.travis-ci.com/nlohmann/json"><img alt="Build Status" src="https://app.travis-ci.com/nlohmann/json.svg?branch=develop" /></a>
<a class="reference external" href="https://ci.appveyor.com/project/nlohmann/json"><img alt="Build Status" src="https://ci.appveyor.com/api/projects/status/1acb366xfyg3qybk/branch/develop?svg=true" /></a>
<a class="reference external" href="https://github.com/nlohmann/json/actions?query=workflow%3AUbuntu"><img alt="Ubuntu" src="https://github.com/nlohmann/json/workflows/Ubuntu/badge.svg" /></a>
<a class="reference external" href="https://github.com/nlohmann/json/actions?query=workflow%3AmacOS"><img alt="macOS" src="https://github.com/nlohmann/json/workflows/macOS/badge.svg" /></a>
<a class="reference external" href="https://github.com/nlohmann/json/actions?query=workflow%3AWindows"><img alt="Windows" src="https://github.com/nlohmann/json/workflows/Windows/badge.svg" /></a>
<a class="reference external" href="https://coveralls.io/github/nlohmann/json?branch=develop"><img alt="Coverage Status" src="https://coveralls.io/repos/github/nlohmann/json/badge.svg?branch=develop" /></a>
<a class="reference external" href="https://scan.coverity.com/projects/nlohmann-json"><img alt="Coverity Scan Build Status" src="https://scan.coverity.com/projects/5550/badge.svg" /></a>
<a class="reference external" href="https://www.codacy.com/gh/nlohmann/json/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=nlohmann/json&amp;utm_campaign=Badge_Grade"><img alt="Codacy Badge" src="https://app.codacy.com/project/badge/Grade/e0d1a9d5d6fd46fcb655c4cb930bb3e8" /></a>
<a class="reference external" href="https://lgtm.com/projects/g/nlohmann/json/context:cpp"><img alt="Language grade: C/C++" src="https://img.shields.io/lgtm/grade/cpp/g/nlohmann/json.svg?logo=lgtm&amp;logoWidth=18" /></a>
<a class="reference external" href="https://bugs.chromium.org/p/oss-fuzz/issues/list?sort=-opened&amp;can=1&amp;q=proj:json"><img alt="Fuzzing Status" src="https://oss-fuzz-build-logs.storage.googleapis.com/badges/json.svg" /></a>
<a class="reference external" href="https://wandbox.org/permlink/1mp10JbaANo6FUc7"><img alt="Try online" src="https://img.shields.io/badge/try-online-blue.svg" /></a>
<a class="reference external" href="https://nlohmann.github.io/json/doxygen/index.html"><img alt="Documentation" src="https://img.shields.io/badge/docs-doxygen-blue.svg" /></a>
<a class="reference external" href="https://raw.githubusercontent.com/nlohmann/json/master/LICENSE.MIT"><img alt="GitHub license" src="https://img.shields.io/badge/license-MIT-blue.svg" /></a>
<a class="reference external" href="https://github.com/nlohmann/json/releases"><img alt="GitHub Releases" src="https://img.shields.io/github/release/nlohmann/json.svg" /></a>
<a class="reference external" href="https://github.com/nlohmann/json/releases"><img alt="GitHub Downloads" src="https://img.shields.io/github/downloads/nlohmann/json/total" /></a>
<a class="reference external" href="https://github.com/nlohmann/json/issues"><img alt="GitHub Issues" src="https://img.shields.io/github/issues/nlohmann/json.svg" /></a>
<a class="reference external" href="https://isitmaintained.com/project/nlohmann/json"><img alt="Average time to resolve an issue" src="https://isitmaintained.com/badge/resolution/nlohmann/json.svg" /></a>
<a class="reference external" href="https://bestpractices.coreinfrastructure.org/projects/289"><img alt="CII Best Practices" src="https://bestpractices.coreinfrastructure.org/projects/289/badge" /></a>
<a class="reference external" href="https://github.com/sponsors/nlohmann"><img alt="GitHub Sponsors" src="https://img.shields.io/badge/GitHub-Sponsors-ff69b4" /></a></p>
<ul class="simple">
<li><p><a class="reference external" href="#design-goals">Design goals</a></p></li>
<li><p><a class="reference external" href="#sponsors">Sponsors</a></p></li>
<li><p><a class="reference external" href="#support">Support</a> (<a class="reference external" href="https://json.nlohmann.me">documentation</a>, <a class="reference external" href="https://json.nlohmann.me/home/faq/">FAQ</a>, <a class="reference external" href="https://github.com/nlohmann/json/discussions">discussions</a>, <a class="reference external" href="https://json.nlohmann.me/api/basic_json/">API</a>, <a class="reference external" href="https://github.com/nlohmann/json/issues">bug issues</a>)</p></li>
<li><p><a class="reference external" href="#examples">Examples</a></p>
<ul>
<li><p><a class="reference external" href="#json-as-first-class-data-type">JSON as first-class data type</a></p></li>
<li><p><a class="reference external" href="#serialization--deserialization">Serialization / Deserialization</a></p></li>
<li><p><a class="reference external" href="#stl-like-access">STL-like access</a></p></li>
<li><p><a class="reference external" href="#conversion-from-stl-containers">Conversion from STL containers</a></p></li>
<li><p><a class="reference external" href="#json-pointer-and-json-patch">JSON Pointer and JSON Patch</a></p></li>
<li><p><a class="reference external" href="#json-merge-patch">JSON Merge Patch</a></p></li>
<li><p><a class="reference external" href="#implicit-conversions">Implicit conversions</a></p></li>
<li><p><a class="reference external" href="#arbitrary-types-conversions">Conversions to/from arbitrary types</a></p></li>
<li><p><a class="reference external" href="#specializing-enum-conversion">Specializing enum conversion</a></p></li>
<li><p><a class="reference external" href="#binary-formats-bson-cbor-messagepack-and-ubjson">Binary formats (BSON, CBOR, MessagePack, and UBJSON)</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#supported-compilers">Supported compilers</a></p></li>
<li><p><a class="reference external" href="#integration">Integration</a></p>
<ul>
<li><p><a class="reference external" href="#cmake">CMake</a></p></li>
<li><p><a class="reference external" href="#package-managers">Package Managers</a></p></li>
<li><p><a class="reference external" href="#pkg-config">Pkg-config</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#license">License</a></p></li>
<li><p><a class="reference external" href="#contact">Contact</a></p></li>
<li><p><a class="reference external" href="#thanks">Thanks</a></p></li>
<li><p><a class="reference external" href="#used-third-party-tools">Used third-party tools</a></p></li>
<li><p><a class="reference external" href="#projects-using-json-for-modern-c">Projects using JSON for Modern C++</a></p></li>
<li><p><a class="reference external" href="#notes">Notes</a></p></li>
<li><p><a class="reference external" href="#execute-unit-tests">Execute unit tests</a></p></li>
</ul>
<div class="section" id="design-goals">
<h1>Design goals<a class="headerlink" href="#design-goals" title="Permalink to this headline">¶</a></h1>
<p>There are myriads of <a class="reference external" href="https://json.org">JSON</a> libraries out there, and each may even have its reason to exist. Our class had these design goals:</p>
<ul class="simple">
<li><p><strong>Intuitive syntax</strong>. In languages such as Python, JSON feels like a first class data type. We used all the operator magic of modern C++ to achieve the same feeling in your code. Check out the <a class="reference external" href="#examples">examples below</a> and you’ll know what I mean.</p></li>
<li><p><strong>Trivial integration</strong>. Our whole code consists of a single header file <a class="reference external" href="https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp"><code class="docutils literal notranslate"><span class="pre">json.hpp</span></code></a>. That’s it. No library, no subproject, no dependencies, no complex build system. The class is written in vanilla C++11. All in all, everything should require no adjustment of your compiler flags or project settings.</p></li>
<li><p><strong>Serious testing</strong>. Our class is heavily <a class="reference external" href="https://github.com/nlohmann/json/tree/develop/test/src">unit-tested</a> and covers <a class="reference external" href="https://coveralls.io/r/nlohmann/json">100%</a> of the code, including all exceptional behavior. Furthermore, we checked with <a class="reference external" href="https://valgrind.org">Valgrind</a> and the <a class="reference external" href="https://clang.llvm.org/docs/index.html">Clang Sanitizers</a> that there are no memory leaks. <a class="reference external" href="https://github.com/google/oss-fuzz/tree/master/projects/json">Google OSS-Fuzz</a> additionally runs fuzz tests against all parsers 24/7, effectively executing billions of tests so far. To maintain high quality, the project is following the <a class="reference external" href="https://bestpractices.coreinfrastructure.org/projects/289">Core Infrastructure Initiative (CII) best practices</a>.</p></li>
</ul>
<p>Other aspects were not so important to us:</p>
<ul class="simple">
<li><p><strong>Memory efficiency</strong>. Each JSON object has an overhead of one pointer (the maximal size of a union) and one enumeration element (1 byte). The default generalization uses the following C++ data types: <code class="docutils literal notranslate"><span class="pre">std::string</span></code> for strings, <code class="docutils literal notranslate"><span class="pre">int64_t</span></code>, <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code> or <code class="docutils literal notranslate"><span class="pre">double</span></code> for numbers, <code class="docutils literal notranslate"><span class="pre">std::map</span></code> for objects, <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> for arrays, and <code class="docutils literal notranslate"><span class="pre">bool</span></code> for Booleans. However, you can template the generalized class <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> to your needs.</p></li>
<li><p><strong>Speed</strong>. There are certainly <a class="reference external" href="https://github.com/miloyip/nativejson-benchmark#parsing-time">faster JSON libraries</a> out there. However, if your goal is to speed up your development by adding JSON support with a single header, then this library is the way to go. If you know how to use a <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> or <code class="docutils literal notranslate"><span class="pre">std::map</span></code>, you are already set.</p></li>
</ul>
<p>See the <a class="reference external" href="https://github.com/nlohmann/json/blob/master/.github/CONTRIBUTING.md#please-dont">contribution guidelines</a> for more information.</p>
</div>
<div class="section" id="sponsors">
<h1>Sponsors<a class="headerlink" href="#sponsors" title="Permalink to this headline">¶</a></h1>
<p>You can sponsor this library at <a class="reference external" href="https://github.com/sponsors/nlohmann">GitHub Sponsors</a>.</p>
<div class="section" id="label-named-sponsors">
<h2>:label: Named Sponsors<a class="headerlink" href="#label-named-sponsors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/reFX-Mike">Michael Hartmann</a></p></li>
<li><p><a class="reference external" href="https://github.com/sthagen">Stefan Hagen</a></p></li>
<li><p><a class="reference external" href="https://github.com/homer6">Steve Sperandeo</a></p></li>
<li><p><a class="reference external" href="https://github.com/eljefedelrodeodeljefe">Robert Jefe Lindstädt</a></p></li>
<li><p><a class="reference external" href="https://github.com/ciroque">Steve Wagner</a></p></li>
</ul>
<p>Thanks everyone!</p>
</div>
</div>
<div class="section" id="support">
<h1>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h1>
<p>:question: If you have a <strong>question</strong>, please check if it is already answered in the <a class="reference external" href="https://json.nlohmann.me/home/faq/"><strong>FAQ</strong></a> or the <a class="reference external" href="https://github.com/nlohmann/json/discussions/categories/q-a"><strong>Q&amp;A</strong></a> section. If not, please <a class="reference external" href="https://github.com/nlohmann/json/discussions/new"><strong>ask a new question</strong></a> there.</p>
<p>:books: If you want to <strong>learn more</strong> about how to use the library, check out the rest of the <a class="reference external" href="#examples"><strong>README</strong></a>, have a look at <a class="reference external" href="https://github.com/nlohmann/json/tree/develop/doc/examples"><strong>code examples</strong></a>, or browse through the <a class="reference external" href="https://json.nlohmann.me"><strong>help pages</strong></a>.</p>
<p>:construction: If you want to understand the <strong>API</strong> better, check out the <a class="reference external" href="https://json.nlohmann.me/api/basic_json/"><strong>API Reference</strong></a> or the <a class="reference external" href="https://json.nlohmann.me/doxygen/index.html"><strong>Doxygen documentation</strong></a>.</p>
<p>:bug: If you found a <strong>bug</strong>, please check the <a class="reference external" href="https://json.nlohmann.me/home/faq/"><strong>FAQ</strong></a> if it is a known issue or the result of a design decision. Please also have a look at the <a class="reference external" href="https://github.com/nlohmann/json/issues"><strong>issue list</strong></a> before you <a class="reference external" href="https://github.com/nlohmann/json/issues/new/choose"><strong>create a new issue</strong></a>. Please provide as many information as possible to help us understand and reproduce your issue.</p>
<p>There is also a <a class="reference external" href="https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/JSON_for_Modern_C%2B%2B"><strong>docset</strong></a> for the documentation browsers <a class="reference external" href="https://kapeli.com/dash">Dash</a>, <a class="reference external" href="https://velocity.silverlakesoftware.com">Velocity</a>, and <a class="reference external" href="https://zealdocs.org">Zeal</a> that contains the full <a class="reference external" href="https://json.nlohmann.me">documentation</a> as offline resource.</p>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>Beside the examples below, you may want to check the <a class="reference external" href="https://nlohmann.github.io/json/">documentation</a> where each function contains a separate code example (e.g., check out <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/emplace/"><code class="docutils literal notranslate"><span class="pre">emplace()</span></code></a>). All <a class="reference external" href="https://github.com/nlohmann/json/tree/develop/doc/examples">example files</a> can be compiled and executed on their own (e.g., file <a class="reference external" href="https://github.com/nlohmann/json/blob/develop/doc/examples/emplace.cpp">emplace.cpp</a>).</p>
<div class="section" id="json-as-first-class-data-type">
<h2>JSON as first-class data type<a class="headerlink" href="#json-as-first-class-data-type" title="Permalink to this headline">¶</a></h2>
<p>Here are some examples to give you an idea how to use the class.</p>
<p>Assume you want to create the JSON object</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;pi&quot;</span><span class="p">:</span> <span class="mf">3.141</span><span class="p">,</span>
  <span class="nt">&quot;happy&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Niels&quot;</span><span class="p">,</span>
  <span class="nt">&quot;nothing&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;answer&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;everything&quot;</span><span class="p">:</span> <span class="mi">42</span>
  <span class="p">},</span>
  <span class="nt">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
  <span class="nt">&quot;object&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">42.99</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With this library, you could write:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// create an empty structure (null)</span>
<span class="n">json</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// add a number that is stored as double (note the implicit conversion of j to an object)</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;pi&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.141</span><span class="p">;</span>

<span class="c1">// add a Boolean that is stored as bool</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;happy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

<span class="c1">// add a string that is stored as std::string</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;Niels&quot;</span><span class="p">;</span>

<span class="c1">// add another null object by passing nullptr</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;nothing&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>

<span class="c1">// add an object inside the object</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;answer&quot;</span><span class="p">][</span><span class="s">&quot;everything&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// add an array that is stored as std::vector (using an initializer list)</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="p">};</span>

<span class="c1">// add another object (using an initializer list of pairs)</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;object&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">{</span><span class="s">&quot;currency&quot;</span><span class="p">,</span> <span class="s">&quot;USD&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;value&quot;</span><span class="p">,</span> <span class="mf">42.99</span><span class="p">}</span> <span class="p">};</span>

<span class="c1">// instead, you could also write (which looks very similar to the JSON above)</span>
<span class="n">json</span> <span class="n">j2</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{</span><span class="s">&quot;pi&quot;</span><span class="p">,</span> <span class="mf">3.141</span><span class="p">},</span>
  <span class="p">{</span><span class="s">&quot;happy&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span>
  <span class="p">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="s">&quot;Niels&quot;</span><span class="p">},</span>
  <span class="p">{</span><span class="s">&quot;nothing&quot;</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">},</span>
  <span class="p">{</span><span class="s">&quot;answer&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;everything&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">}</span>
  <span class="p">}},</span>
  <span class="p">{</span><span class="s">&quot;list&quot;</span><span class="p">,</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">}},</span>
  <span class="p">{</span><span class="s">&quot;object&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">{</span><span class="s">&quot;currency&quot;</span><span class="p">,</span> <span class="s">&quot;USD&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&quot;value&quot;</span><span class="p">,</span> <span class="mf">42.99</span><span class="p">}</span>
  <span class="p">}}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Note that in all these cases, you never need to “tell” the compiler which JSON value type you want to use. If you want to be explicit or express some edge cases, the functions <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/array/"><code class="docutils literal notranslate"><span class="pre">json::array()</span></code></a> and <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/object/"><code class="docutils literal notranslate"><span class="pre">json::object()</span></code></a> will help:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// a way to express the empty array []</span>
<span class="n">json</span> <span class="n">empty_array_explicit</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">array</span><span class="p">();</span>

<span class="c1">// ways to express the empty object {}</span>
<span class="n">json</span> <span class="n">empty_object_implicit</span> <span class="o">=</span> <span class="n">json</span><span class="p">({});</span>
<span class="n">json</span> <span class="n">empty_object_explicit</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">object</span><span class="p">();</span>

<span class="c1">// a way to express an _array_ of key/value pairs [[&quot;currency&quot;, &quot;USD&quot;], [&quot;value&quot;, 42.99]]</span>
<span class="n">json</span> <span class="n">array_not_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">array</span><span class="p">({</span> <span class="p">{</span><span class="s">&quot;currency&quot;</span><span class="p">,</span> <span class="s">&quot;USD&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;value&quot;</span><span class="p">,</span> <span class="mf">42.99</span><span class="p">}</span> <span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="serialization-deserialization">
<h2>Serialization / Deserialization<a class="headerlink" href="#serialization-deserialization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="to-from-strings">
<h3>To/from strings<a class="headerlink" href="#to-from-strings" title="Permalink to this headline">¶</a></h3>
<p>You can create a JSON value (deserialization) by appending <code class="docutils literal notranslate"><span class="pre">_json</span></code> to a string literal:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// create object from string literal</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="s">&quot;{ </span><span class="se">\&quot;</span><span class="s">happy</span><span class="se">\&quot;</span><span class="s">: true, </span><span class="se">\&quot;</span><span class="s">pi</span><span class="se">\&quot;</span><span class="s">: 3.141 }&quot;</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// or even nicer with a raw string literal</span>
<span class="k">auto</span> <span class="n">j2</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s"></span>
<span class="s">  {</span>
<span class="s">    &quot;happy&quot;: true,</span>
<span class="s">    &quot;pi&quot;: 3.141</span>
<span class="s">  }</span>
<span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>
</pre></div>
</div>
<p>Note that without appending the <code class="docutils literal notranslate"><span class="pre">_json</span></code> suffix, the passed string literal is not parsed, but just used as JSON string value. That is, <code class="docutils literal notranslate"><span class="pre">json</span> <span class="pre">j</span> <span class="pre">=</span> <span class="pre">&quot;{</span> <span class="pre">\&quot;happy\&quot;:</span> <span class="pre">true,</span> <span class="pre">\&quot;pi\&quot;:</span> <span class="pre">3.141</span> <span class="pre">}&quot;</span></code> would just store the string <code class="docutils literal notranslate"><span class="pre">&quot;{</span> <span class="pre">&quot;happy&quot;:</span> <span class="pre">true,</span> <span class="pre">&quot;pi&quot;:</span> <span class="pre">3.141</span> <span class="pre">}&quot;</span></code> rather than parsing the actual object.</p>
<p>The above example can also be expressed explicitly using <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/parse/"><code class="docutils literal notranslate"><span class="pre">json::parse()</span></code></a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// parse explicitly</span>
<span class="k">auto</span> <span class="n">j3</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">{&quot;happy&quot;: true, &quot;pi&quot;: 3.141}</span><span class="dl">)</span><span class="s">&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>You can also get a string representation of a JSON value (serialize):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// explicit conversion to string</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">dump</span><span class="p">();</span>    <span class="c1">// {&quot;happy&quot;:true,&quot;pi&quot;:3.141}</span>

<span class="c1">// serialization with pretty printing</span>
<span class="c1">// pass in the amount of spaces to indent</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="c1">// {</span>
<span class="c1">//     &quot;happy&quot;: true,</span>
<span class="c1">//     &quot;pi&quot;: 3.141</span>
<span class="c1">// }</span>
</pre></div>
</div>
<p>Note the difference between serialization and assignment:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// store a string in a JSON value</span>
<span class="n">json</span> <span class="n">j_string</span> <span class="o">=</span> <span class="s">&quot;this is a string&quot;</span><span class="p">;</span>

<span class="c1">// retrieve the string value</span>
<span class="k">auto</span> <span class="n">cpp_string</span> <span class="o">=</span> <span class="n">j_string</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// retrieve the string value (alternative when an variable already exists)</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cpp_string2</span><span class="p">;</span>
<span class="n">j_string</span><span class="p">.</span><span class="n">get_to</span><span class="p">(</span><span class="n">cpp_string2</span><span class="p">);</span>

<span class="c1">// retrieve the serialized value (explicit JSON serialization)</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">serialized_string</span> <span class="o">=</span> <span class="n">j_string</span><span class="p">.</span><span class="n">dump</span><span class="p">();</span>

<span class="c1">// output of original string</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">cpp_string</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; == &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">cpp_string2</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; == &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">j_string</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="c1">// output of serialized value</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j_string</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; == &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">serialized_string</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<p><a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/dump/"><code class="docutils literal notranslate"><span class="pre">.dump()</span></code></a> returns the originally stored string value.</p>
<p>Note the library only supports UTF-8. When you store strings with different encodings in the library, calling <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/dump/"><code class="docutils literal notranslate"><span class="pre">dump()</span></code></a> may throw an exception unless <code class="docutils literal notranslate"><span class="pre">json::error_handler_t::replace</span></code> or <code class="docutils literal notranslate"><span class="pre">json::error_handler_t::ignore</span></code> are used as error handlers.</p>
</div>
<div class="section" id="to-from-streams-e-g-files-string-streams">
<h3>To/from streams (e.g. files, string streams)<a class="headerlink" href="#to-from-streams-e-g-files-string-streams" title="Permalink to this headline">¶</a></h3>
<p>You can also use streams to serialize and deserialize:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// deserialize from standard input</span>
<span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// serialize to standard output</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// the setw manipulator was overloaded to set the indentation for pretty printing</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<p>These operators work for any subclasses of <code class="docutils literal notranslate"><span class="pre">std::istream</span></code> or <code class="docutils literal notranslate"><span class="pre">std::ostream</span></code>. Here is the same example with files:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// read a JSON file</span>
<span class="n">std</span><span class="o">::</span><span class="n">ifstream</span> <span class="n">i</span><span class="p">(</span><span class="s">&quot;file.json&quot;</span><span class="p">);</span>
<span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="n">j</span><span class="p">;</span>

<span class="c1">// write prettified JSON to another file</span>
<span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="n">o</span><span class="p">(</span><span class="s">&quot;pretty.json&quot;</span><span class="p">);</span>
<span class="n">o</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<p>Please note that setting the exception bit for <code class="docutils literal notranslate"><span class="pre">failbit</span></code> is inappropriate for this use case. It will result in program termination due to the <code class="docutils literal notranslate"><span class="pre">noexcept</span></code> specifier in use.</p>
</div>
<div class="section" id="read-from-iterator-range">
<h3>Read from iterator range<a class="headerlink" href="#read-from-iterator-range" title="Permalink to this headline">¶</a></h3>
<p>You can also parse JSON from an iterator range; that is, from any container accessible by iterators whose <code class="docutils literal notranslate"><span class="pre">value_type</span></code> is an integral type of 1, 2 or 4 bytes, which will be interpreted as UTF-8, UTF-16 and UTF-32 respectively. For instance, a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::uint8_t&gt;</span></code>, or a <code class="docutils literal notranslate"><span class="pre">std::list&lt;std::uint16_t&gt;</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;t&#39;</span><span class="p">,</span> <span class="sc">&#39;r&#39;</span><span class="p">,</span> <span class="sc">&#39;u&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
</pre></div>
</div>
<p>You may leave the iterators for the range [begin, end):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="sc">&#39;t&#39;</span><span class="p">,</span> <span class="sc">&#39;r&#39;</span><span class="p">,</span> <span class="sc">&#39;u&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">};</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-data-source">
<h3>Custom data source<a class="headerlink" href="#custom-data-source" title="Permalink to this headline">¶</a></h3>
<p>Since the parse function accepts arbitrary iterator ranges, you can provide your own data sources by implementing the <code class="docutils literal notranslate"><span class="pre">LegacyInputIterator</span></code> concept.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">MyContainer</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">advance</span><span class="p">();</span>
  <span class="k">const</span> <span class="kt">char</span><span class="o">&amp;</span> <span class="n">get_current</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">MyIterator</span> <span class="p">{</span>
    <span class="k">using</span> <span class="n">difference_type</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="kt">ptrdiff_t</span><span class="p">;</span>
    <span class="k">using</span> <span class="n">value_type</span> <span class="o">=</span> <span class="kt">char</span><span class="p">;</span>
    <span class="k">using</span> <span class="n">pointer</span> <span class="o">=</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">;</span>
    <span class="k">using</span> <span class="n">reference</span> <span class="o">=</span> <span class="k">const</span> <span class="kt">char</span><span class="o">&amp;</span><span class="p">;</span>
    <span class="k">using</span> <span class="n">iterator_category</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">input_iterator_tag</span><span class="p">;</span>

    <span class="n">MyIterator</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">++</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">MyContainer</span><span class="p">.</span><span class="n">advance</span><span class="p">();</span>
        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">MyIterator</span><span class="o">&amp;</span> <span class="n">rhs</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">rhs</span><span class="p">.</span><span class="n">target</span> <span class="o">!=</span> <span class="n">target</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">reference</span> <span class="k">operator</span><span class="o">*</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">target</span><span class="p">.</span><span class="n">get_current</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="n">MyContainer</span><span class="o">*</span> <span class="n">target</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">MyIterator</span> <span class="nf">begin</span><span class="p">(</span><span class="n">MyContainer</span><span class="o">&amp;</span> <span class="n">tgt</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MyIterator</span><span class="p">{</span><span class="o">&amp;</span><span class="n">tgt</span><span class="p">};</span>
<span class="p">}</span>

<span class="n">MyIterator</span> <span class="nf">end</span><span class="p">(</span><span class="k">const</span> <span class="n">MyContainer</span><span class="o">&amp;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{};</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">MyContainer</span> <span class="n">c</span><span class="p">;</span>
    <span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">parse</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sax-interface">
<h3>SAX interface<a class="headerlink" href="#sax-interface" title="Permalink to this headline">¶</a></h3>
<p>The library uses a SAX-like interface with the following functions:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// called when null is parsed</span>
<span class="kt">bool</span> <span class="nf">null</span><span class="p">();</span>

<span class="c1">// called when a boolean is parsed; value is passed</span>
<span class="kt">bool</span> <span class="nf">boolean</span><span class="p">(</span><span class="kt">bool</span> <span class="n">val</span><span class="p">);</span>

<span class="c1">// called when a signed or unsigned integer number is parsed; value is passed</span>
<span class="kt">bool</span> <span class="nf">number_integer</span><span class="p">(</span><span class="n">number_integer_t</span> <span class="n">val</span><span class="p">);</span>
<span class="kt">bool</span> <span class="nf">number_unsigned</span><span class="p">(</span><span class="n">number_unsigned_t</span> <span class="n">val</span><span class="p">);</span>

<span class="c1">// called when a floating-point number is parsed; value and original string is passed</span>
<span class="kt">bool</span> <span class="nf">number_float</span><span class="p">(</span><span class="n">number_float_t</span> <span class="n">val</span><span class="p">,</span> <span class="k">const</span> <span class="n">string_t</span><span class="o">&amp;</span> <span class="n">s</span><span class="p">);</span>

<span class="c1">// called when a string is parsed; value is passed and can be safely moved away</span>
<span class="kt">bool</span> <span class="nf">string</span><span class="p">(</span><span class="n">string_t</span><span class="o">&amp;</span> <span class="n">val</span><span class="p">);</span>
<span class="c1">// called when a binary value is parsed; value is passed and can be safely moved away</span>
<span class="kt">bool</span> <span class="nf">binary</span><span class="p">(</span><span class="n">binary_t</span><span class="o">&amp;</span> <span class="n">val</span><span class="p">);</span>

<span class="c1">// called when an object or array begins or ends, resp. The number of elements is passed (or -1 if not known)</span>
<span class="kt">bool</span> <span class="nf">start_object</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">elements</span><span class="p">);</span>
<span class="kt">bool</span> <span class="nf">end_object</span><span class="p">();</span>
<span class="kt">bool</span> <span class="nf">start_array</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">elements</span><span class="p">);</span>
<span class="kt">bool</span> <span class="nf">end_array</span><span class="p">();</span>
<span class="c1">// called when an object key is parsed; value is passed and can be safely moved away</span>
<span class="kt">bool</span> <span class="nf">key</span><span class="p">(</span><span class="n">string_t</span><span class="o">&amp;</span> <span class="n">val</span><span class="p">);</span>

<span class="c1">// called when a parse error occurs; byte position, the last token, and an exception is passed</span>
<span class="kt">bool</span> <span class="nf">parse_error</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">position</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span> <span class="n">last_token</span><span class="p">,</span> <span class="k">const</span> <span class="n">detail</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span> <span class="n">ex</span><span class="p">);</span>
</pre></div>
</div>
<p>The return value of each function determines whether parsing should proceed.</p>
<p>To implement your own SAX handler, proceed as follows:</p>
<ol class="simple">
<li><p>Implement the SAX interface in a class. You can use class <code class="docutils literal notranslate"><span class="pre">nlohmann::json_sax&lt;json&gt;</span></code> as base class, but you can also use any class where the functions described above are implemented and public.</p></li>
<li><p>Create an object of your SAX interface class, e.g. <code class="docutils literal notranslate"><span class="pre">my_sax</span></code>.</p></li>
<li><p>Call <code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">json::sax_parse(input,</span> <span class="pre">&amp;my_sax)</span></code>; where the first parameter can be any input like a string or an input stream and the second parameter is a pointer to your SAX interface.</p></li>
</ol>
<p>Note the <code class="docutils literal notranslate"><span class="pre">sax_parse</span></code> function only returns a <code class="docutils literal notranslate"><span class="pre">bool</span></code> indicating the result of the last executed SAX event. It does not return a  <code class="docutils literal notranslate"><span class="pre">json</span></code> value - it is up to you to decide what to do with the SAX events. Furthermore, no exceptions are thrown in case of a parse error - it is up to you what to do with the exception object passed to your <code class="docutils literal notranslate"><span class="pre">parse_error</span></code> implementation. Internally, the SAX interface is used for the DOM parser (class <code class="docutils literal notranslate"><span class="pre">json_sax_dom_parser</span></code>) as well as the acceptor (<code class="docutils literal notranslate"><span class="pre">json_sax_acceptor</span></code>), see file <a class="reference external" href="https://github.com/nlohmann/json/blob/develop/include/nlohmann/detail/input/json_sax.hpp"><code class="docutils literal notranslate"><span class="pre">json_sax.hpp</span></code></a>.</p>
</div>
</div>
<div class="section" id="stl-like-access">
<h2>STL-like access<a class="headerlink" href="#stl-like-access" title="Permalink to this headline">¶</a></h2>
<p>We designed the JSON class to behave just like an STL container. In fact, it satisfies the <a class="reference external" href="https://en.cppreference.com/w/cpp/named_req/ReversibleContainer"><strong>ReversibleContainer</strong></a> requirement.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// create an array using push_back</span>
<span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">j</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">);</span>
<span class="n">j</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="n">j</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>

<span class="c1">// also use emplace_back</span>
<span class="n">j</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="mf">1.78</span><span class="p">);</span>

<span class="c1">// iterate the array</span>
<span class="k">for</span> <span class="p">(</span><span class="n">json</span><span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">j</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">it</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// range-based for</span>
<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">element</span> <span class="p">:</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">element</span> <span class="o">&lt;&lt;</span> <span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// getter/setter</span>
<span class="k">const</span> <span class="k">auto</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">j</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="c1">// comparison</span>
<span class="n">j</span> <span class="o">==</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">[&quot;foo&quot;, 1, true, 1.78]</span><span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>  <span class="c1">// true</span>

<span class="c1">// other stuff</span>
<span class="n">j</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>     <span class="c1">// 4 entries</span>
<span class="n">j</span><span class="p">.</span><span class="n">empty</span><span class="p">();</span>    <span class="c1">// false</span>
<span class="n">j</span><span class="p">.</span><span class="n">type</span><span class="p">();</span>     <span class="c1">// json::value_t::array</span>
<span class="n">j</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>    <span class="c1">// the array is empty again</span>

<span class="c1">// convenience type checkers</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_null</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_boolean</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_number</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_object</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_array</span><span class="p">();</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_string</span><span class="p">();</span>

<span class="c1">// create an object</span>
<span class="n">json</span> <span class="n">o</span><span class="p">;</span>
<span class="n">o</span><span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>
<span class="n">o</span><span class="p">[</span><span class="s">&quot;bar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="n">o</span><span class="p">[</span><span class="s">&quot;baz&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.141</span><span class="p">;</span>

<span class="c1">// also use emplace</span>
<span class="n">o</span><span class="p">.</span><span class="n">emplace</span><span class="p">(</span><span class="s">&quot;weather&quot;</span><span class="p">,</span> <span class="s">&quot;sunny&quot;</span><span class="p">);</span>

<span class="c1">// special iterator member functions for objects</span>
<span class="k">for</span> <span class="p">(</span><span class="n">json</span><span class="o">::</span><span class="n">iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">o</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="p">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// the same code as range for</span>
<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">el</span> <span class="p">:</span> <span class="n">o</span><span class="p">.</span><span class="n">items</span><span class="p">())</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">el</span><span class="p">.</span><span class="n">key</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">el</span><span class="p">.</span><span class="n">value</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// even easier with structured bindings (C++17)</span>
<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span> <span class="o">:</span> <span class="n">o</span><span class="p">.</span><span class="n">items</span><span class="p">())</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">key</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">value</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// find an entry</span>
<span class="k">if</span> <span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// there is an entry with key &quot;foo&quot;</span>
<span class="p">}</span>

<span class="c1">// or via find and an iterator</span>
<span class="k">if</span> <span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">o</span><span class="p">.</span><span class="n">end</span><span class="p">())</span> <span class="p">{</span>
  <span class="c1">// there is an entry with key &quot;foo&quot;</span>
<span class="p">}</span>

<span class="c1">// or simpler using count()</span>
<span class="kt">int</span> <span class="n">foo_present</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">);</span> <span class="c1">// 1</span>
<span class="kt">int</span> <span class="n">fob_present</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="s">&quot;fob&quot;</span><span class="p">);</span> <span class="c1">// 0</span>

<span class="c1">// delete an entry</span>
<span class="n">o</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="conversion-from-stl-containers">
<h2>Conversion from STL containers<a class="headerlink" href="#conversion-from-stl-containers" title="Permalink to this headline">¶</a></h2>
<p>Any sequence container (<code class="docutils literal notranslate"><span class="pre">std::array</span></code>, <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>, <code class="docutils literal notranslate"><span class="pre">std::deque</span></code>, <code class="docutils literal notranslate"><span class="pre">std::forward_list</span></code>, <code class="docutils literal notranslate"><span class="pre">std::list</span></code>) whose values can be used to construct JSON values (e.g., integers, floating point numbers, Booleans, string types, or again STL containers described in this section) can be used to create a JSON array. The same holds for similar associative containers (<code class="docutils literal notranslate"><span class="pre">std::set</span></code>, <code class="docutils literal notranslate"><span class="pre">std::multiset</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_set</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_multiset</span></code>), but in these cases the order of the elements of the array depends on how the elements are ordered in the respective STL container.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">c_vector</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_vec</span><span class="p">(</span><span class="n">c_vector</span><span class="p">);</span>
<span class="c1">// [1, 2, 3, 4]</span>

<span class="n">std</span><span class="o">::</span><span class="n">deque</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">c_deque</span> <span class="p">{</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">,</span> <span class="mf">5.6</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_deque</span><span class="p">(</span><span class="n">c_deque</span><span class="p">);</span>
<span class="c1">// [1.2, 2.3, 3.4, 5.6]</span>

<span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">c_list</span> <span class="p">{</span><span class="nb">true</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">true</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_list</span><span class="p">(</span><span class="n">c_list</span><span class="p">);</span>
<span class="c1">// [true, true, false, true]</span>

<span class="n">std</span><span class="o">::</span><span class="n">forward_list</span><span class="o">&lt;</span><span class="kt">int64_t</span><span class="o">&gt;</span> <span class="n">c_flist</span> <span class="p">{</span><span class="mi">12345678909876</span><span class="p">,</span> <span class="mi">23456789098765</span><span class="p">,</span> <span class="mi">34567890987654</span><span class="p">,</span> <span class="mi">45678909876543</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_flist</span><span class="p">(</span><span class="n">c_flist</span><span class="p">);</span>
<span class="c1">// [12345678909876, 23456789098765, 34567890987654, 45678909876543]</span>

<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">,</span> <span class="mi">4</span><span class="o">&gt;</span> <span class="n">c_array</span> <span class="p">{{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">}};</span>
<span class="n">json</span> <span class="nf">j_array</span><span class="p">(</span><span class="n">c_array</span><span class="p">);</span>
<span class="c1">// [1, 2, 3, 4]</span>

<span class="n">std</span><span class="o">::</span><span class="n">set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_set</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">,</span> <span class="s">&quot;one&quot;</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_set</span><span class="p">(</span><span class="n">c_set</span><span class="p">);</span> <span class="c1">// only one entry for &quot;one&quot; is used</span>
<span class="c1">// [&quot;four&quot;, &quot;one&quot;, &quot;three&quot;, &quot;two&quot;]</span>

<span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_uset</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">,</span> <span class="s">&quot;one&quot;</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_uset</span><span class="p">(</span><span class="n">c_uset</span><span class="p">);</span> <span class="c1">// only one entry for &quot;one&quot; is used</span>
<span class="c1">// maybe [&quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;one&quot;]</span>

<span class="n">std</span><span class="o">::</span><span class="n">multiset</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_mset</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_mset</span><span class="p">(</span><span class="n">c_mset</span><span class="p">);</span> <span class="c1">// both entries for &quot;one&quot; are used</span>
<span class="c1">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span>

<span class="n">std</span><span class="o">::</span><span class="n">unordered_multiset</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">c_umset</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">};</span>
<span class="n">json</span> <span class="nf">j_umset</span><span class="p">(</span><span class="n">c_umset</span><span class="p">);</span> <span class="c1">// both entries for &quot;one&quot; are used</span>
<span class="c1">// maybe [&quot;one&quot;, &quot;two&quot;, &quot;one&quot;, &quot;four&quot;]</span>
</pre></div>
</div>
<p>Likewise, any associative key-value containers (<code class="docutils literal notranslate"><span class="pre">std::map</span></code>, <code class="docutils literal notranslate"><span class="pre">std::multimap</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_multimap</span></code>) whose keys can construct an <code class="docutils literal notranslate"><span class="pre">std::string</span></code> and whose values can be used to construct JSON values (see examples above) can be used to create a JSON object. Note that in case of multimaps only one key is used in the JSON object and the value depends on the internal order of the STL container.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">c_map</span> <span class="p">{</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="nf">j_map</span><span class="p">(</span><span class="n">c_map</span><span class="p">);</span>
<span class="c1">// {&quot;one&quot;: 1, &quot;three&quot;: 3, &quot;two&quot;: 2 }</span>

<span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">c_umap</span> <span class="p">{</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="nf">j_umap</span><span class="p">(</span><span class="n">c_umap</span><span class="p">);</span>
<span class="c1">// {&quot;one&quot;: 1.2, &quot;two&quot;: 2.3, &quot;three&quot;: 3.4}</span>

<span class="n">std</span><span class="o">::</span><span class="n">multimap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;</span> <span class="n">c_mmap</span> <span class="p">{</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="nf">j_mmap</span><span class="p">(</span><span class="n">c_mmap</span><span class="p">);</span> <span class="c1">// only one entry for key &quot;three&quot; is used</span>
<span class="c1">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span>

<span class="n">std</span><span class="o">::</span><span class="n">unordered_multimap</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;</span> <span class="n">c_ummap</span> <span class="p">{</span> <span class="p">{</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="nb">true</span><span class="p">}</span> <span class="p">};</span>
<span class="n">json</span> <span class="nf">j_ummap</span><span class="p">(</span><span class="n">c_ummap</span><span class="p">);</span> <span class="c1">// only one entry for key &quot;three&quot; is used</span>
<span class="c1">// maybe {&quot;one&quot;: true, &quot;two&quot;: true, &quot;three&quot;: true}</span>
</pre></div>
</div>
</div>
<div class="section" id="json-pointer-and-json-patch">
<h2>JSON Pointer and JSON Patch<a class="headerlink" href="#json-pointer-and-json-patch" title="Permalink to this headline">¶</a></h2>
<p>The library supports <strong>JSON Pointer</strong> (<a class="reference external" href="https://tools.ietf.org/html/rfc6901">RFC 6901</a>) as alternative means to address structured values. On top of this, <strong>JSON Patch</strong> (<a class="reference external" href="https://tools.ietf.org/html/rfc6902">RFC 6902</a>) allows to describe differences between two JSON values - effectively allowing patch and diff operations known from Unix.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// a JSON value</span>
<span class="n">json</span> <span class="n">j_original</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">{</span>
<span class="s">  &quot;baz&quot;: [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;],</span>
<span class="s">  &quot;foo&quot;: &quot;bar&quot;</span>
<span class="s">}</span><span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// access members with a JSON pointer (RFC 6901)</span>
<span class="n">j_original</span><span class="p">[</span><span class="s">&quot;/baz/1&quot;</span><span class="n">_json_pointer</span><span class="p">];</span>
<span class="c1">// &quot;two&quot;</span>

<span class="c1">// a JSON patch (RFC 6902)</span>
<span class="n">json</span> <span class="n">j_patch</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">[</span>
<span class="s">  { &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/baz&quot;, &quot;value&quot;: &quot;boo&quot; },</span>
<span class="s">  { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/hello&quot;, &quot;value&quot;: [&quot;world&quot;] },</span>
<span class="s">  { &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/foo&quot;}</span>
<span class="s">]</span><span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// apply the patch</span>
<span class="n">json</span> <span class="n">j_result</span> <span class="o">=</span> <span class="n">j_original</span><span class="p">.</span><span class="n">patch</span><span class="p">(</span><span class="n">j_patch</span><span class="p">);</span>
<span class="c1">// {</span>
<span class="c1">//    &quot;baz&quot;: &quot;boo&quot;,</span>
<span class="c1">//    &quot;hello&quot;: [&quot;world&quot;]</span>
<span class="c1">// }</span>

<span class="c1">// calculate a JSON patch from two JSON values</span>
<span class="n">json</span><span class="o">::</span><span class="n">diff</span><span class="p">(</span><span class="n">j_result</span><span class="p">,</span> <span class="n">j_original</span><span class="p">);</span>
<span class="c1">// [</span>
<span class="c1">//   { &quot;op&quot;:&quot; replace&quot;, &quot;path&quot;: &quot;/baz&quot;, &quot;value&quot;: [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;] },</span>
<span class="c1">//   { &quot;op&quot;: &quot;remove&quot;,&quot;path&quot;: &quot;/hello&quot; },</span>
<span class="c1">//   { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/foo&quot;, &quot;value&quot;: &quot;bar&quot; }</span>
<span class="c1">// ]</span>
</pre></div>
</div>
</div>
<div class="section" id="json-merge-patch">
<h2>JSON Merge Patch<a class="headerlink" href="#json-merge-patch" title="Permalink to this headline">¶</a></h2>
<p>The library supports <strong>JSON Merge Patch</strong> (<a class="reference external" href="https://tools.ietf.org/html/rfc7386">RFC 7386</a>) as a patch format. Instead of using JSON Pointer (see above) to specify values to be manipulated, it describes the changes using a syntax that closely mimics the document being modified.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// a JSON value</span>
<span class="n">json</span> <span class="n">j_document</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">{</span>
<span class="s">  &quot;a&quot;: &quot;b&quot;,</span>
<span class="s">  &quot;c&quot;: {</span>
<span class="s">    &quot;d&quot;: &quot;e&quot;,</span>
<span class="s">    &quot;f&quot;: &quot;g&quot;</span>
<span class="s">  }</span>
<span class="s">}</span><span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// a patch</span>
<span class="n">json</span> <span class="n">j_patch</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">{</span>
<span class="s">  &quot;a&quot;:&quot;z&quot;,</span>
<span class="s">  &quot;c&quot;: {</span>
<span class="s">    &quot;f&quot;: null</span>
<span class="s">  }</span>
<span class="s">}</span><span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// apply the patch</span>
<span class="n">j_document</span><span class="p">.</span><span class="n">merge_patch</span><span class="p">(</span><span class="n">j_patch</span><span class="p">);</span>
<span class="c1">// {</span>
<span class="c1">//  &quot;a&quot;: &quot;z&quot;,</span>
<span class="c1">//  &quot;c&quot;: {</span>
<span class="c1">//    &quot;d&quot;: &quot;e&quot;</span>
<span class="c1">//  }</span>
<span class="c1">// }</span>
</pre></div>
</div>
</div>
<div class="section" id="implicit-conversions">
<h2>Implicit conversions<a class="headerlink" href="#implicit-conversions" title="Permalink to this headline">¶</a></h2>
<p>Supported types can be implicitly converted to JSON values.</p>
<p>It is recommended to <strong>NOT USE</strong> implicit conversions <strong>FROM</strong> a JSON value.
You can find more details about this recommendation <a class="reference external" href="https://www.github.com/nlohmann/json/issues/958">here</a>.
You can switch off implicit conversions by defining <code class="docutils literal notranslate"><span class="pre">JSON_USE_IMPLICIT_CONVERSIONS</span></code> to <code class="docutils literal notranslate"><span class="pre">0</span></code> before including the <code class="docutils literal notranslate"><span class="pre">json.hpp</span></code> header. When using CMake, you can also achieve this by setting the option <code class="docutils literal notranslate"><span class="pre">JSON_ImplicitConversions</span></code> to <code class="docutils literal notranslate"><span class="pre">OFF</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// strings</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">&quot;Hello, world!&quot;</span><span class="p">;</span>
<span class="n">json</span> <span class="n">js</span> <span class="o">=</span> <span class="n">s1</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">js</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// NOT RECOMMENDED</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s3</span> <span class="o">=</span> <span class="n">js</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s4</span><span class="p">;</span>
<span class="n">s4</span> <span class="o">=</span> <span class="n">js</span><span class="p">;</span>

<span class="c1">// Booleans</span>
<span class="kt">bool</span> <span class="n">b1</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="n">json</span> <span class="n">jb</span> <span class="o">=</span> <span class="n">b1</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">jb</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// NOT RECOMMENDED</span>
<span class="kt">bool</span> <span class="n">b3</span> <span class="o">=</span> <span class="n">jb</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">b4</span><span class="p">;</span>
<span class="n">b4</span> <span class="o">=</span> <span class="n">jb</span><span class="p">;</span>

<span class="c1">// numbers</span>
<span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="n">json</span> <span class="n">jn</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="k">auto</span> <span class="n">f</span> <span class="o">=</span> <span class="n">jn</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">();</span>
<span class="c1">// NOT RECOMMENDED</span>
<span class="kt">double</span> <span class="n">f2</span> <span class="o">=</span> <span class="n">jb</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">f3</span><span class="p">;</span>
<span class="n">f3</span> <span class="o">=</span> <span class="n">jb</span><span class="p">;</span>

<span class="c1">// etc.</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">char</span></code> types are not automatically converted to JSON strings, but to integer numbers. A conversion to a string must be specified explicitly:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">ch</span> <span class="o">=</span> <span class="sc">&#39;A&#39;</span><span class="p">;</span>                       <span class="c1">// ASCII value 65</span>
<span class="n">json</span> <span class="n">j_default</span> <span class="o">=</span> <span class="n">ch</span><span class="p">;</span>                 <span class="c1">// stores integer number 65</span>
<span class="n">json</span> <span class="n">j_string</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ch</span><span class="p">);</span>  <span class="c1">// stores string &quot;A&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="arbitrary-types-conversions">
<h2>Arbitrary types conversions<a class="headerlink" href="#arbitrary-types-conversions" title="Permalink to this headline">¶</a></h2>
<p>Every type can be serialized in JSON, not just STL containers and scalar types. Usually, you would do something along those lines:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">ns</span> <span class="p">{</span>
    <span class="c1">// a simple struct to model a person</span>
    <span class="k">struct</span> <span class="n">person</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">address</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;Ned Flanders&quot;</span><span class="p">,</span> <span class="s">&quot;744 Evergreen Terrace&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">};</span>

<span class="c1">// convert to JSON: copy each value into the JSON object</span>
<span class="n">json</span> <span class="n">j</span><span class="p">;</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">;</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;address&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">address</span><span class="p">;</span>
<span class="n">j</span><span class="p">[</span><span class="s">&quot;age&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="p">;</span>

<span class="c1">// ...</span>

<span class="c1">// convert from JSON: copy each value from the JSON object</span>
<span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p</span> <span class="p">{</span>
    <span class="n">j</span><span class="p">[</span><span class="s">&quot;name&quot;</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>
    <span class="n">j</span><span class="p">[</span><span class="s">&quot;address&quot;</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>
    <span class="n">j</span><span class="p">[</span><span class="s">&quot;age&quot;</span><span class="p">].</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()</span>
<span class="p">};</span>
</pre></div>
</div>
<p>It works, but that’s quite a lot of boilerplate… Fortunately, there’s a better way:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// create a person</span>
<span class="n">ns</span><span class="o">::</span><span class="n">person</span> <span class="n">p</span> <span class="p">{</span><span class="s">&quot;Ned Flanders&quot;</span><span class="p">,</span> <span class="s">&quot;744 Evergreen Terrace&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">};</span>

<span class="c1">// conversion: person -&gt; json</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">j</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="c1">// {&quot;address&quot;:&quot;744 Evergreen Terrace&quot;,&quot;age&quot;:60,&quot;name&quot;:&quot;Ned Flanders&quot;}</span>

<span class="c1">// conversion: json -&gt; person</span>
<span class="k">auto</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">ns</span><span class="o">::</span><span class="n">person</span><span class="o">&gt;</span><span class="p">();</span>

<span class="c1">// that&#39;s it</span>
<span class="n">assert</span><span class="p">(</span><span class="n">p</span> <span class="o">==</span> <span class="n">p2</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="basic-usage">
<h3>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h3>
<p>To make this work with one of your types, you only need to provide two functions:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">json</span> <span class="o">=</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="p">;</span>

<span class="k">namespace</span> <span class="n">ns</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">person</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="p">{{</span><span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;address&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">address</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;age&quot;</span><span class="p">,</span> <span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="p">}};</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">person</span><span class="o">&amp;</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">).</span><span class="n">get_to</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
        <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">&quot;address&quot;</span><span class="p">).</span><span class="n">get_to</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">address</span><span class="p">);</span>
        <span class="n">j</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">).</span><span class="n">get_to</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">age</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="c1">// namespace ns</span>
</pre></div>
</div>
<p>That’s all! When calling the <code class="docutils literal notranslate"><span class="pre">json</span></code> constructor with your type, your custom <code class="docutils literal notranslate"><span class="pre">to_json</span></code> method will be automatically called.
Likewise, when calling <code class="docutils literal notranslate"><span class="pre">get&lt;your_type&gt;()</span></code> or <code class="docutils literal notranslate"><span class="pre">get_to(your_type&amp;)</span></code>, the <code class="docutils literal notranslate"><span class="pre">from_json</span></code> method will be called.</p>
<p>Some important things:</p>
<ul class="simple">
<li><p>Those methods <strong>MUST</strong> be in your type’s namespace (which can be the global namespace), or the library will not be able to locate them (in this example, they are in namespace <code class="docutils literal notranslate"><span class="pre">ns</span></code>, where <code class="docutils literal notranslate"><span class="pre">person</span></code> is defined).</p></li>
<li><p>Those methods <strong>MUST</strong> be available (e.g., proper headers must be included) everywhere you use these conversions. Look at <a class="reference external" href="https://github.com/nlohmann/json/issues/1108">issue 1108</a> for errors that may occur otherwise.</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">get&lt;your_type&gt;()</span></code>, <code class="docutils literal notranslate"><span class="pre">your_type</span></code> <strong>MUST</strong> be <a class="reference external" href="https://en.cppreference.com/w/cpp/named_req/DefaultConstructible">DefaultConstructible</a>. (There is a way to bypass this requirement described later.)</p></li>
<li><p>In function <code class="docutils literal notranslate"><span class="pre">from_json</span></code>, use function <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/at/"><code class="docutils literal notranslate"><span class="pre">at()</span></code></a> to access the object values rather than <code class="docutils literal notranslate"><span class="pre">operator[]</span></code>. In case a key does not exist, <code class="docutils literal notranslate"><span class="pre">at</span></code> throws an exception that you can handle, whereas <code class="docutils literal notranslate"><span class="pre">operator[]</span></code> exhibits undefined behavior.</p></li>
<li><p>You do not need to add serializers or deserializers for STL types like <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>: the library already implements these.</p></li>
</ul>
</div>
<div class="section" id="simplify-your-life-with-macros">
<h3>Simplify your life with macros<a class="headerlink" href="#simplify-your-life-with-macros" title="Permalink to this headline">¶</a></h3>
<p>If you just want to serialize/deserialize some structs, the <code class="docutils literal notranslate"><span class="pre">to_json</span></code>/<code class="docutils literal notranslate"><span class="pre">from_json</span></code> functions can be a lot of boilerplate.</p>
<p>There are two macros to make your life easier as long as you (1) want to use a JSON object as serialization and (2) want to use the member variable names as object keys in that object:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE(name,</span> <span class="pre">member1,</span> <span class="pre">member2,</span> <span class="pre">...)</span></code> is to be defined inside of the namespace of the class/struct to create code for.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_INTRUSIVE(name,</span> <span class="pre">member1,</span> <span class="pre">member2,</span> <span class="pre">...)</span></code> is to be defined inside of the class/struct to create code for. This macro can also access private members.</p></li>
</ul>
<p>In both macros, the first parameter is the name of the class/struct, and all remaining parameters name the members.</p>
<div class="section" id="id1">
<h4>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">to_json</span></code>/<code class="docutils literal notranslate"><span class="pre">from_json</span></code> functions for the <code class="docutils literal notranslate"><span class="pre">person</span></code> struct above can be created with:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">ns</span> <span class="p">{</span>
    <span class="n">NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here is an example with private members, where <code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_INTRUSIVE</span></code> is needed:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">ns</span> <span class="p">{</span>
    <span class="k">class</span> <span class="nc">address</span> <span class="p">{</span>
      <span class="k">private</span><span class="o">:</span>
        <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">street</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">housenumber</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">postcode</span><span class="p">;</span>

      <span class="k">public</span><span class="o">:</span>
        <span class="n">NLOHMANN_DEFINE_TYPE_INTRUSIVE</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">street</span><span class="p">,</span> <span class="n">housenumber</span><span class="p">,</span> <span class="n">postcode</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-do-i-convert-third-party-types">
<h3>How do I convert third-party types?<a class="headerlink" href="#how-do-i-convert-third-party-types" title="Permalink to this headline">¶</a></h3>
<p>This requires a bit more advanced technique. But first, let’s see how this conversion mechanism works:</p>
<p>The library uses <strong>JSON Serializers</strong> to convert types to json.
The default serializer for <code class="docutils literal notranslate"><span class="pre">nlohmann::json</span></code> is <code class="docutils literal notranslate"><span class="pre">nlohmann::adl_serializer</span></code> (ADL means <a class="reference external" href="https://en.cppreference.com/w/cpp/language/adl">Argument-Dependent Lookup</a>).</p>
<p>It is implemented like this (simplified):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">adl_serializer</span> <span class="p">{</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// calls the &quot;to_json&quot; method in T&#39;s namespace</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// same thing, but with the &quot;from_json&quot; method</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>This serializer works fine when you have control over the type’s namespace. However, what about <code class="docutils literal notranslate"><span class="pre">boost::optional</span></code> or <code class="docutils literal notranslate"><span class="pre">std::filesystem::path</span></code> (C++17)? Hijacking the <code class="docutils literal notranslate"><span class="pre">boost</span></code> namespace is pretty bad, and it’s illegal to add something other than template specializations to <code class="docutils literal notranslate"><span class="pre">std</span></code>…</p>
<p>To solve this, you need to add a specialization of <code class="docutils literal notranslate"><span class="pre">adl_serializer</span></code> to the <code class="docutils literal notranslate"><span class="pre">nlohmann</span></code> namespace, here’s an example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// partial specialization (full specialization works too)</span>
<span class="k">namespace</span> <span class="n">nlohmann</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
    <span class="k">struct</span> <span class="n">adl_serializer</span><span class="o">&lt;</span><span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
        <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">opt</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">opt</span> <span class="o">==</span> <span class="n">boost</span><span class="o">::</span><span class="n">none</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">j</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="n">j</span> <span class="o">=</span> <span class="o">*</span><span class="n">opt</span><span class="p">;</span> <span class="c1">// this will call adl_serializer&lt;T&gt;::to_json which will</span>
                        <span class="c1">// find the free function to_json in T&#39;s namespace!</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">static</span> <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">boost</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span> <span class="n">opt</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">j</span><span class="p">.</span><span class="n">is_null</span><span class="p">())</span> <span class="p">{</span>
                <span class="n">opt</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">none</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">opt</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// same as above, but with</span>
                                  <span class="c1">// adl_serializer&lt;T&gt;::from_json</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-use-get-for-non-default-constructible-non-copyable-types">
<h3>How can I use <code class="docutils literal notranslate"><span class="pre">get()</span></code> for non-default constructible/non-copyable types?<a class="headerlink" href="#how-can-i-use-get-for-non-default-constructible-non-copyable-types" title="Permalink to this headline">¶</a></h3>
<p>There is a way, if your type is <a class="reference external" href="https://en.cppreference.com/w/cpp/named_req/MoveConstructible">MoveConstructible</a>. You will need to specialize the <code class="docutils literal notranslate"><span class="pre">adl_serializer</span></code> as well, but with a special <code class="docutils literal notranslate"><span class="pre">from_json</span></code> overload:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">move_only_type</span> <span class="p">{</span>
    <span class="n">move_only_type</span><span class="p">()</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">move_only_type</span><span class="p">(</span><span class="kt">int</span> <span class="n">ii</span><span class="p">)</span><span class="o">:</span> <span class="n">i</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">move_only_type</span><span class="p">(</span><span class="k">const</span> <span class="n">move_only_type</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">move_only_type</span><span class="p">(</span><span class="n">move_only_type</span><span class="o">&amp;&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">namespace</span> <span class="n">nlohmann</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;&gt;</span>
    <span class="k">struct</span> <span class="n">adl_serializer</span><span class="o">&lt;</span><span class="n">move_only_type</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="c1">// note: the return type is no longer &#39;void&#39;, and the method only takes</span>
        <span class="c1">// one argument</span>
        <span class="k">static</span> <span class="n">move_only_type</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">j</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()};</span>
        <span class="p">}</span>

        <span class="c1">// Here&#39;s the catch! You must provide a to_json method! Otherwise you</span>
        <span class="c1">// will not be able to convert move_only_type to json, since you fully</span>
        <span class="c1">// specialized adl_serializer on that type</span>
        <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">json</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">move_only_type</span> <span class="n">t</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="can-i-write-my-own-serializer-advanced-use">
<h3>Can I write my own serializer? (Advanced use)<a class="headerlink" href="#can-i-write-my-own-serializer-advanced-use" title="Permalink to this headline">¶</a></h3>
<p>Yes. You might want to take a look at <a class="reference external" href="https://github.com/nlohmann/json/blob/develop/test/src/unit-udt.cpp"><code class="docutils literal notranslate"><span class="pre">unit-udt.cpp</span></code></a> in the test suite, to see a few examples.</p>
<p>If you write your own serializer, you’ll need to do a few things:</p>
<ul class="simple">
<li><p>use a different <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> alias than <code class="docutils literal notranslate"><span class="pre">nlohmann::json</span></code> (the last template parameter of <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> is the <code class="docutils literal notranslate"><span class="pre">JSONSerializer</span></code>)</p></li>
<li><p>use your <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> alias (or a template parameter) in all your <code class="docutils literal notranslate"><span class="pre">to_json</span></code>/<code class="docutils literal notranslate"><span class="pre">from_json</span></code> methods</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">nlohmann::to_json</span></code> and <code class="docutils literal notranslate"><span class="pre">nlohmann::from_json</span></code> when you need ADL</p></li>
</ul>
<p>Here is an example, without simplifications, that only accepts types with a size &lt;= 32, and uses ADL.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// You should use void as a second template argument</span>
<span class="c1">// if you don&#39;t need compile-time checks on T</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">SFINAE</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">std</span><span class="o">::</span><span class="n">enable_if</span><span class="o">&lt;</span><span class="k">sizeof</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">32</span><span class="o">&gt;::</span><span class="n">type</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">less_than_32_serializer</span> <span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// we want to use ADL, and call the correct to_json overload</span>
        <span class="k">using</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">to_json</span><span class="p">;</span> <span class="c1">// this method is called by adl_serializer,</span>
                                 <span class="c1">// this is where the magic happens</span>
        <span class="n">to_json</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">from_json</span><span class="p">(</span><span class="k">const</span> <span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// same thing here</span>
        <span class="k">using</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">from_json</span><span class="p">;</span>
        <span class="n">from_json</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Be <strong>very</strong> careful when reimplementing your serializer, you can stack overflow if you don’t pay attention:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="kt">void</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">bad_serializer</span>
<span class="p">{</span>
    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// this calls BasicJsonType::json_serializer&lt;T&gt;::to_json(j, value);</span>
      <span class="c1">// if BasicJsonType::json_serializer == bad_serializer ... oops!</span>
      <span class="n">j</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">BasicJsonType</span><span class="o">&gt;</span>
    <span class="k">static</span> <span class="kt">void</span> <span class="n">to_json</span><span class="p">(</span><span class="k">const</span> <span class="n">BasicJsonType</span><span class="o">&amp;</span> <span class="n">j</span><span class="p">,</span> <span class="n">T</span><span class="o">&amp;</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// this calls BasicJsonType::json_serializer&lt;T&gt;::from_json(j, value);</span>
      <span class="c1">// if BasicJsonType::json_serializer == bad_serializer ... oops!</span>
      <span class="n">value</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="k">template</span> <span class="n">get</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// oops!</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="specializing-enum-conversion">
<h2>Specializing enum conversion<a class="headerlink" href="#specializing-enum-conversion" title="Permalink to this headline">¶</a></h2>
<p>By default, enum values are serialized to JSON as integers. In some cases this could result in undesired behavior. If an enum is modified or re-ordered after data has been serialized to JSON, the later de-serialized JSON data may be undefined or a different enum value than was originally intended.</p>
<p>It is possible to more precisely specify how a given enum is mapped to and from JSON as shown below:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// example enum type declaration</span>
<span class="k">enum</span> <span class="n">TaskState</span> <span class="p">{</span>
    <span class="n">TS_STOPPED</span><span class="p">,</span>
    <span class="n">TS_RUNNING</span><span class="p">,</span>
    <span class="n">TS_COMPLETED</span><span class="p">,</span>
    <span class="n">TS_INVALID</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// map TaskState values to JSON as strings</span>
<span class="n">NLOHMANN_JSON_SERIALIZE_ENUM</span><span class="p">(</span> <span class="n">TaskState</span><span class="p">,</span> <span class="p">{</span>
    <span class="p">{</span><span class="n">TS_INVALID</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">},</span>
    <span class="p">{</span><span class="n">TS_STOPPED</span><span class="p">,</span> <span class="s">&quot;stopped&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="n">TS_RUNNING</span><span class="p">,</span> <span class="s">&quot;running&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="n">TS_COMPLETED</span><span class="p">,</span> <span class="s">&quot;completed&quot;</span><span class="p">},</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">NLOHMANN_JSON_SERIALIZE_ENUM()</span></code> macro declares a set of <code class="docutils literal notranslate"><span class="pre">to_json()</span></code> / <code class="docutils literal notranslate"><span class="pre">from_json()</span></code> functions for type <code class="docutils literal notranslate"><span class="pre">TaskState</span></code> while avoiding repetition and boilerplate serialization code.</p>
<p><strong>Usage:</strong></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// enum to JSON as string</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">TS_STOPPED</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="s">&quot;stopped&quot;</span><span class="p">);</span>

<span class="c1">// json string to enum</span>
<span class="n">json</span> <span class="n">j3</span> <span class="o">=</span> <span class="s">&quot;running&quot;</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span><span class="n">j3</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">TaskState</span><span class="o">&gt;</span><span class="p">()</span> <span class="o">==</span> <span class="n">TS_RUNNING</span><span class="p">);</span>

<span class="c1">// undefined json value to enum (where the first map entry above is the default)</span>
<span class="n">json</span> <span class="n">jPi</span> <span class="o">=</span> <span class="mf">3.14</span><span class="p">;</span>
<span class="n">assert</span><span class="p">(</span><span class="n">jPi</span><span class="p">.</span><span class="n">get</span><span class="o">&lt;</span><span class="n">TaskState</span><span class="o">&gt;</span><span class="p">()</span> <span class="o">==</span> <span class="n">TS_INVALID</span> <span class="p">);</span>
</pre></div>
</div>
<p>Just as in <a class="reference external" href="#arbitrary-types-conversions">Arbitrary Type Conversions</a> above,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NLOHMANN_JSON_SERIALIZE_ENUM()</span></code> MUST be declared in your enum type’s namespace (which can be the global namespace), or the library will not be able to locate it and it will default to integer serialization.</p></li>
<li><p>It MUST be available (e.g., proper headers must be included) everywhere you use the conversions.</p></li>
</ul>
<p>Other Important points:</p>
<ul class="simple">
<li><p>When using <code class="docutils literal notranslate"><span class="pre">get&lt;ENUM_TYPE&gt;()</span></code>, undefined JSON values will default to the first pair specified in your map. Select this default pair carefully.</p></li>
<li><p>If an enum or JSON value is specified more than once in your map, the first matching occurrence from the top of the map will be returned when converting to or from JSON.</p></li>
</ul>
</div>
<div class="section" id="binary-formats-bson-cbor-messagepack-and-ubjson">
<h2>Binary formats (BSON, CBOR, MessagePack, and UBJSON)<a class="headerlink" href="#binary-formats-bson-cbor-messagepack-and-ubjson" title="Permalink to this headline">¶</a></h2>
<p>Though JSON is a ubiquitous data format, it is not a very compact format suitable for data exchange, for instance over a network. Hence, the library supports <a class="reference external" href="https://bsonspec.org">BSON</a> (Binary JSON), <a class="reference external" href="https://cbor.io">CBOR</a> (Concise Binary Object Representation), <a class="reference external" href="https://msgpack.org">MessagePack</a>, and <a class="reference external" href="https://ubjson.org">UBJSON</a> (Universal Binary JSON Specification) to efficiently encode JSON values to byte vectors and to decode such vectors.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// create a JSON value</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">{&quot;compact&quot;: true, &quot;schema&quot;: 0}</span><span class="dl">)</span><span class="s">&quot;</span><span class="n">_json</span><span class="p">;</span>

<span class="c1">// serialize to BSON</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v_bson</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_bson</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>

<span class="c1">// 0x1B, 0x00, 0x00, 0x00, 0x08, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x00, 0x01, 0x10, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00</span>

<span class="c1">// roundtrip</span>
<span class="n">json</span> <span class="n">j_from_bson</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_bson</span><span class="p">(</span><span class="n">v_bson</span><span class="p">);</span>

<span class="c1">// serialize to CBOR</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v_cbor</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_cbor</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>

<span class="c1">// 0xA2, 0x67, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xF5, 0x66, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00</span>

<span class="c1">// roundtrip</span>
<span class="n">json</span> <span class="n">j_from_cbor</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_cbor</span><span class="p">(</span><span class="n">v_cbor</span><span class="p">);</span>

<span class="c1">// serialize to MessagePack</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v_msgpack</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_msgpack</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>

<span class="c1">// 0x82, 0xA7, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0xC3, 0xA6, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x00</span>

<span class="c1">// roundtrip</span>
<span class="n">json</span> <span class="n">j_from_msgpack</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_msgpack</span><span class="p">(</span><span class="n">v_msgpack</span><span class="p">);</span>

<span class="c1">// serialize to UBJSON</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v_ubjson</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_ubjson</span><span class="p">(</span><span class="n">j</span><span class="p">);</span>

<span class="c1">// 0x7B, 0x69, 0x07, 0x63, 0x6F, 0x6D, 0x70, 0x61, 0x63, 0x74, 0x54, 0x69, 0x06, 0x73, 0x63, 0x68, 0x65, 0x6D, 0x61, 0x69, 0x00, 0x7D</span>

<span class="c1">// roundtrip</span>
<span class="n">json</span> <span class="n">j_from_ubjson</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_ubjson</span><span class="p">(</span><span class="n">v_ubjson</span><span class="p">);</span>
</pre></div>
</div>
<p>The library also supports binary types from BSON, CBOR (byte strings), and MessagePack (bin, ext, fixext). They are stored by default as <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::uint8_t&gt;</span></code> to be processed outside of the library.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// CBOR byte string with payload 0xCAFE</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x42</span><span class="p">,</span> <span class="mh">0xCA</span><span class="p">,</span> <span class="mh">0xFE</span><span class="p">};</span>

<span class="c1">// read value</span>
<span class="n">json</span> <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">from_cbor</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>

<span class="c1">// the JSON value has type binary</span>
<span class="n">j</span><span class="p">.</span><span class="n">is_binary</span><span class="p">();</span> <span class="c1">// true</span>

<span class="c1">// get reference to stored binary value</span>
<span class="k">auto</span><span class="o">&amp;</span> <span class="n">binary</span> <span class="o">=</span> <span class="n">j</span><span class="p">.</span><span class="n">get_binary</span><span class="p">();</span>

<span class="c1">// the binary value has no subtype (CBOR has no binary subtypes)</span>
<span class="n">binary</span><span class="p">.</span><span class="n">has_subtype</span><span class="p">();</span> <span class="c1">// false</span>

<span class="c1">// access std::vector&lt;std::uint8_t&gt; member functions</span>
<span class="n">binary</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="c1">// 2</span>
<span class="n">binary</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// 0xCA</span>
<span class="n">binary</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// 0xFE</span>

<span class="c1">// set subtype to 0x10</span>
<span class="n">binary</span><span class="p">.</span><span class="n">set_subtype</span><span class="p">(</span><span class="mh">0x10</span><span class="p">);</span>

<span class="c1">// serialize to MessagePack</span>
<span class="k">auto</span> <span class="n">cbor</span> <span class="o">=</span> <span class="n">json</span><span class="o">::</span><span class="n">to_msgpack</span><span class="p">(</span><span class="n">j</span><span class="p">);</span> <span class="c1">// 0xD5 (fixext2), 0x10, 0xCA, 0xFE</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="supported-compilers">
<h1>Supported compilers<a class="headerlink" href="#supported-compilers" title="Permalink to this headline">¶</a></h1>
<p>Though it’s 2021 already, the support for C++11 is still a bit sparse. Currently, the following compilers are known to work:</p>
<ul class="simple">
<li><p>GCC 4.8 - 11.0 (and possibly later)</p></li>
<li><p>Clang 3.4 - 13.0 (and possibly later)</p></li>
<li><p>Apple Clang 9.1 - 12.4 (and possibly later)</p></li>
<li><p>Intel C++ Compiler 17.0.2 (and possibly later)</p></li>
<li><p>Microsoft Visual C++ 2015 / Build Tools 14.0.25123.0 (and possibly later)</p></li>
<li><p>Microsoft Visual C++ 2017 / Build Tools 15.5.180.51428 (and possibly later)</p></li>
<li><p>Microsoft Visual C++ 2019 / Build Tools 16.3.1+1def00d3d (and possibly later)</p></li>
</ul>
<p>I would be happy to learn about other compilers/versions.</p>
<p>Please note:</p>
<ul>
<li><p>GCC 4.8 has a bug <a class="reference external" href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=57824">57824</a>): multiline raw strings cannot be the arguments to macros. Don’t use multiline raw strings directly in macros with this compiler.</p></li>
<li><p>Android defaults to using very old compilers and C++ libraries. To fix this, add the following to your <code class="docutils literal notranslate"><span class="pre">Application.mk</span></code>. This will switch to the LLVM C++ library, the Clang compiler, and enable C++11 and other features disabled by default.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">APP_STL</span> <span class="p">:</span><span class="o">=</span> <span class="n">c</span><span class="o">++</span><span class="n">_shared</span>
<span class="n">NDK_TOOLCHAIN_VERSION</span> <span class="p">:</span><span class="o">=</span> <span class="n">clang3</span><span class="o">.</span><span class="mi">6</span>
<span class="n">APP_CPPFLAGS</span> <span class="o">+=</span> <span class="o">-</span><span class="n">frtti</span> <span class="o">-</span><span class="n">fexceptions</span>
</pre></div>
</div>
<p>The code compiles successfully with <a class="reference external" href="https://developer.android.com/ndk/index.html?hl=ml">Android NDK</a>, Revision 9 - 11 (and possibly later) and <a class="reference external" href="https://www.crystax.net/en/android/ndk">CrystaX’s Android NDK</a> version 10.</p>
</li>
<li><p>For GCC running on MinGW or Android SDK, the error <code class="docutils literal notranslate"><span class="pre">'to_string'</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">member</span> <span class="pre">of</span> <span class="pre">'std'</span></code> (or similarly, for <code class="docutils literal notranslate"><span class="pre">strtod</span></code> or <code class="docutils literal notranslate"><span class="pre">strtof</span></code>) may occur. Note this is not an issue with the code,  but rather with the compiler itself. On Android, see above to build with a newer environment.  For MinGW, please refer to <a class="reference external" href="https://tehsausage.com/mingw-to-string">this site</a> and <a class="reference external" href="https://github.com/nlohmann/json/issues/136">this discussion</a> for information on how to fix this bug. For Android NDK using <code class="docutils literal notranslate"><span class="pre">APP_STL</span> <span class="pre">:=</span> <span class="pre">gnustl_static</span></code>, please refer to <a class="reference external" href="https://github.com/nlohmann/json/issues/219">this discussion</a>.</p></li>
<li><p>Unsupported versions of GCC and Clang are rejected by <code class="docutils literal notranslate"><span class="pre">#error</span></code> directives. This can be switched off by defining <code class="docutils literal notranslate"><span class="pre">JSON_SKIP_UNSUPPORTED_COMPILER_CHECK</span></code>. Note that you can expect no support in this case.</p></li>
</ul>
<p>The following compilers are currently used in continuous integration at <a class="reference external" href="https://travis-ci.org/nlohmann/json">Travis</a>, <a class="reference external" href="https://ci.appveyor.com/project/nlohmann/json">AppVeyor</a>, <a class="reference external" href="https://cloud.drone.io/nlohmann/json">Drone CI</a>, and <a class="reference external" href="https://github.com/nlohmann/json/actions">GitHub Actions</a>:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Compiler</th>
<th>Operating System</th>
<th>CI Provider</th>
</tr>
</thead>
<tbody>
<tr>
<td>Apple Clang 10.0.1 (clang-1001.0.46.4); Xcode 10.2.1</td>
<td>macOS 10.14.4</td>
<td>Travis</td>
</tr>
<tr>
<td>Apple Clang 10.0.1 (clang-1001.0.46.4); Xcode 10.3</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 11.0.0 (clang-1100.0.33.12); Xcode 11.2.1</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 11.0.0 (clang-1100.0.33.17); Xcode 11.3.1</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 11.0.3 (clang-1103.0.32.59); Xcode 11.4.1</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 11.0.3 (clang-1103.0.32.62); Xcode 11.5</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 11.0.3 (clang-1103.0.32.62); Xcode 11.6</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 11.0.3 (clang-1103.0.32.62); Xcode 11.7</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 12.0.0 (clang-1200.0.32.2); Xcode 12</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 12.0.0 (clang-1200.0.32.21); Xcode 12.1</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 12.0.0 (clang-1200.0.32.21); Xcode 12.1.1</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 12.0.0 (clang-1200.0.32.27); Xcode 12.2</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 12.0.0 (clang-1200.0.32.28); Xcode 12.3</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Apple Clang 12.0.0 (clang-1200.0.32.29); Xcode 12.4</td>
<td>macOS 10.15.7</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 4.8.5 (Ubuntu 4.8.5-4ubuntu2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 4.9.3 (Ubuntu 4.9.3-13ubuntu2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 5.4.0 (Ubuntu 5.4.0-6ubuntu1~16.04.12)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 6.4.0 (Ubuntu 6.4.0-17ubuntu1)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 6.5.0 (Ubuntu 6.5.0-2ubuntu1~14.04.1)</td>
<td>Ubuntu 14.04.5 LTS</td>
<td>Travis</td>
</tr>
<tr>
<td>GCC 7.5.0 (Ubuntu 7.5.0-6ubuntu2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 8.1.0 (x86_64-posix-seh-rev0, Built by MinGW-W64 project)</td>
<td>Windows-10.0.17763</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 8.1.0 (i686-posix-dwarf-rev0, Built by MinGW-W64 project)</td>
<td>Windows-10.0.17763</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 8.4.0 (Ubuntu 8.4.0-3ubuntu2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 10.2.0 (Ubuntu 10.2.0-5ubuntu1~20.04)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 11.0.1 20210321 (experimental)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>GCC 11.1.0</td>
<td>Ubuntu (aarch64)</td>
<td>Drone CI</td>
</tr>
<tr>
<td>Clang 3.5.2 (3.5.2-3ubuntu1)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 3.6.2 (3.6.2-3ubuntu2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 3.7.1 (3.7.1-2ubuntu2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 3.8.0 (3.8.0-2ubuntu4)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 3.9.1 (3.9.1-4ubuntu3\~16.04.2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 4.0.0 (4.0.0-1ubuntu1\~16.04.2)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 5.0.0 (5.0.0-3\~16.04.1)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 6.0.1 (6.0.1-14)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 7.0.1 (7.0.1-12)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 8.0.1 (8.0.1-9)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 9.0.1 (9.0.1-12)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 10.0.0 (10.0.0-4ubuntu1)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 10.0.0 with GNU-like command-line</td>
<td>Windows-10.0.17763</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 11.0.0 with GNU-like command-line</td>
<td>Windows-10.0.17763</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 11.0.0 with MSVC-like command-line</td>
<td>Windows-10.0.17763</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 11.0.0 (11.0.0-2~ubuntu20.04.1)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 12.0.0 (12.0.0-3ubuntu1~20.04.3)</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 13.0.1 (13.0.1-++20211015123032+cf15ccdeb6d5-1~exp1~20211015003613.5</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Clang 14.0.0 (14.0.0-++20211015062452+81e9c90686f7-1~exp1~20211015063048.20</td>
<td>Ubuntu 20.04.3 LTS</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Visual Studio 14 2015 MSVC 19.0.24241.7 (Build Engine version 14.0.25420.1)</td>
<td>Windows-6.3.9600</td>
<td>AppVeyor</td>
</tr>
<tr>
<td>Visual Studio 15 2017 MSVC 19.16.27035.0 (Build Engine version 15.9.21+g9802d43bc3 for .NET Framework)</td>
<td>Windows-10.0.14393</td>
<td>AppVeyor</td>
</tr>
<tr>
<td>Visual Studio 15 2017 MSVC 19.16.27045.0 (Build Engine version 15.9.21+g9802d43bc3 for .NET Framework)</td>
<td>Windows-10.0.14393</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Visual Studio 16 2019 MSVC 19.28.29912.0 (Build Engine version 16.9.0+57a23d249 for .NET Framework)</td>
<td>Windows-10.0.17763</td>
<td>GitHub Actions</td>
</tr>
<tr>
<td>Visual Studio 16 2019 MSVC 19.28.29912.0 (Build Engine version 16.9.0+57a23d249 for .NET Framework)</td>
<td>Windows-10.0.17763</td>
<td>AppVeyor</td>
</tr>
</tbody>
</table></div>
<div class="section" id="integration">
<h1>Integration<a class="headerlink" href="#integration" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/nlohmann/json/blob/develop/single_include/nlohmann/json.hpp"><code class="docutils literal notranslate"><span class="pre">json.hpp</span></code></a> is the single required file in <code class="docutils literal notranslate"><span class="pre">single_include/nlohmann</span></code> or <a class="reference external" href="https://github.com/nlohmann/json/releases">released here</a>. You need to add</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;nlohmann/json.hpp&gt;</span><span class="cp"></span>

<span class="c1">// for convenience</span>
<span class="k">using</span> <span class="n">json</span> <span class="o">=</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="p">;</span>
</pre></div>
</div>
<p>to the files you want to process JSON and set the necessary switches to enable C++11 (e.g., <code class="docutils literal notranslate"><span class="pre">-std=c++11</span></code> for GCC and Clang).</p>
<p>You can further use file <a class="reference external" href="https://github.com/nlohmann/json/blob/develop/include/nlohmann/json_fwd.hpp"><code class="docutils literal notranslate"><span class="pre">include/nlohmann/json_fwd.hpp</span></code></a> for forward-declarations. The installation of json_fwd.hpp (as part of cmake’s install step), can be achieved by setting <code class="docutils literal notranslate"><span class="pre">-DJSON_MultipleHeaders=ON</span></code>.</p>
<div class="section" id="cmake">
<h2>CMake<a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h2>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">nlohmann_json::nlohmann_json</span></code> interface target in CMake.  This target populates the appropriate usage requirements for <code class="docutils literal notranslate"><span class="pre">INTERFACE_INCLUDE_DIRECTORIES</span></code> to point to the appropriate include directories and <code class="docutils literal notranslate"><span class="pre">INTERFACE_COMPILE_FEATURES</span></code> for the necessary C++11 flags.</p>
<div class="section" id="external">
<h3>External<a class="headerlink" href="#external" title="Permalink to this headline">¶</a></h3>
<p>To use this library from a CMake project, you can locate it directly with <code class="docutils literal notranslate"><span class="pre">find_package()</span></code> and use the namespaced imported target from the generated package configuration:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span># CMakeLists.txt
find_package(nlohmann_json 3.2.0 REQUIRED)
...
add_library(foo ...)
...
target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)
</pre></div>
</div>
<p>The package configuration file, <code class="docutils literal notranslate"><span class="pre">nlohmann_jsonConfig.cmake</span></code>, can be used either from an install tree or directly out of the build tree.</p>
</div>
<div class="section" id="embedded">
<h3>Embedded<a class="headerlink" href="#embedded" title="Permalink to this headline">¶</a></h3>
<p>To embed the library directly into an existing CMake project, place the entire source tree in a subdirectory and call <code class="docutils literal notranslate"><span class="pre">add_subdirectory()</span></code> in your <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span># Typically you don&#39;t care so much for a third party library&#39;s tests to be
# run from your own project&#39;s code.
set(JSON_BuildTests OFF CACHE INTERNAL &quot;&quot;)

# If you only include this third party in PRIVATE source files, you do not
# need to install it when your main project gets installed.
# set(JSON_Install OFF CACHE INTERNAL &quot;&quot;)

# Don&#39;t use include(nlohmann_json/CMakeLists.txt) since that carries with it
# unintended consequences that will break the build.  It&#39;s generally
# discouraged (although not necessarily well documented as such) to use
# include(...) for pulling in other CMake projects anyways.
add_subdirectory(nlohmann_json)
...
add_library(foo ...)
...
target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)
</pre></div>
</div>
<div class="section" id="embedded-fetchcontent">
<h4>Embedded (FetchContent)<a class="headerlink" href="#embedded-fetchcontent" title="Permalink to this headline">¶</a></h4>
<p>Since CMake v3.11,
<a class="reference external" href="https://cmake.org/cmake/help/v3.11/module/FetchContent.html">FetchContent</a> can
be used to automatically download the repository as a dependency at configure time.</p>
<p>Example:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>

<span class="nb">FetchContent_Declare</span><span class="p">(</span><span class="s">json</span>
  <span class="s">GIT_REPOSITORY</span> <span class="s">https://github.com/nlohmann/json.git</span>
  <span class="s">GIT_TAG</span> <span class="s">v3.7.3</span><span class="p">)</span>

<span class="nb">FetchContent_GetProperties</span><span class="p">(</span><span class="s">json</span><span class="p">)</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">json_POPULATED</span><span class="p">)</span>
  <span class="nb">FetchContent_Populate</span><span class="p">(</span><span class="s">json</span><span class="p">)</span>
  <span class="nb">add_subdirectory</span><span class="p">(</span><span class="o">${</span><span class="nv">json_SOURCE_DIR</span><span class="o">}</span> <span class="o">${</span><span class="nv">json_BINARY_DIR</span><span class="o">}</span> <span class="s">EXCLUDE_FROM_ALL</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">foo</span> <span class="s">PRIVATE</span> <span class="s">nlohmann_json::nlohmann_json</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Note</strong>: The repository https://github.com/nlohmann/json download size is huge.
It contains all the dataset used for the benchmarks. You might want to depend on
a smaller repository. For instance, you might want to replace the URL above by
https://github.com/ArthurSonzogni/nlohmann_json_cmake_fetchcontent</p>
</div>
</div>
<div class="section" id="supporting-both">
<h3>Supporting Both<a class="headerlink" href="#supporting-both" title="Permalink to this headline">¶</a></h3>
<p>To allow your project to support either an externally supplied or an embedded JSON library, you can use a pattern akin to the following:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span># Top level CMakeLists.txt
project(FOO)
...
option(FOO_USE_EXTERNAL_JSON &quot;Use an external JSON library&quot; OFF)
...
add_subdirectory(thirdparty)
...
add_library(foo ...)
...
# Note that the namespaced target will always be available regardless of the
# import method
target_link_libraries(foo PRIVATE nlohmann_json::nlohmann_json)
</pre></div>
</div>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span># thirdparty/CMakeLists.txt
...
if(FOO_USE_EXTERNAL_JSON)
  find_package(nlohmann_json 3.2.0 REQUIRED)
else()
  set(JSON_BuildTests OFF CACHE INTERNAL &quot;&quot;)
  add_subdirectory(nlohmann_json)
endif()
...
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">thirdparty/nlohmann_json</span></code> is then a complete copy of this source tree.</p>
</div>
</div>
<div class="section" id="package-managers">
<h2>Package Managers<a class="headerlink" href="#package-managers" title="Permalink to this headline">¶</a></h2>
<p>:beer: If you are using OS X and <a class="reference external" href="https://brew.sh">Homebrew</a>, just type <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">nlohmann-json</span></code> and you’re set. If you want the bleeding edge rather than the latest release, use <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">nlohmann-json</span> <span class="pre">--HEAD</span></code>. See <a class="reference external" href="https://formulae.brew.sh/formula/nlohmann-json">nlohmann-json</a> for more information.</p>
<p>If you are using the <a class="reference external" href="https://mesonbuild.com">Meson Build System</a>, add this source tree as a <a class="reference external" href="https://mesonbuild.com/Subprojects.html#using-a-subproject">meson subproject</a>. You may also use the <code class="docutils literal notranslate"><span class="pre">include.zip</span></code> published in this project’s <a class="reference external" href="https://github.com/nlohmann/json/releases">Releases</a> to reduce the size of the vendored source tree. Alternatively, you can get a wrap file by downloading it from <a class="reference external" href="https://wrapdb.mesonbuild.com/nlohmann_json">Meson WrapDB</a>, or simply use <code class="docutils literal notranslate"><span class="pre">meson</span> <span class="pre">wrap</span> <span class="pre">install</span> <span class="pre">nlohmann_json</span></code>. Please see the meson project for any issues regarding the packaging.</p>
<p>The provided meson.build can also be used as an alternative to cmake for installing <code class="docutils literal notranslate"><span class="pre">nlohmann_json</span></code> system-wide in which case a pkg-config file is installed. To use it, simply have your build system require the <code class="docutils literal notranslate"><span class="pre">nlohmann_json</span></code> pkg-config dependency. In Meson, it is preferred to use the <a class="reference external" href="https://mesonbuild.com/Reference-manual.html#dependency"><code class="docutils literal notranslate"><span class="pre">dependency()</span></code></a> object with a subproject fallback, rather than using the subproject directly.</p>
<p>If you are using <a class="reference external" href="https://www.conan.io/">Conan</a> to manage your dependencies, merely add <a class="reference external" href="https://conan.io/center/nlohmann_json"><code class="docutils literal notranslate"><span class="pre">nlohmann_json/x.y.z</span></code></a> to your <code class="docutils literal notranslate"><span class="pre">conanfile</span></code>’s requires, where <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code> is the release version you want to use. Please file issues <a class="reference external" href="https://github.com/conan-io/conan-center-index/issues">here</a> if you experience problems with the packages.</p>
<p>If you are using <a class="reference external" href="https://www.spack.io/">Spack</a> to manage your dependencies, you can use the <a class="reference external" href="https://spack.readthedocs.io/en/latest/package_list.html#nlohmann-json"><code class="docutils literal notranslate"><span class="pre">nlohmann-json</span></code> package</a>. Please see the <a class="reference external" href="https://github.com/spack/spack">spack project</a> for any issues regarding the packaging.</p>
<p>If you are using <a class="reference external" href="https://github.com/cpp-pm/hunter">hunter</a> on your project for external dependencies, then you can use the <a class="reference external" href="https://hunter.readthedocs.io/en/latest/packages/pkg/nlohmann_json.html">nlohmann_json package</a>. Please see the hunter project for any issues regarding the packaging.</p>
<p>If you are using <a class="reference external" href="https://buckaroo.pm">Buckaroo</a>, you can install this library’s module with <code class="docutils literal notranslate"><span class="pre">buckaroo</span> <span class="pre">add</span> <span class="pre">github.com/buckaroo-pm/nlohmann-json</span></code>. Please file issues <a class="reference external" href="https://github.com/buckaroo-pm/nlohmann-json">here</a>. There is a demo repo <a class="reference external" href="https://github.com/njlr/buckaroo-nholmann-json-example">here</a>.</p>
<p>If you are using <a class="reference external" href="https://github.com/Microsoft/vcpkg/">vcpkg</a> on your project for external dependencies, then you can install the <a class="reference external" href="https://github.com/Microsoft/vcpkg/tree/master/ports/nlohmann-json">nlohmann-json package</a> with <code class="docutils literal notranslate"><span class="pre">vcpkg</span> <span class="pre">install</span> <span class="pre">nlohmann-json</span></code> and follow the then displayed descriptions. Please see the vcpkg project for any issues regarding the packaging.</p>
<p>If you are using <a class="reference external" href="https://cget.readthedocs.io/en/latest/">cget</a>, you can install the latest development version with <code class="docutils literal notranslate"><span class="pre">cget</span> <span class="pre">install</span> <span class="pre">nlohmann/json</span></code>. A specific version can be installed with <code class="docutils literal notranslate"><span class="pre">cget</span> <span class="pre">install</span> <span class="pre">nlohmann/json&#64;v3.1.0</span></code>. Also, the multiple header version can be installed by adding the <code class="docutils literal notranslate"><span class="pre">-DJSON_MultipleHeaders=ON</span></code> flag (i.e., <code class="docutils literal notranslate"><span class="pre">cget</span> <span class="pre">install</span> <span class="pre">nlohmann/json</span> <span class="pre">-DJSON_MultipleHeaders=ON</span></code>).</p>
<p>If you are using <a class="reference external" href="https://cocoapods.org">CocoaPods</a>, you can use the library by adding pod <code class="docutils literal notranslate"><span class="pre">&quot;nlohmann_json&quot;,</span> <span class="pre">'~&gt;3.1.2'</span></code> to your podfile (see <a class="reference external" href="https://bitbucket.org/benman/nlohmann_json-cocoapod/src/master/">an example</a>). Please file issues <a class="reference external" href="https://bitbucket.org/benman/nlohmann_json-cocoapod/issues?status=new&amp;status=open">here</a>.</p>
<p>If you are using <a class="reference external" href="https://www.nuget.org">NuGet</a>, you can use the package <a class="reference external" href="https://www.nuget.org/packages/nlohmann.json/">nlohmann.json</a>. Please check <a class="reference external" href="https://github.com/nlohmann/json/issues/1132#issuecomment-452250255">this extensive description</a> on how to use the package. Please files issues <a class="reference external" href="https://github.com/hnkb/nlohmann-json-nuget/issues">here</a>.</p>
<p>If you are using <a class="reference external" href="https://conda.io/">conda</a>, you can use the package <a class="reference external" href="https://github.com/conda-forge/nlohmann_json-feedstock">nlohmann_json</a> from <a class="reference external" href="https://conda-forge.org">conda-forge</a> executing <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">nlohmann_json</span></code>. Please file issues <a class="reference external" href="https://github.com/conda-forge/nlohmann_json-feedstock/issues">here</a>.</p>
<p>If you are using <a class="reference external" href="https://www.msys2.org/">MSYS2</a>, you can use the <a class="reference external" href="https://packages.msys2.org/base/mingw-w64-nlohmann-json">mingw-w64-nlohmann-json</a> package, just type <code class="docutils literal notranslate"><span class="pre">pacman</span> <span class="pre">-S</span> <span class="pre">mingw-w64-i686-nlohmann-json</span></code> or <code class="docutils literal notranslate"><span class="pre">pacman</span> <span class="pre">-S</span> <span class="pre">mingw-w64-x86_64-nlohmann-json</span></code> for installation. Please file issues <a class="reference external" href="https://github.com/msys2/MINGW-packages/issues/new?title=%5Bnlohmann-json%5D">here</a> if you experience problems with the packages.</p>
<p>If you are using <a class="reference external" href="https://ports.macports.org">MacPorts</a>, execute <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">port</span> <span class="pre">install</span> <span class="pre">nlohmann-json</span></code> to install the <a class="reference external" href="https://ports.macports.org/port/nlohmann-json/">nlohmann-json</a> package.</p>
<p>If you are using <a class="reference external" href="https://build2.org"><code class="docutils literal notranslate"><span class="pre">build2</span></code></a>, you can use the <a class="reference external" href="https://cppget.org/nlohmann-json"><code class="docutils literal notranslate"><span class="pre">nlohmann-json</span></code></a> package from the public repository https://cppget.org or directly from the <a class="reference external" href="https://github.com/build2-packaging/nlohmann-json">package’s sources repository</a>. In your project’s <code class="docutils literal notranslate"><span class="pre">manifest</span></code> file, just add <code class="docutils literal notranslate"><span class="pre">depends:</span> <span class="pre">nlohmann-json</span></code> (probably with some <a class="reference external" href="https://build2.org/build2-toolchain/doc/build2-toolchain-intro.xhtml#guide-add-remove-deps">version constraints</a>). If you are not familiar with using dependencies in <code class="docutils literal notranslate"><span class="pre">build2</span></code>, <a class="reference external" href="https://build2.org/build2-toolchain/doc/build2-toolchain-intro.xhtml">please read this introduction</a>.
Please file issues <a class="reference external" href="https://github.com/build2-packaging/nlohmann-json">here</a> if you experience problems with the packages.</p>
<p>If you are using <a class="reference external" href="https://wsjcpp.org"><code class="docutils literal notranslate"><span class="pre">wsjcpp</span></code></a>, you can use the command <code class="docutils literal notranslate"><span class="pre">wsjcpp</span> <span class="pre">install</span> <span class="pre">&quot;https://github.com/nlohmann/json:develop&quot;</span></code> to get the latest version. Note you can change the branch “:develop” to an existing tag or another branch.</p>
<p>If you are using <a class="reference external" href="https://github.com/TheLartians/CPM.cmake"><code class="docutils literal notranslate"><span class="pre">CPM.cmake</span></code></a>, you can check this <a class="reference external" href="https://github.com/TheLartians/CPM.cmake/tree/master/examples/json"><code class="docutils literal notranslate"><span class="pre">example</span></code></a>. After <a class="reference external" href="https://github.com/TheLartians/CPM.cmake#adding-cpm">adding CPM script</a> to your project, implement the following snippet to your CMake:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">CPMAddPackage</span><span class="p">(</span>
    <span class="s">NAME</span> <span class="s">nlohmann_json</span>
    <span class="s">GITHUB_REPOSITORY</span> <span class="s">nlohmann/json</span>
    <span class="s">VERSION</span> <span class="s">3.9.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pkg-config">
<h2>Pkg-config<a class="headerlink" href="#pkg-config" title="Permalink to this headline">¶</a></h2>
<p>If you are using bare Makefiles, you can use <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code> to generate the include flags that point to where the library is installed:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pkg-config nlohmann_json --cflags
</pre></div>
</div>
<p>Users of the Meson build system will also be able to use a system wide library, which will be found by <code class="docutils literal notranslate"><span class="pre">pkg-config</span></code>:</p>
<div class="highlight-meson notranslate"><div class="highlight"><pre><span></span>json = dependency(&#39;nlohmann_json&#39;, required: true)
</pre></div>
</div>
</div>
</div>
<div class="section" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h1>
<img align="right" src="https://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png"><p>The class is licensed under the <a class="reference external" href="https://opensource.org/licenses/MIT">MIT License</a>:</p>
<p>Copyright © 2013-2021 <a class="reference external" href="https://nlohmann.me">Niels Lohmann</a></p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<hr class="docutils" />
<p>The class contains the UTF-8 Decoder from Bjoern Hoehrmann which is licensed under the <a class="reference external" href="https://opensource.org/licenses/MIT">MIT License</a> (see above). Copyright © 2008-2009 <a class="reference external" href="https://bjoern.hoehrmann.de/">Björn Hoehrmann</a> <a class="reference external" href="mailto:bjoern&#37;&#52;&#48;hoehrmann&#46;de">bjoern<span>&#64;</span>hoehrmann<span>&#46;</span>de</a></p>
<p>The class contains a slightly modified version of the Grisu2 algorithm from Florian Loitsch which is licensed under the <a class="reference external" href="https://opensource.org/licenses/MIT">MIT License</a> (see above). Copyright © 2009 <a class="reference external" href="https://florian.loitsch.com/">Florian Loitsch</a></p>
<p>The class contains a copy of <a class="reference external" href="https://nemequ.github.io/hedley/">Hedley</a> from Evan Nemerson which is licensed as <a class="reference external" href="https://creativecommons.org/publicdomain/zero/1.0/">CC0-1.0</a>.</p>
<p>The class contains parts of <a class="reference external" href="https://github.com/abseil/abseil-cpp">Google Abseil</a> which is licensed under the <a class="reference external" href="https://opensource.org/licenses/Apache-2.0">Apache 2.0 License</a>.</p>
</div>
<div class="section" id="contact">
<h1>Contact<a class="headerlink" href="#contact" title="Permalink to this headline">¶</a></h1>
<p>If you have questions regarding the library, I would like to invite you to <a class="reference external" href="https://github.com/nlohmann/json/issues/new/choose">open an issue at GitHub</a>. Please describe your request, problem, or question as detailed as possible, and also mention the version of the library you are using as well as the version of your compiler and operating system. Opening an issue at GitHub allows other users and contributors to this library to collaborate. For instance, I have little experience with MSVC, and most issues in this regard have been solved by a growing community. If you have a look at the <a class="reference external" href="https://github.com/nlohmann/json/issues?q=is%3Aissue+is%3Aclosed">closed issues</a>, you will see that we react quite timely in most cases.</p>
<p>Only if your request would contain confidential information, please <a class="reference external" href="mailto:mail&#37;&#52;&#48;nlohmann&#46;me">send me an email</a>. For encrypted messages, please use <a class="reference external" href="https://keybase.io/nlohmann/pgp_keys.asc">this key</a>.</p>
</div>
<div class="section" id="security">
<h1>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/nlohmann/json/commits">Commits by Niels Lohmann</a> and <a class="reference external" href="https://github.com/nlohmann/json/releases">releases</a> are signed with this <a class="reference external" href="https://keybase.io/nlohmann/pgp_keys.asc?fingerprint=797167ae41c0a6d9232e48457f3cea63ae251b69">PGP Key</a>.</p>
</div>
<div class="section" id="thanks">
<h1>Thanks<a class="headerlink" href="#thanks" title="Permalink to this headline">¶</a></h1>
<p>I deeply appreciate the help of the following people.</p>
<img src="https://raw.githubusercontent.com/nlohmann/json/develop/doc/avatars.png" align="right"><ul class="simple">
<li><p><a class="reference external" href="https://github.com/Teemperor">Teemperor</a> implemented CMake support and lcov integration, realized escape and Unicode handling in the string parser, and fixed the JSON serialization.</p></li>
<li><p><a class="reference external" href="https://github.com/elliotgoodrich">elliotgoodrich</a> fixed an issue with double deletion in the iterator classes.</p></li>
<li><p><a class="reference external" href="https://github.com/kirkshoop">kirkshoop</a> made the iterators of the class composable to other libraries.</p></li>
<li><p><a class="reference external" href="https://github.com/wanwc">wancw</a> fixed a bug that hindered the class to compile with Clang.</p></li>
<li><p>Tomas Åblad found a bug in the iterator implementation.</p></li>
<li><p><a class="reference external" href="https://github.com/jrandall">Joshua C. Randall</a> fixed a bug in the floating-point serialization.</p></li>
<li><p><a class="reference external" href="https://github.com/aburgh">Aaron Burghardt</a> implemented code to parse streams incrementally. Furthermore, he greatly improved the parser class by allowing the definition of a filter function to discard undesired elements while parsing.</p></li>
<li><p><a class="reference external" href="https://github.com/dkopecek">Daniel Kopeček</a> fixed a bug in the compilation with GCC 5.0.</p></li>
<li><p><a class="reference external" href="https://github.com/Florianjw">Florian Weber</a> fixed a bug in and improved the performance of the comparison operators.</p></li>
<li><p><a class="reference external" href="https://github.com/EricMCornelius">Eric Cornelius</a> pointed out a bug in the handling with NaN and infinity values. He also improved the performance of the string escaping.</p></li>
<li><p><a class="reference external" href="https://github.com/likebeta">易思龙</a> implemented a conversion from anonymous enums.</p></li>
<li><p><a class="reference external" href="https://github.com/kepkin">kepkin</a> patiently pushed forward the support for Microsoft Visual studio.</p></li>
<li><p><a class="reference external" href="https://github.com/gregmarr">gregmarr</a> simplified the implementation of reverse iterators and helped with numerous hints and improvements. In particular, he pushed forward the implementation of user-defined types.</p></li>
<li><p><a class="reference external" href="https://github.com/caiovlp">Caio Luppi</a> fixed a bug in the Unicode handling.</p></li>
<li><p><a class="reference external" href="https://github.com/dariomt">dariomt</a> fixed some typos in the examples.</p></li>
<li><p><a class="reference external" href="https://github.com/d-frey">Daniel Frey</a> cleaned up some pointers and implemented exception-safe memory allocation.</p></li>
<li><p><a class="reference external" href="https://github.com/ColinH">Colin Hirsch</a> took care of a small namespace issue.</p></li>
<li><p><a class="reference external" href="https://github.com/whoshuu">Huu Nguyen</a> correct a variable name in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/silverweed">Silverweed</a> overloaded <code class="docutils literal notranslate"><span class="pre">parse()</span></code> to accept an rvalue reference.</p></li>
<li><p><a class="reference external" href="https://github.com/dariomt">dariomt</a> fixed a subtlety in MSVC type support and implemented the <code class="docutils literal notranslate"><span class="pre">get_ref()</span></code> function to get a reference to stored values.</p></li>
<li><p><a class="reference external" href="https://github.com/ZahlGraf">ZahlGraf</a> added a workaround that allows compilation using Android NDK.</p></li>
<li><p><a class="reference external" href="https://github.com/whackashoe">whackashoe</a> replaced a function that was marked as unsafe by Visual Studio.</p></li>
<li><p><a class="reference external" href="https://github.com/406345">406345</a> fixed two small warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/glenfe">Glen Fernandes</a> noted a potential portability problem in the <code class="docutils literal notranslate"><span class="pre">has_mapped_type</span></code> function.</p></li>
<li><p><a class="reference external" href="https://github.com/nibroc">Corbin Hughes</a> fixed some typos in the contribution guidelines.</p></li>
<li><p><a class="reference external" href="https://github.com/twelsby">twelsby</a> fixed the array subscript operator, an issue that failed the MSVC build, and floating-point parsing/dumping. He further added support for unsigned integer numbers and implemented better roundtrip support for parsed numbers.</p></li>
<li><p><a class="reference external" href="https://github.com/vog">Volker Diels-Grabsch</a> fixed a link in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/msm-">msm-</a> added support for American Fuzzy Lop.</p></li>
<li><p><a class="reference external" href="https://github.com/Annihil">Annihil</a> fixed an example in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/Themercee">Themercee</a> noted a wrong URL in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/lv-zheng">Lv Zheng</a> fixed a namespace issue with <code class="docutils literal notranslate"><span class="pre">int64_t</span></code> and <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/abc100m">abc100m</a> analyzed the issues with GCC 4.8 and proposed a <a class="reference external" href="https://github.com/nlohmann/json/pull/212">partial solution</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/zewt">zewt</a> added useful notes to the README file about Android.</p></li>
<li><p><a class="reference external" href="https://github.com/robertmrk">Róbert Márki</a> added a fix to use move iterators and improved the integration via CMake.</p></li>
<li><p><a class="reference external" href="https://github.com/ChrisKitching">Chris Kitching</a> cleaned up the CMake files.</p></li>
<li><p><a class="reference external" href="https://github.com/06needhamt">Tom Needham</a> fixed a subtle bug with MSVC 2015 which was also proposed by <a class="reference external" href="https://github.com/Epidal">Michael K.</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/thelostt">Mário Feroldi</a> fixed a small typo.</p></li>
<li><p><a class="reference external" href="https://github.com/duncanwerner">duncanwerner</a> found a really embarrassing performance regression in the 2.0.0 release.</p></li>
<li><p><a class="reference external" href="https://github.com/dtoma">Damien</a> fixed one of the last conversion warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/t-b">Thomas Braun</a> fixed a warning in a test case and adjusted MSVC calls in the CI.</p></li>
<li><p><a class="reference external" href="https://github.com/theodelrieu">Théo DELRIEU</a> patiently and constructively oversaw the long way toward <a class="reference external" href="https://github.com/nlohmann/json/issues/290">iterator-range parsing</a>. He also implemented the magic behind the serialization/deserialization of user-defined types and split the single header file into smaller chunks.</p></li>
<li><p><a class="reference external" href="https://github.com/5tefan">Stefan</a> fixed a minor issue in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/vasild">Vasil Dimov</a> fixed the documentation regarding conversions from <code class="docutils literal notranslate"><span class="pre">std::multiset</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/ChristophJud">ChristophJud</a> overworked the CMake files to ease project inclusion.</p></li>
<li><p><a class="reference external" href="https://github.com/vpetrigo">Vladimir Petrigo</a> made a SFINAE hack more readable and added Visual Studio 17 to the build matrix.</p></li>
<li><p><a class="reference external" href="https://github.com/seeekr">Denis Andrejew</a> fixed a grammar issue in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/palacaze">Pierre-Antoine Lacaze</a> found a subtle bug in the <code class="docutils literal notranslate"><span class="pre">dump()</span></code> function.</p></li>
<li><p><a class="reference external" href="https://github.com/TurpentineDistillery">TurpentineDistillery</a> pointed to <a class="reference external" href="https://en.cppreference.com/w/cpp/locale/locale/classic"><code class="docutils literal notranslate"><span class="pre">std::locale::classic()</span></code></a> to avoid too much locale joggling, found some nice performance improvements in the parser, improved the benchmarking code, and realized locale-independent number parsing and printing.</p></li>
<li><p><a class="reference external" href="https://github.com/cgzones">cgzones</a> had an idea how to fix the Coverity scan.</p></li>
<li><p><a class="reference external" href="https://github.com/jaredgrubb">Jared Grubb</a> silenced a nasty documentation warning.</p></li>
<li><p><a class="reference external" href="https://github.com/qwename">Yixin Zhang</a> fixed an integer overflow check.</p></li>
<li><p><a class="reference external" href="https://github.com/Bosswestfalen">Bosswestfalen</a> merged two iterator classes into a smaller one.</p></li>
<li><p><a class="reference external" href="https://github.com/Daniel599">Daniel599</a> helped to get Travis execute the tests with Clang’s sanitizers.</p></li>
<li><p><a class="reference external" href="https://github.com/vjon">Jonathan Lee</a> fixed an example in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/gnzlbg">gnzlbg</a> supported the implementation of user-defined types.</p></li>
<li><p><a class="reference external" href="https://github.com/qis">Alexej Harm</a> helped to get the user-defined types working with Visual Studio.</p></li>
<li><p><a class="reference external" href="https://github.com/jaredgrubb">Jared Grubb</a> supported the implementation of user-defined types.</p></li>
<li><p><a class="reference external" href="https://github.com/EnricoBilla">EnricoBilla</a> noted a typo in an example.</p></li>
<li><p><a class="reference external" href="https://github.com/horenmar">Martin Hořeňovský</a> found a way for a 2x speedup for the compilation time of the test suite.</p></li>
<li><p><a class="reference external" href="https://github.com/ukhegg">ukhegg</a> found proposed an improvement for the examples section.</p></li>
<li><p><a class="reference external" href="https://github.com/rswanson-ihi">rswanson-ihi</a> noted a typo in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/stanmihai4">Mihai Stan</a> fixed a bug in the comparison with <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>s.</p></li>
<li><p><a class="reference external" href="https://github.com/tusharpm">Tushar Maheshwari</a> added <a class="reference external" href="https://github.com/sakra/cotire">cotire</a> support to speed up the compilation.</p></li>
<li><p><a class="reference external" href="https://github.com/TedLyngmo">TedLyngmo</a> noted a typo in the README, removed unnecessary bit arithmetic, and fixed some <code class="docutils literal notranslate"><span class="pre">-Weffc++</span></code> warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/krzysztofwos">Krzysztof Woś</a> made exceptions more visible.</p></li>
<li><p><a class="reference external" href="https://github.com/ftillier">ftillier</a> fixed a compiler warning.</p></li>
<li><p><a class="reference external" href="https://github.com/tinloaf">tinloaf</a> made sure all pushed warnings are properly popped.</p></li>
<li><p><a class="reference external" href="https://github.com/Fytch">Fytch</a> found a bug in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/Type1J">Jay Sistar</a> implemented a Meson build description.</p></li>
<li><p><a class="reference external" href="https://github.com/HenryRLee">Henry Lee</a> fixed a warning in ICC and improved the iterator implementation.</p></li>
<li><p><a class="reference external" href="https://github.com/vthiery">Vincent Thiery</a> maintains a package for the Conan package manager.</p></li>
<li><p><a class="reference external" href="https://github.com/koemeet">Steffen</a> fixed a potential issue with MSVC and <code class="docutils literal notranslate"><span class="pre">std::min</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/Chocobo1">Mike Tzou</a> fixed some typos.</p></li>
<li><p><a class="reference external" href="https://github.com/amrcode">amrcode</a> noted a misleading documentation about comparison of floats.</p></li>
<li><p><a class="reference external" href="https://github.com/olegendo">Oleg Endo</a> reduced the memory consumption by replacing <code class="docutils literal notranslate"><span class="pre">&lt;iostream&gt;</span></code> with <code class="docutils literal notranslate"><span class="pre">&lt;iosfwd&gt;</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/dan-42">dan-42</a> cleaned up the CMake files to simplify including/reusing of the library.</p></li>
<li><p><a class="reference external" href="https://github.com/himikof">Nikita Ofitserov</a> allowed for moving values from initializer lists.</p></li>
<li><p><a class="reference external" href="https://github.com/wincent">Greg Hurrell</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/DmitryKuk">Dmitry Kukovinets</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/kbthomp1">kbthomp1</a> fixed an issue related to the Intel OSX compiler.</p></li>
<li><p><a class="reference external" href="https://github.com/daixtrose">Markus Werle</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/WebProdPP">WebProdPP</a> fixed a subtle error in a precondition check.</p></li>
<li><p><a class="reference external" href="https://github.com/leha-bot">Alex</a> noted an error in a code sample.</p></li>
<li><p><a class="reference external" href="https://github.com/tdegeus">Tom de Geus</a> reported some warnings with ICC and helped fixing them.</p></li>
<li><p><a class="reference external" href="https://github.com/pjkundert">Perry Kundert</a> simplified reading from input streams.</p></li>
<li><p><a class="reference external" href="https://github.com/sonulohani">Sonu Lohani</a> fixed a small compilation error.</p></li>
<li><p><a class="reference external" href="https://github.com/jseward">Jamie Seward</a> fixed all MSVC warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/eld00d">Nate Vargas</a> added a Doxygen tag file.</p></li>
<li><p><a class="reference external" href="https://github.com/pvleuven">pvleuven</a> helped fixing a warning in ICC.</p></li>
<li><p><a class="reference external" href="https://github.com/crea7or">Pavel</a> helped fixing some warnings in MSVC.</p></li>
<li><p><a class="reference external" href="https://github.com/jseward">Jamie Seward</a> avoided unnecessary string copies in <code class="docutils literal notranslate"><span class="pre">find()</span></code> and <code class="docutils literal notranslate"><span class="pre">count()</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/Itja">Mitja</a> fixed some typos.</p></li>
<li><p><a class="reference external" href="https://github.com/jowr">Jorrit Wronski</a> updated the Hunter package links.</p></li>
<li><p><a class="reference external" href="https://github.com/TinyTinni">Matthias Möller</a> added a <code class="docutils literal notranslate"><span class="pre">.natvis</span></code> for the MSVC debug view.</p></li>
<li><p><a class="reference external" href="https://github.com/bogemic">bogemic</a> fixed some C++17 deprecation warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/erengy">Eren Okka</a> fixed some MSVC warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/abolz">abolz</a> integrated the Grisu2 algorithm for proper floating-point formatting, allowing more roundtrip checks to succeed.</p></li>
<li><p><a class="reference external" href="https://github.com/Pipeliner">Vadim Evard</a> fixed a Markdown issue in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/zerodefect">zerodefect</a> fixed a compiler warning.</p></li>
<li><p><a class="reference external" href="https://github.com/kaidokert">Kert</a> allowed to template the string type in the serialization and added the possibility to override the exceptional behavior.</p></li>
<li><p><a class="reference external" href="https://github.com/mark-99">mark-99</a> helped fixing an ICC error.</p></li>
<li><p><a class="reference external" href="https://github.com/patrikhuber">Patrik Huber</a> fixed links in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/johnfb">johnfb</a> found a bug in the implementation of CBOR’s indefinite length strings.</p></li>
<li><p><a class="reference external" href="https://github.com/pfultz2">Paul Fultz II</a> added a note on the cget package manager.</p></li>
<li><p><a class="reference external" href="https://github.com/wla80">Wilson Lin</a> made the integration section of the README more concise.</p></li>
<li><p><a class="reference external" href="https://github.com/ralfbielig">RalfBielig</a> detected and fixed a memory leak in the parser callback.</p></li>
<li><p><a class="reference external" href="https://github.com/agrianius">agrianius</a> allowed to dump JSON to an alternative string type.</p></li>
<li><p><a class="reference external" href="https://github.com/ktonon">Kevin Tonon</a> overworked the C++11 compiler checks in CMake.</p></li>
<li><p><a class="reference external" href="https://github.com/ax3l">Axel Huebl</a> simplified a CMake check and added support for the <a class="reference external" href="https://spack.io">Spack package manager</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/coryan">Carlos O’Ryan</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/jammehcow">James Upjohn</a> fixed a version number in the compilers section.</p></li>
<li><p><a class="reference external" href="https://github.com/chuckatkins">Chuck Atkins</a> adjusted the CMake files to the CMake packaging guidelines and provided documentation for the CMake integration.</p></li>
<li><p><a class="reference external" href="https://github.com/dns13">Jan Schöppach</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/martin-mfg">martin-mfg</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/TinyTinni">Matthias Möller</a> removed the dependency from <code class="docutils literal notranslate"><span class="pre">std::stringstream</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/agrianius">agrianius</a> added code to use alternative string implementations.</p></li>
<li><p><a class="reference external" href="https://github.com/Daniel599">Daniel599</a> allowed to use more algorithms with the <code class="docutils literal notranslate"><span class="pre">items()</span></code> function.</p></li>
<li><p><a class="reference external" href="https://github.com/jrakow">Julius Rakow</a> fixed the Meson include directory and fixed the links to <a class="reference external" href="cppreference.com">cppreference.com</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/sonulohani">Sonu Lohani</a> fixed the compilation with MSVC 2015 in debug mode.</p></li>
<li><p><a class="reference external" href="https://github.com/grembo">grembo</a> fixed the test suite and re-enabled several test cases.</p></li>
<li><p><a class="reference external" href="https://github.com/simnalamburt">Hyeon Kim</a> introduced the macro <code class="docutils literal notranslate"><span class="pre">JSON_INTERNAL_CATCH</span></code> to control the exception handling inside the library.</p></li>
<li><p><a class="reference external" href="https://github.com/thyu">thyu</a> fixed a compiler warning.</p></li>
<li><p><a class="reference external" href="https://github.com/LEgregius">David Guthrie</a> fixed a subtle compilation error with Clang 3.4.2.</p></li>
<li><p><a class="reference external" href="https://github.com/dennisfischer">Dennis Fischer</a> allowed to call <code class="docutils literal notranslate"><span class="pre">find_package</span></code> without installing the library.</p></li>
<li><p><a class="reference external" href="https://github.com/simnalamburt">Hyeon Kim</a> fixed an issue with a double macro definition.</p></li>
<li><p><a class="reference external" href="https://github.com/rivertam">Ben Berman</a> made some error messages more understandable.</p></li>
<li><p><a class="reference external" href="https://github.com/zakalibit">zakalibit</a> fixed a compilation problem with the Intel C++ compiler.</p></li>
<li><p><a class="reference external" href="https://github.com/mandreyel">mandreyel</a> fixed a compilation problem.</p></li>
<li><p><a class="reference external" href="https://github.com/koponomarenko">Kostiantyn Ponomarenko</a> added version and license information to the Meson build file.</p></li>
<li><p><a class="reference external" href="https://github.com/henryiii">Henry Schreiner</a> added support for GCC 4.8.</p></li>
<li><p><a class="reference external" href="https://github.com/knilch0r">knilch</a> made sure the test suite does not stall when run in the wrong directory.</p></li>
<li><p><a class="reference external" href="https://github.com/antonioborondo">Antonio Borondo</a> fixed an MSVC 2017 warning.</p></li>
<li><p><a class="reference external" href="https://github.com/dgendreau">Dan Gendreau</a> implemented the <code class="docutils literal notranslate"><span class="pre">NLOHMANN_JSON_SERIALIZE_ENUM</span></code> macro to quickly define a enum/JSON mapping.</p></li>
<li><p><a class="reference external" href="https://github.com/efp">efp</a> added line and column information to parse errors.</p></li>
<li><p><a class="reference external" href="https://github.com/julian-becker">julian-becker</a> added BSON support.</p></li>
<li><p><a class="reference external" href="https://github.com/pratikpc">Pratik Chowdhury</a> added support for structured bindings.</p></li>
<li><p><a class="reference external" href="https://github.com/davedissian">David Avedissian</a> added support for Clang 5.0.1 (PS4 version).</p></li>
<li><p><a class="reference external" href="https://github.com/dumarjo">Jonathan Dumaresq</a> implemented an input adapter to read from <code class="docutils literal notranslate"><span class="pre">FILE*</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/kjpus">kjpus</a> fixed a link in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/manu-chroma">Manvendra Singh</a> fixed a typo in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/ziggurat29">ziggurat29</a> fixed an MSVC warning.</p></li>
<li><p><a class="reference external" href="https://github.com/SylvainCorlay">Sylvain Corlay</a> added code to avoid an issue with MSVC.</p></li>
<li><p><a class="reference external" href="https://github.com/mefyl">mefyl</a> fixed a bug when JSON was parsed from an input stream.</p></li>
<li><p><a class="reference external" href="https://github.com/mpoquet">Millian Poquet</a> allowed to install the library via Meson.</p></li>
<li><p><a class="reference external" href="https://github.com/moodboom">Michael Behrns-Miller</a> found an issue with a missing namespace.</p></li>
<li><p><a class="reference external" href="https://github.com/naszta">Nasztanovics Ferenc</a> fixed a compilation issue with libc 2.12.</p></li>
<li><p><a class="reference external" href="https://github.com/andreas-schwab">Andreas Schwab</a> fixed the endian conversion.</p></li>
<li><p><a class="reference external" href="https://github.com/Mark-Dunning">Mark-Dunning</a> fixed a warning in MSVC.</p></li>
<li><p><a class="reference external" href="https://github.com/garethsb-sony">Gareth Sylvester-Bradley</a> added <code class="docutils literal notranslate"><span class="pre">operator/</span></code> for JSON Pointers.</p></li>
<li><p><a class="reference external" href="https://github.com/johnmarkwayve">John-Mark</a> noted a missing header.</p></li>
<li><p><a class="reference external" href="https://github.com/xvitaly">Vitaly Zaitsev</a> fixed compilation with GCC 9.0.</p></li>
<li><p><a class="reference external" href="https://github.com/stac47">Laurent Stacul</a> fixed compilation with GCC 9.0.</p></li>
<li><p><a class="reference external" href="https://github.com/iwanders">Ivor Wanders</a> helped reducing the CMake requirement to version 3.1.</p></li>
<li><p><a class="reference external" href="https://github.com/njlr">njlr</a> updated the Buckaroo instructions.</p></li>
<li><p><a class="reference external" href="https://github.com/lieff">Lion</a> fixed a compilation issue with GCC 7 on CentOS.</p></li>
<li><p><a class="reference external" href="https://github.com/nickaein">Isaac Nickaein</a> improved the integer serialization performance and  implemented the <code class="docutils literal notranslate"><span class="pre">contains()</span></code> function.</p></li>
<li><p><a class="reference external" href="https://github.com/past-due">past-due</a> suppressed an unfixable warning.</p></li>
<li><p><a class="reference external" href="https://github.com/elvisoric">Elvis Oric</a> improved Meson support.</p></li>
<li><p><a class="reference external" href="https://github.com/Afforix">Matěj Plch</a> fixed an example in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/wythe">Mark Beckwith</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/scinart">scinart</a> fixed bug in the serializer.</p></li>
<li><p><a class="reference external" href="https://github.com/pboettch">Patrick Boettcher</a> implemented <code class="docutils literal notranslate"><span class="pre">push_back()</span></code> and <code class="docutils literal notranslate"><span class="pre">pop_back()</span></code> for JSON Pointers.</p></li>
<li><p><a class="reference external" href="https://github.com/nicoddemus">Bruno Oliveira</a> added support for Conda.</p></li>
<li><p><a class="reference external" href="https://github.com/skypjack">Michele Caini</a> fixed links in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/hnkb">Hani</a> documented how to install the library with NuGet.</p></li>
<li><p><a class="reference external" href="https://github.com/wythe">Mark Beckwith</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/yann-morin-1998">yann-morin-1998</a> helped reducing the CMake requirement to version 3.1.</p></li>
<li><p><a class="reference external" href="https://github.com/podsvirov">Konstantin Podsvirov</a> maintains a package for the MSYS2 software distro.</p></li>
<li><p><a class="reference external" href="https://github.com/remyabel">remyabel</a> added GNUInstallDirs to the CMake files.</p></li>
<li><p><a class="reference external" href="https://github.com/taylorhoward92">Taylor Howard</a> fixed a unit test.</p></li>
<li><p><a class="reference external" href="https://github.com/Macr0Nerd">Gabe Ron</a> implemented the <code class="docutils literal notranslate"><span class="pre">to_string</span></code> method.</p></li>
<li><p><a class="reference external" href="https://github.com/heavywatal">Watal M. Iwasaki</a> fixed a Clang warning.</p></li>
<li><p><a class="reference external" href="https://github.com/onqtam">Viktor Kirilov</a> switched the unit tests from <a class="reference external" href="https://github.com/philsquared/Catch">Catch</a> to <a class="reference external" href="https://github.com/onqtam/doctest">doctest</a></p></li>
<li><p><a class="reference external" href="https://github.com/ejcjason">Juncheng E</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/tete17">tete17</a> fixed a bug in the <code class="docutils literal notranslate"><span class="pre">contains</span></code> function.</p></li>
<li><p><a class="reference external" href="https://github.com/Xav83">Xav83</a> fixed some cppcheck warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/0xflotus">0xflotus</a> fixed some typos.</p></li>
<li><p><a class="reference external" href="https://github.com/chris0x44">Christian Deneke</a> added a const version of <code class="docutils literal notranslate"><span class="pre">json_pointer::back</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/crazyjul">Julien Hamaide</a> made the <code class="docutils literal notranslate"><span class="pre">items()</span></code> function work with custom string types.</p></li>
<li><p><a class="reference external" href="https://github.com/nemequ">Evan Nemerson</a> updated fixed a bug in Hedley and updated this library accordingly.</p></li>
<li><p><a class="reference external" href="https://github.com/flopp">Florian Pigorsch</a> fixed a lot of typos.</p></li>
<li><p><a class="reference external" href="https://github.com/cbegue">Camille Bégué</a> fixed an issue in the conversion from  <code class="docutils literal notranslate"><span class="pre">std::pair</span></code> and <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code> to <code class="docutils literal notranslate"><span class="pre">json</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/AnthonyVH">Anthony VH</a> fixed a compile error in an enum deserialization.</p></li>
<li><p><a class="reference external" href="https://github.com/ua-code-dragon">Yuriy Vountesmery</a> noted a subtle bug in a preprocessor check.</p></li>
<li><p><a class="reference external" href="https://github.com/dota17">Chen</a> fixed numerous issues in the library.</p></li>
<li><p><a class="reference external" href="https://github.com/aokellermann">Antony Kellermann</a> added a CI step for GCC 10.1.</p></li>
<li><p><a class="reference external" href="https://github.com/gistrec">Alex</a> fixed an MSVC warning.</p></li>
<li><p><a class="reference external" href="https://github.com/rvjr">Rainer</a> proposed an improvement in the floating-point serialization in CBOR.</p></li>
<li><p><a class="reference external" href="https://github.com/FrancoisChabot">Francois Chabot</a> made performance improvements in the input adapters.</p></li>
<li><p><a class="reference external" href="https://github.com/ArthurSonzogni">Arthur Sonzogni</a> documented how the library can be included via <code class="docutils literal notranslate"><span class="pre">FetchContent</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/rmisev">Rimas Misevičius</a> fixed an error message.</p></li>
<li><p><a class="reference external" href="https://github.com/alexandermyasnikov">Alexander Myasnikov</a> fixed some examples and a link in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/uhoreg">Hubert Chathi</a> made CMake’s version config file architecture-independent.</p></li>
<li><p><a class="reference external" href="https://github.com/OmnipotentEntity">OmnipotentEntity</a> implemented the binary values for CBOR, MessagePack, BSON, and UBJSON.</p></li>
<li><p><a class="reference external" href="https://github.com/ArtemSarmini">ArtemSarmini</a> fixed a compilation issue with GCC 10 and fixed a leak.</p></li>
<li><p><a class="reference external" href="https://github.com/sea-kg">Evgenii Sopov</a> integrated the library to the wsjcpp package manager.</p></li>
<li><p><a class="reference external" href="https://github.com/linev">Sergey Linev</a> fixed a compiler warning.</p></li>
<li><p><a class="reference external" href="https://github.com/magamig">Miguel Magalhães</a> fixed the year in the copyright.</p></li>
<li><p><a class="reference external" href="https://github.com/garethsb-sony">Gareth Sylvester-Bradley</a> fixed a compilation issue with MSVC.</p></li>
<li><p><a class="reference external" href="https://github.com/alex-weej">Alexander “weej” Jones</a> fixed an example in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/Coeur">Antoine Cœur</a> fixed some typos in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/jothepro">jothepro</a> updated links to the Hunter package.</p></li>
<li><p><a class="reference external" href="https://github.com/kastiglione">Dave Lee</a> fixed link in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/Klaim">Joël Lamotte</a> added instruction for using Build2’s package manager.</p></li>
<li><p><a class="reference external" href="https://github.com/pauljurczak">Paul Jurczak</a> fixed an example in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/sonulohani">Sonu Lohani</a> fixed a warning.</p></li>
<li><p><a class="reference external" href="https://github.com/gocarlos">Carlos Gomes Martinho</a> updated the Conan package source.</p></li>
<li><p><a class="reference external" href="https://github.com/podsvirov">Konstantin Podsvirov</a> fixed the MSYS2 package documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/Tridacnid">Tridacnid</a> improved the CMake tests.</p></li>
<li><p><a class="reference external" href="https://github.com/MBalszun">Michael</a> fixed MSVC warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/quentin-dev">Quentin Barbarat</a> fixed an example in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/XyFreak">XyFreak</a> fixed a compiler warning.</p></li>
<li><p><a class="reference external" href="https://github.com/TotalCaesar659">TotalCaesar659</a> fixed links in the README.</p></li>
<li><p><a class="reference external" href="https://github.com/tanuj208">Tanuj Garg</a> improved the fuzzer coverage for UBSAN input.</p></li>
<li><p><a class="reference external" href="https://github.com/AODQ">AODQ</a> fixed a compiler warning.</p></li>
<li><p><a class="reference external" href="https://github.com/jwittbrodt">jwittbrodt</a> made <code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</span></code> inline.</p></li>
<li><p><a class="reference external" href="https://github.com/pfeatherstone">pfeatherstone</a> improved the upper bound of arguments of the <code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</span></code>/<code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_INTRUSIVE</span></code> macros.</p></li>
<li><p><a class="reference external" href="https://github.com/jprochazk">Jan Procházka</a> fixed a bug in the CBOR parser for binary and string values.</p></li>
<li><p><a class="reference external" href="https://github.com/T0b1-iOS">T0b1-iOS</a> fixed a bug in the new hash implementation.</p></li>
<li><p><a class="reference external" href="https://github.com/matthewbauer">Matthew Bauer</a> adjusted the CBOR writer to create tags for binary subtypes.</p></li>
<li><p><a class="reference external" href="https://github.com/gatopeich">gatopeich</a> implemented an ordered map container for <code class="docutils literal notranslate"><span class="pre">nlohmann::ordered_json</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/ericonr">Érico Nogueira Rolim</a> added support for pkg-config.</p></li>
<li><p><a class="reference external" href="https://github.com/KonanM">KonanM</a> proposed an implementation for the <code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_NON_INTRUSIVE</span></code>/<code class="docutils literal notranslate"><span class="pre">NLOHMANN_DEFINE_TYPE_INTRUSIVE</span></code> macros.</p></li>
<li><p><a class="reference external" href="https://github.com/gracicot">Guillaume Racicot</a> implemented <code class="docutils literal notranslate"><span class="pre">string_view</span></code> support and allowed C++20 support.</p></li>
<li><p><a class="reference external" href="https://github.com/alexreinking">Alex Reinking</a> improved CMake support for <code class="docutils literal notranslate"><span class="pre">FetchContent</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/ssbssa">Hannes Domani</a> provided a GDB pretty printer.</p></li>
<li><p>Lars Wirzenius reviewed the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/ongjunjie">Jun Jie</a> fixed a compiler path in the CMake scripts.</p></li>
<li><p><a class="reference external" href="https://github.com/rbuch">Ronak Buch</a> fixed typos in the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/karzhenkov">Alexander Karzhenkov</a> fixed a move constructor and the Travis builds.</p></li>
<li><p><a class="reference external" href="https://github.com/leozz37">Leonardo Lima</a> added CPM.Cmake support.</p></li>
<li><p><a class="reference external" href="https://github.com/jbzdarkid">Joseph Blackman</a> fixed a warning.</p></li>
<li><p><a class="reference external" href="https://github.com/YarikTH">Yaroslav</a> updated doctest and implemented unit tests.</p></li>
<li><p><a class="reference external" href="https://github.com/globberwops">Martin Stump</a> fixed a bug in the CMake files.</p></li>
<li><p><a class="reference external" href="https://github.com/jasujm">Jaakko Moisio</a> fixed a bug in the input adapters.</p></li>
<li><p><a class="reference external" href="https://github.com/bl-ue">bl-ue</a> fixed some Markdown issues in the README file.</p></li>
<li><p><a class="reference external" href="https://github.com/wawiesel">William A. Wieselquist</a> fixed an example from the README.</p></li>
<li><p><a class="reference external" href="https://github.com/abbaswasim">abbaswasim</a> fixed an example from the README.</p></li>
<li><p><a class="reference external" href="https://github.com/remyjette">Remy Jette</a> fixed a warning.</p></li>
<li><p><a class="reference external" href="https://github.com/frasermarlow">Fraser</a> fixed the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/musicinmybrain">Ben Beasley</a> updated doctest.</p></li>
<li><p><a class="reference external" href="https://github.com/doronbehar">Doron Behar</a> fixed pkg-config.pc.</p></li>
<li><p><a class="reference external" href="https://github.com/raduteo">raduteo</a> fixed a warning.</p></li>
<li><p><a class="reference external" href="https://github.com/theShmoo">David Pfahler</a> added the possibility to compile the library without I/O support.</p></li>
<li><p><a class="reference external" href="https://github.com/mortenfyhn">Morten Fyhn Amundsen</a> fixed a typo.</p></li>
<li><p><a class="reference external" href="https://github.com/jpl-mac">jpl-mac</a> allowed to treat the library as a system header in CMake.</p></li>
<li><p><a class="reference external" href="https://github.com/jasmcaus">Jason Dsouza</a> fixed the indentation of the CMake file.</p></li>
<li><p><a class="reference external" href="https://github.com/offa">offa</a> added a link to Conan Center to the documentation.</p></li>
<li><p><a class="reference external" href="https://github.com/TotalCaesar659">TotalCaesar659</a> updated the links in the documentation to use HTTPS.</p></li>
<li><p><a class="reference external" href="https://github.com/grafail">Rafail Giavrimis</a> fixed the Google Benchmark default branch.</p></li>
<li><p><a class="reference external" href="https://github.com/ldionne">Louis Dionne</a> fixed a conversion operator.</p></li>
<li><p><a class="reference external" href="https://github.com/justanotheranonymoususer">justanotheranonymoususer</a> made the examples in the README more consistent.</p></li>
<li><p><a class="reference external" href="https://github.com/Finkman">Finkman</a> suppressed some <code class="docutils literal notranslate"><span class="pre">-Wfloat-equal</span></code> warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/fhuberts">Ferry Huberts</a> fixed <code class="docutils literal notranslate"><span class="pre">-Wswitch-enum</span></code> warnings.</p></li>
<li><p><a class="reference external" href="https://github.com/senyai">Arseniy Terekhin</a> made the GDB pretty-printer robust against unset variable names.</p></li>
<li><p><a class="reference external" href="https://github.com/amirmasoudabdol">Amir Masoud Abdol</a> updated the Homebrew command as nlohmann/json is now in homebrew-core.</p></li>
<li><p><a class="reference external" href="https://github.com/Hallot">Hallot</a> fixed some <code class="docutils literal notranslate"><span class="pre">-Wextra-semi-stmt</span> <span class="pre">warnings</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/gcerretani">Giovanni Cerretani</a> fixed <code class="docutils literal notranslate"><span class="pre">-Wunused</span></code> warnings on <code class="docutils literal notranslate"><span class="pre">JSON_DIAGNOSTICS</span></code>.</p></li>
<li><p><a class="reference external" href="https://github.com/Kapeli">Bogdan Popescu</a> hosts the <a class="reference external" href="https://github.com/Kapeli/Dash-User-Contributions/tree/master/docsets/JSON_for_Modern_C%2B%2B">docset</a> for offline documentation viewers.</p></li>
<li><p><a class="reference external" href="https://github.com/carlsmedstad">Carl Smedstad</a> fixed an assertion error when using <code class="docutils literal notranslate"><span class="pre">JSON_DIAGNOSTICS</span></code>.</p></li>
</ul>
<p>Thanks a lot for helping out! Please <a class="reference external" href="mailto:mail&#37;&#52;&#48;nlohmann&#46;me">let me know</a> if I forgot someone.</p>
</div>
<div class="section" id="used-third-party-tools">
<h1>Used third-party tools<a class="headerlink" href="#used-third-party-tools" title="Permalink to this headline">¶</a></h1>
<p>The library itself consists of a single header file licensed under the MIT license. However, it is built, tested, documented, and whatnot using a lot of third-party tools and services. Thanks a lot!</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/edlund/amalgamate"><strong>amalgamate.py - Amalgamate C source and header files</strong></a> to create a single header file</p></li>
<li><p><a class="reference external" href="https://lcamtuf.coredump.cx/afl/"><strong>American fuzzy lop</strong></a> for fuzz testing</p></li>
<li><p><a class="reference external" href="https://www.appveyor.com"><strong>AppVeyor</strong></a> for <a class="reference external" href="https://ci.appveyor.com/project/nlohmann/json">continuous integration</a> on Windows</p></li>
<li><p><a class="reference external" href="http://astyle.sourceforge.net"><strong>Artistic Style</strong></a> for automatic source code indentation</p></li>
<li><p><a class="reference external" href="https://clang.llvm.org"><strong>Clang</strong></a> for compilation with code sanitizers</p></li>
<li><p><a class="reference external" href="https://cmake.org"><strong>CMake</strong></a> for build automation</p></li>
<li><p><a class="reference external" href="https://www.codacy.com"><strong>Codacity</strong></a> for further <a class="reference external" href="https://www.codacy.com/app/nlohmann/json">code analysis</a></p></li>
<li><p><a class="reference external" href="https://coveralls.io"><strong>Coveralls</strong></a> to measure <a class="reference external" href="https://coveralls.io/github/nlohmann/json">code coverage</a></p></li>
<li><p><a class="reference external" href="https://scan.coverity.com"><strong>Coverity Scan</strong></a> for <a class="reference external" href="https://scan.coverity.com/projects/nlohmann-json">static analysis</a></p></li>
<li><p><a class="reference external" href="http://cppcheck.sourceforge.net"><strong>cppcheck</strong></a> for static analysis</p></li>
<li><p><a class="reference external" href="https://github.com/onqtam/doctest"><strong>doctest</strong></a> for the unit tests</p></li>
<li><p><a class="reference external" href="https://www.doxygen.nl/index.html"><strong>Doxygen</strong></a> to generate <a class="reference external" href="https://nlohmann.github.io/json/doxygen/index.html">documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/rstacruz/git-update-ghpages"><strong>git-update-ghpages</strong></a> to upload the documentation to gh-pages</p></li>
<li><p><a class="reference external" href="https://github.com/skywinder/github-changelog-generator"><strong>GitHub Changelog Generator</strong></a> to generate the <a class="reference external" href="https://github.com/nlohmann/json/blob/develop/ChangeLog.md">ChangeLog</a></p></li>
<li><p><a class="reference external" href="https://github.com/google/benchmark"><strong>Google Benchmark</strong></a> to implement the benchmarks</p></li>
<li><p><a class="reference external" href="https://nemequ.github.io/hedley/"><strong>Hedley</strong></a> to avoid re-inventing several compiler-agnostic feature macros</p></li>
<li><p><a class="reference external" href="http://ltp.sourceforge.net/coverage/lcov.php"><strong>lcov</strong></a> to process coverage information and create a HTML view</p></li>
<li><p><a class="reference external" href="https://llvm.org/docs/LibFuzzer.html"><strong>libFuzzer</strong></a> to implement fuzz testing for OSS-Fuzz</p></li>
<li><p><a class="reference external" href="https://github.com/google/oss-fuzz"><strong>OSS-Fuzz</strong></a> for continuous fuzz testing of the library (<a class="reference external" href="https://github.com/google/oss-fuzz/tree/master/projects/json">project repository</a>)</p></li>
<li><p><a class="reference external" href="https://probot.github.io"><strong>Probot</strong></a> for automating maintainer tasks such as closing stale issues, requesting missing information, or detecting toxic comments.</p></li>
<li><p><a class="reference external" href="https://github.com/nlohmann/json/blob/develop/doc/scripts/send_to_wandbox.py"><strong>send_to_wandbox</strong></a> to send code examples to <a class="reference external" href="https://wandbox.org">Wandbox</a></p></li>
<li><p><a class="reference external" href="https://travis-ci.org"><strong>Travis</strong></a> for <a class="reference external" href="https://travis-ci.org/nlohmann/json">continuous integration</a> on Linux and macOS</p></li>
<li><p><a class="reference external" href="https://valgrind.org"><strong>Valgrind</strong></a> to check for correct memory management</p></li>
<li><p><a class="reference external" href="https://wandbox.org"><strong>Wandbox</strong></a> for <a class="reference external" href="https://wandbox.org/permlink/1mp10JbaANo6FUc7">online examples</a></p></li>
</ul>
</div>
<div class="section" id="projects-using-json-for-modern-c">
<h1>Projects using JSON for Modern C++<a class="headerlink" href="#projects-using-json-for-modern-c" title="Permalink to this headline">¶</a></h1>
<p>The library is currently used in Apple macOS Sierra and iOS 10. I am not sure what they are using the library for, but I am happy that it runs on so many devices.</p>
</div>
<div class="section" id="notes">
<h1>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="character-encoding">
<h2>Character encoding<a class="headerlink" href="#character-encoding" title="Permalink to this headline">¶</a></h2>
<p>The library supports <strong>Unicode input</strong> as follows:</p>
<ul class="simple">
<li><p>Only <strong>UTF-8</strong> encoded input is supported which is the default encoding for JSON according to <a class="reference external" href="https://tools.ietf.org/html/rfc8259.html#section-8.1">RFC 8259</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::u16string</span></code> and <code class="docutils literal notranslate"><span class="pre">std::u32string</span></code> can be parsed, assuming UTF-16 and UTF-32 encoding, respectively. These encodings are not supported when reading from files or other input containers.</p></li>
<li><p>Other encodings such as Latin-1 or ISO 8859-1 are <strong>not</strong> supported and will yield parse or serialization errors.</p></li>
<li><p><a class="reference external" href="https://www.unicode.org/faq/private_use.html#nonchar1">Unicode noncharacters</a> will not be replaced by the library.</p></li>
<li><p>Invalid surrogates (e.g., incomplete pairs such as <code class="docutils literal notranslate"><span class="pre">\uDEAD</span></code>) will yield parse errors.</p></li>
<li><p>The strings stored in the library are UTF-8 encoded. When using the default string type (<code class="docutils literal notranslate"><span class="pre">std::string</span></code>), note that its length/size functions return the number of stored bytes rather than the number of characters or glyphs.</p></li>
<li><p>When you store strings with different encodings in the library, calling <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/dump/"><code class="docutils literal notranslate"><span class="pre">dump()</span></code></a> may throw an exception unless <code class="docutils literal notranslate"><span class="pre">json::error_handler_t::replace</span></code> or <code class="docutils literal notranslate"><span class="pre">json::error_handler_t::ignore</span></code> are used as error handlers.</p></li>
<li><p>To store wide strings (e.g., <code class="docutils literal notranslate"><span class="pre">std::wstring</span></code>), you need to convert them to a a UTF-8 encoded <code class="docutils literal notranslate"><span class="pre">std::string</span></code> before, see <a class="reference external" href="https://json.nlohmann.me/home/faq/#wide-string-handling">an example</a>.</p></li>
</ul>
</div>
<div class="section" id="comments-in-json">
<h2>Comments in JSON<a class="headerlink" href="#comments-in-json" title="Permalink to this headline">¶</a></h2>
<p>This library does not support comments by default. It does so for three reasons:</p>
<ol>
<li><p>Comments are not part of the <a class="reference external" href="https://tools.ietf.org/html/rfc8259">JSON specification</a>. You may argue that <code class="docutils literal notranslate"><span class="pre">//</span></code> or <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> are allowed in JavaScript, but JSON is not JavaScript.</p></li>
<li><p>This was not an oversight: Douglas Crockford <a class="reference external" href="https://plus.google.com/118095276221607585885/posts/RK8qyGVaGSr">wrote on this</a> in May 2012:</p>
<blockquote>
<div><p>I removed comments from JSON because I saw people were using them to hold parsing directives, a practice which would have destroyed interoperability.  I know that the lack of comments makes some people sad, but it shouldn’t.</p>
</div></blockquote>
<blockquote>
<div><p>Suppose you are using JSON to keep configuration files, which you would like to annotate. Go ahead and insert all the comments you like. Then pipe it through JSMin before handing it to your JSON parser.</p>
</div></blockquote>
</li>
<li><p>It is dangerous for interoperability if some libraries would add comment support while others don’t. Please check <a class="reference external" href="https://tools.ietf.org/html/draft-iab-protocol-maintenance-01">The Harmful Consequences of the Robustness Principle</a> on this.</p></li>
</ol>
<p>However, you can pass set parameter <code class="docutils literal notranslate"><span class="pre">ignore_comments</span></code> to true in the <code class="docutils literal notranslate"><span class="pre">parse</span></code> function to ignore <code class="docutils literal notranslate"><span class="pre">//</span></code> or <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> comments. Comments will then be treated as whitespace.</p>
</div>
<div class="section" id="order-of-object-keys">
<h2>Order of object keys<a class="headerlink" href="#order-of-object-keys" title="Permalink to this headline">¶</a></h2>
<p>By default, the library does not preserve the <strong>insertion order of object elements</strong>. This is standards-compliant, as the <a class="reference external" href="https://tools.ietf.org/html/rfc8259.html">JSON standard</a> defines objects as “an unordered collection of zero or more name/value pairs”.</p>
<p>If you do want to preserve the insertion order, you can try the type <a class="reference external" href="https://github.com/nlohmann/json/issues/2179"><code class="docutils literal notranslate"><span class="pre">nlohmann::ordered_json</span></code></a>. Alternatively, you can use a more sophisticated ordered map like <a class="reference external" href="https://github.com/Tessil/ordered-map"><code class="docutils literal notranslate"><span class="pre">tsl::ordered_map</span></code></a> (<a class="reference external" href="https://github.com/nlohmann/json/issues/546#issuecomment-304447518">integration</a>) or <a class="reference external" href="https://github.com/nlohmann/fifo_map"><code class="docutils literal notranslate"><span class="pre">nlohmann::fifo_map</span></code></a> (<a class="reference external" href="https://github.com/nlohmann/json/issues/485#issuecomment-333652309">integration</a>).</p>
</div>
<div class="section" id="memory-release">
<h2>Memory Release<a class="headerlink" href="#memory-release" title="Permalink to this headline">¶</a></h2>
<p>We checked with Valgrind and the Address Sanitizer (ASAN) that there are no memory leaks.</p>
<p>If you find that a parsing program with this library does not release memory, please consider the following case and it maybe unrelated to this library.</p>
<p><strong>Your program is compiled with glibc.</strong> There is a tunable threshold that glibc uses to decide whether to actually return memory to the system or whether to cache it for later reuse. If in your program you make lots of small allocations and those small allocations are not a contiguous block and are presumably below the threshold, then they will not get returned to the OS.
Here is a related issue <a class="reference external" href="https://github.com/nlohmann/json/issues/1924">#1924</a>.</p>
</div>
<div class="section" id="further-notes">
<h2>Further notes<a class="headerlink" href="#further-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The code contains numerous debug <strong>assertions</strong> which can be switched off by defining the preprocessor macro <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code>, see the <a class="reference external" href="https://en.cppreference.com/w/cpp/error/assert">documentation of <code class="docutils literal notranslate"><span class="pre">assert</span></code></a>. In particular, note <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/operator%5B%5D/"><code class="docutils literal notranslate"><span class="pre">operator[]</span></code></a> implements <strong>unchecked access</strong> for const objects: If the given key is not present, the behavior is undefined (think of a dereferenced null pointer) and yields an <a class="reference external" href="https://github.com/nlohmann/json/issues/289">assertion failure</a> if assertions are switched on. If you are not sure whether an element in an object exists, use checked access with the <a class="reference external" href="https://nlohmann.github.io/json/api/basic_json/at/"><code class="docutils literal notranslate"><span class="pre">at()</span></code> function</a>. Furthermore, you can define <code class="docutils literal notranslate"><span class="pre">JSON_ASSERT(x)</span></code> to replace calls to <code class="docutils literal notranslate"><span class="pre">assert(x)</span></code>.</p></li>
<li><p>As the exact type of a number is not defined in the <a class="reference external" href="https://tools.ietf.org/html/rfc8259.html">JSON specification</a>, this library tries to choose the best fitting C++ number type automatically. As a result, the type <code class="docutils literal notranslate"><span class="pre">double</span></code> may be used to store numbers which may yield <a class="reference external" href="https://github.com/nlohmann/json/issues/181"><strong>floating-point exceptions</strong></a> in certain rare situations if floating-point exceptions have been unmasked in the calling code. These exceptions are not caused by the library and need to be fixed in the calling code, such as by re-masking the exceptions prior to calling library functions.</p></li>
<li><p>The code can be compiled without C++ <strong>runtime type identification</strong> features; that is, you can use the <code class="docutils literal notranslate"><span class="pre">-fno-rtti</span></code> compiler flag.</p></li>
<li><p><strong>Exceptions</strong> are used widely within the library. They can, however, be switched off with either using the compiler flag <code class="docutils literal notranslate"><span class="pre">-fno-exceptions</span></code> or by defining the symbol <code class="docutils literal notranslate"><span class="pre">JSON_NOEXCEPTION</span></code>. In this case, exceptions are replaced by <code class="docutils literal notranslate"><span class="pre">abort()</span></code> calls. You can further control this behavior by defining <code class="docutils literal notranslate"><span class="pre">JSON_THROW_USER</span></code> (overriding <code class="docutils literal notranslate"><span class="pre">throw</span></code>), <code class="docutils literal notranslate"><span class="pre">JSON_TRY_USER</span></code> (overriding <code class="docutils literal notranslate"><span class="pre">try</span></code>), and <code class="docutils literal notranslate"><span class="pre">JSON_CATCH_USER</span></code> (overriding <code class="docutils literal notranslate"><span class="pre">catch</span></code>). Note that <code class="docutils literal notranslate"><span class="pre">JSON_THROW_USER</span></code> should leave the current scope (e.g., by throwing or aborting), as continuing after it may yield undefined behavior. Note the explanatory <a class="reference external" href="https://en.cppreference.com/w/cpp/error/exception/what"><code class="docutils literal notranslate"><span class="pre">what()</span></code></a> string of exceptions is not available for MSVC if exceptions are disabled, see <a class="reference external" href="https://github.com/nlohmann/json/discussions/2824">#2824</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="execute-unit-tests">
<h1>Execute unit tests<a class="headerlink" href="#execute-unit-tests" title="Permalink to this headline">¶</a></h1>
<p>To compile and run the tests, you need to execute</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ mkdir build
$ <span class="nb">cd</span> build
$ cmake .. -DJSON_BuildTests<span class="o">=</span>On
$ cmake --build .
$ ctest --output-on-failure
</pre></div>
</div>
<p>Note that during the <code class="docutils literal notranslate"><span class="pre">ctest</span></code> stage, several JSON test files are downloaded from an <a class="reference external" href="https://github.com/nlohmann/json_test_data">external repository</a>. If policies forbid downloading artifacts during testing, you can download the files yourself and pass the directory with the test files via <code class="docutils literal notranslate"><span class="pre">-DJSON_TestDataDirectory=path</span></code> to CMake. Then, no Internet connectivity is required. See <a class="reference external" href="https://github.com/nlohmann/json/issues/2189">issue #2189</a> for more information.</p>
<p>In case you have downloaded the library rather than checked out the code via Git, test <code class="docutils literal notranslate"><span class="pre">cmake_fetch_content_configure</span></code> will fail. Please execute <code class="docutils literal notranslate"><span class="pre">ctest</span> <span class="pre">-LE</span> <span class="pre">git_required</span></code> to skip these tests. See <a class="reference external" href="https://github.com/nlohmann/json/issues/2189">issue #2189</a> for more information.</p>
<p>Some tests change the installed files and hence make the whole process not reproducible. Please execute <code class="docutils literal notranslate"><span class="pre">ctest</span> <span class="pre">-LE</span> <span class="pre">not_reproducible</span></code> to skip these tests. See <a class="reference external" href="https://github.com/nlohmann/json/issues/2324">issue #2324</a> for more information.</p>
<p>Note you need to call <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-LE</span> <span class="pre">&quot;not_reproducible|git_required&quot;</span></code> to exclude both labels. See <a class="reference external" href="https://github.com/nlohmann/json/issues/2596">issue #2596</a> for more information.</p>
<p>As Intel compilers use unsafe floating point optimization by default, the unit tests may fail. Use flag <a class="reference external" href="https://software.intel.com/content/www/us/en/develop/documentation/cpp-compiler-developer-guide-and-reference/top/compiler-reference/compiler-options/compiler-option-details/floating-point-options/fp-model-fp.html"><code class="docutils literal notranslate"><span class="pre">/fp:precise</span></code></a> then.</p>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright bladedisc-dev@list.alibaba-inc.com.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.
        </div>
    </div>  

</body>
</html>