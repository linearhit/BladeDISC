

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; BladeDISC 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../../_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../../search.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../../../../../../../../index.html">
                BladeDISC
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../../../../../../../../index.html">Docs</a></li>
        
      <li>Overview</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../../../../../../../../_sources/tao/third_party/json/doc/mkdocs/docs/features/types/index.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../../../../../../../../search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../README_.html">BladeDISC Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#api-quickview">API QuickView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#for-pytorch-users">For PyTorch Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#setup-and-examples">Setup and Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#publications">Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#tutorials-and-documents-for-developers">Tutorials and Documents for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#faq">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../README_.html#contact-us">Contact Us</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../docs/install_with_docker.html">Install with Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/install_with_docker.html#download-a-bladedisc-docker-image">Download a BladeDISC Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/install_with_docker.html#start-a-docker-container">Start a Docker Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../docs/build_from_source.html">Build from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/build_from_source.html#prerequisite">Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/build_from_source.html#checkout-the-source">Checkout the Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/build_from_source.html#building-bladedisc-for-tensorflow-users">Building BladeDISC for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/build_from_source.html#building-bladedisc-for-pytorch-users">Building BladeDISC for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../docs/quickstart.html">Quickstart for TensorFlow/PyTorch users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/quickstart.html#quickstart-for-tensorflow-users">Quickstart for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/quickstart.html#quickstart-for-pytorch-users">Quickstart for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../docs/contribution.html">How to Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/contribution.html#local-development-environment">Local Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/contribution.html#submit-a-pull-request-to-bladedisc">Submit a Pull Request to BladeDISC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../docs/developers/index.html">Documentation for Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/developers/pass_pipeline.html">Tutorial: A Walkthough of the BladeDISC Pass Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/developers/runtime_abstraction_layer.html">Runtime Abstraction Layer Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/developers/bladedisc_torch_overview.html">BladeDISC Torch Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/developers/torch_add_a_new_converter.html">Tutorial: How to add the support of a new Torch Op</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../../docs/tutorials/index.html">Tutorials on Example Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/tutorials/tensorflow_inference_and_training.html">Use case of TensorFlow Inference and Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../../docs/tutorials/torch_bert_inference.html">Use case of PyTorch Inference</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>This page gives an overview how JSON values are stored and how this can be configured.</p>
<div class="section" id="id1">
<h2>Overview<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>By default, JSON values are stored as follows:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>JSON type</th>
<th>C++ type</th>
</tr>
</thead>
<tbody>
<tr>
<td>object</td>
<td><code>std::map&lt;std::string, basic_json&gt;</code></td>
</tr>
<tr>
<td>array</td>
<td><code>std::vector&lt;basic_json&gt;</code></td>
</tr>
<tr>
<td>null</td>
<td><code>std::nullptr_t</code></td>
</tr>
<tr>
<td>string</td>
<td><code>std::string</code></td>
</tr>
<tr>
<td>boolean</td>
<td><code>bool</code></td>
</tr>
<tr>
<td>number</td>
<td><code>std::int64_t</code>, <code>std::uint64_t</code>, and <code>double</code></td>
</tr>
</tbody>
</table><p>Note there are three different types for numbers - when parsing JSON text, the best fitting type is chosen.</p>
</div>
<div class="section" id="storage">
<h2>Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-plantuml notranslate"><div class="highlight"><pre><span></span>enum value_t {
    null
    object
    array
    string
    boolean
    number_integer
    number_unsigned
    number_float
    binary
    discarded
}

class json_value &lt;&lt; (U,orchid) &gt;&gt; {
    object_t* object
    array_t* array
    string_t* string
    binary_t* binary
    boolean_t boolean
    number_integer_t number_integer
    number_unsigned_t number_unsigned
    number_float_t number_float
}

class basic_json {
    -- type and value --
    value_t m_type
    json_value m_value
    -- derived types --
    + &lt;u&gt;typedef&lt;/u&gt; object_t
    + &lt;u&gt;typedef&lt;/u&gt; array_t
    + &lt;u&gt;typedef&lt;/u&gt; binary_t
    + &lt;u&gt;typedef&lt;/u&gt; boolean_t
    + &lt;u&gt;typedef&lt;/u&gt; number_integer_t
    + &lt;u&gt;typedef&lt;/u&gt; number_unsigned_t
    + &lt;u&gt;typedef&lt;/u&gt; number_float_t
}

basic_json .. json_value
basic_json .. value_t
</pre></div>
</div>
</div>
<div class="section" id="template-arguments">
<h2>Template arguments<a class="headerlink" href="#template-arguments" title="Permalink to this headline">¶</a></h2>
<p>The data types to store a JSON value are derived from the template arguments passed to class <code class="docutils literal notranslate"><span class="pre">basic_json</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">U</span><span class="p">,</span> <span class="k">typename</span> <span class="n">V</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">ObjectType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="p">,</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">U</span><span class="p">,</span> <span class="k">typename</span><span class="p">...</span> <span class="n">Args</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">ArrayType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="p">,</span>
    <span class="k">class</span> <span class="nc">StringType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span>
    <span class="k">class</span> <span class="nc">BooleanType</span> <span class="o">=</span> <span class="kt">bool</span><span class="p">,</span>
    <span class="k">class</span> <span class="nc">NumberIntegerType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="kt">int64_t</span><span class="p">,</span>
    <span class="k">class</span> <span class="nc">NumberUnsignedType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="kt">uint64_t</span><span class="p">,</span>
    <span class="k">class</span> <span class="nc">NumberFloatType</span> <span class="o">=</span> <span class="kt">double</span><span class="p">,</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">U</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">AllocatorType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="p">,</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="k">typename</span> <span class="n">SFINAE</span> <span class="o">=</span> <span class="kt">void</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">JSONSerializer</span> <span class="o">=</span> <span class="n">adl_serializer</span><span class="p">,</span>
    <span class="k">class</span> <span class="nc">BinaryType</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">basic_json</span><span class="p">;</span>
</pre></div>
</div>
<p>Type <code class="docutils literal notranslate"><span class="pre">json</span></code> is an alias for <code class="docutils literal notranslate"><span class="pre">basic_json&lt;&gt;</span></code> and uses the default types.</p>
<p>From the template arguments, the following types are derived:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">object_comparator_t</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;</span><span class="p">;</span>
<span class="k">using</span> <span class="n">object_t</span> <span class="o">=</span> <span class="n">ObjectType</span><span class="o">&lt;</span><span class="n">StringType</span><span class="p">,</span> <span class="n">basic_json</span><span class="p">,</span> <span class="n">object_comparator_t</span><span class="p">,</span>
                   <span class="n">AllocatorType</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">StringType</span><span class="p">,</span> <span class="n">basic_json</span><span class="o">&gt;&gt;&gt;</span><span class="p">;</span>

<span class="k">using</span> <span class="n">array_t</span> <span class="o">=</span> <span class="n">ArrayType</span><span class="o">&lt;</span><span class="n">basic_json</span><span class="p">,</span> <span class="n">AllocatorType</span><span class="o">&lt;</span><span class="n">basic_json</span><span class="o">&gt;&gt;</span><span class="p">;</span>

<span class="k">using</span> <span class="n">string_t</span> <span class="o">=</span> <span class="n">StringType</span><span class="p">;</span>

<span class="k">using</span> <span class="n">boolean_t</span> <span class="o">=</span> <span class="n">BooleanType</span><span class="p">;</span>

<span class="k">using</span> <span class="n">number_integer_t</span> <span class="o">=</span> <span class="n">NumberIntegerType</span><span class="p">;</span>
<span class="k">using</span> <span class="n">number_unsigned_t</span> <span class="o">=</span> <span class="n">NumberUnsignedType</span><span class="p">;</span>
<span class="k">using</span> <span class="n">number_float_t</span> <span class="o">=</span> <span class="n">NumberFloatType</span><span class="p">;</span>

<span class="k">using</span> <span class="n">binary_t</span> <span class="o">=</span> <span class="n">nlohmann</span><span class="o">::</span><span class="n">byte_container_with_subtype</span><span class="o">&lt;</span><span class="n">BinaryType</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="objects">
<h2>Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> describes JSON objects as follows:</p>
<blockquote>
<div><p>An object is an unordered collection of zero or more name/value pairs, where a name is a string and a value is a string, number, boolean, null, object, or array.</p>
</div></blockquote>
<div class="section" id="default-type">
<h3>Default type<a class="headerlink" href="#default-type" title="Permalink to this headline">¶</a></h3>
<p>With the default values for <em>ObjectType</em> (<code class="docutils literal notranslate"><span class="pre">std::map</span></code>), <em>StringType</em> (<code class="docutils literal notranslate"><span class="pre">std::string</span></code>), and <em>AllocatorType</em> (<code class="docutils literal notranslate"><span class="pre">std::allocator</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">object_t</span></code> is:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="c1">// key_type</span>
  <span class="n">basic_json</span><span class="p">,</span> <span class="c1">// value_type</span>
  <span class="n">std</span><span class="o">::</span><span class="n">less</span><span class="o">&lt;&gt;</span><span class="p">,</span> <span class="c1">// key_compare</span>
  <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">basic_json</span><span class="o">&gt;&gt;</span> <span class="c1">// allocator_type</span>
<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="behavior">
<h3>Behavior<a class="headerlink" href="#behavior" title="Permalink to this headline">¶</a></h3>
<p>The choice of <code class="docutils literal notranslate"><span class="pre">object_t</span></code> influences the behavior of the JSON class. With the default type, objects have the following behavior:</p>
<ul class="simple">
<li><p>When all names are unique, objects will be interoperable in the sense that all software implementations receiving that object will agree on the name-value mappings.</p></li>
<li><p>When the names within an object are not unique, it is unspecified which one of the values for a given key will be chosen. For instance, <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;key&quot;:</span> <span class="pre">2,</span> <span class="pre">&quot;key&quot;:</span> <span class="pre">1}</span></code> could be equal to either <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;key&quot;:</span> <span class="pre">1}</span></code> or <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;key&quot;:</span> <span class="pre">2}</span></code>.</p></li>
<li><p>Internally, name/value pairs are stored in lexicographical order of the names. Objects will also be serialized (see <code class="docutils literal notranslate"><span class="pre">dump</span></code>) in this order. For instance, both <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;b&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;a&quot;:</span> <span class="pre">2}</span></code> and <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">2,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">1}</span></code> will be stored and serialized as <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">2,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">1}</span></code>.</p></li>
<li><p>When comparing objects, the order of the name/value pairs is irrelevant. This makes objects interoperable in the sense that they will not be affected by these differences. For instance, <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;b&quot;:</span> <span class="pre">1,</span> <span class="pre">&quot;a&quot;:</span> <span class="pre">2}</span></code> and <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">{&quot;a&quot;:</span> <span class="pre">2,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">1}</span></code> will be treated as equal.</p></li>
</ul>
</div>
<div class="section" id="key-order">
<h3>Key order<a class="headerlink" href="#key-order" title="Permalink to this headline">¶</a></h3>
<p>The order name/value pairs are added to the object is <em>not</em> preserved by the library. Therefore, iterating an object may return name/value pairs in a different order than they were originally stored. In fact, keys will be traversed in alphabetical order as <code class="docutils literal notranslate"><span class="pre">std::map</span></code> with <code class="docutils literal notranslate"><span class="pre">std::less</span></code> is used by default. Please note this behavior conforms to <a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a>, because any order implements the specified “unordered” nature of JSON objects.</p>
</div>
<div class="section" id="limits">
<h3>Limits<a class="headerlink" href="#limits" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> specifies:</p>
<blockquote>
<div><p>An implementation may set limits on the maximum depth of nesting.</p>
</div></blockquote>
<p>In this class, the object’s limit of nesting is not explicitly constrained. However, a maximum depth of nesting may be introduced by the compiler or runtime environment. A theoretical limit can be queried by calling the <code class="docutils literal notranslate"><span class="pre">max_size</span></code> function of a JSON object.</p>
</div>
<div class="section" id="id2">
<h3>Storage<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Objects are stored as pointers in a <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> type. That is, for any access to object values, a pointer of type <code class="docutils literal notranslate"><span class="pre">object_t*</span></code> must be dereferenced.</p>
</div>
</div>
<div class="section" id="arrays">
<h2>Arrays<a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> describes JSON arrays as follows:</p>
<blockquote>
<div><p>An array is an ordered sequence of zero or more values.</p>
</div></blockquote>
<div class="section" id="id3">
<h3>Default type<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>With the default values for <em>ArrayType</em> (<code class="docutils literal notranslate"><span class="pre">std::vector</span></code>) and <em>AllocatorType</em> (<code class="docutils literal notranslate"><span class="pre">std::allocator</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">array_t</span></code> is:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span>
  <span class="n">basic_json</span><span class="p">,</span> <span class="c1">// value_type</span>
  <span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">basic_json</span><span class="o">&gt;</span> <span class="c1">// allocator_type</span>
<span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>Limits<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> specifies:</p>
<blockquote>
<div><p>An implementation may set limits on the maximum depth of nesting.</p>
</div></blockquote>
<p>In this class, the array’s limit of nesting is not explicitly constrained. However, a maximum depth of nesting may be introduced by the compiler or runtime environment. A theoretical limit can be queried by calling the <code class="docutils literal notranslate"><span class="pre">max_size</span></code> function of a JSON array.</p>
</div>
<div class="section" id="id5">
<h3>Storage<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Arrays are stored as pointers in a <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> type. That is, for any access to array values, a pointer of type <code class="docutils literal notranslate"><span class="pre">array_t*</span></code> must be dereferenced.</p>
</div>
</div>
<div class="section" id="strings">
<h2>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> describes JSON strings as follows:</p>
<blockquote>
<div><p>A string is a sequence of zero or more Unicode characters.</p>
</div></blockquote>
<p>Unicode values are split by the JSON class into byte-sized characters during deserialization.</p>
<div class="section" id="id6">
<h3>Default type<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>With the default values for <em>StringType</em> (<code class="docutils literal notranslate"><span class="pre">std::string</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">string_t</span></code> is <code class="docutils literal notranslate"><span class="pre">#!cpp</span> <span class="pre">std::string</span></code>.</p>
</div>
<div class="section" id="encoding">
<h3>Encoding<a class="headerlink" href="#encoding" title="Permalink to this headline">¶</a></h3>
<p>Strings are stored in UTF-8 encoding. Therefore, functions like <code class="docutils literal notranslate"><span class="pre">std::string::size()</span></code> or <code class="docutils literal notranslate"><span class="pre">std::string::length()</span></code> return the number of <strong>bytes</strong> in the string rather than the number of characters or glyphs.</p>
</div>
<div class="section" id="string-comparison">
<h3>String comparison<a class="headerlink" href="#string-comparison" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> states:</p>
<blockquote>
<div><p>Software implementations are typically required to test names of object members for equality. Implementations that transform the textual representation into sequences of Unicode code units and then perform the comparison numerically, code unit by code unit, are interoperable in the sense that implementations will agree in all cases on equality or inequality of two strings. For example, implementations that compare strings with escaped characters unconverted may incorrectly find that <code class="docutils literal notranslate"><span class="pre">&quot;a\\b&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;a\u005Cb&quot;</span></code> are not equal.</p>
</div></blockquote>
<p>This implementation is interoperable as it does compare strings code unit by code unit.</p>
</div>
<div class="section" id="id7">
<h3>Storage<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>String values are stored as pointers in a <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> type. That is, for any access to string values, a pointer of type <code class="docutils literal notranslate"><span class="pre">string_t*</span></code> must be dereferenced.</p>
</div>
</div>
<div class="section" id="booleans">
<h2>Booleans<a class="headerlink" href="#booleans" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> implicitly describes a boolean as a type which differentiates the two literals <code class="docutils literal notranslate"><span class="pre">true</span></code> and <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="section" id="id8">
<h3>Default type<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>With the default values for <em>BooleanType</em> (<code class="docutils literal notranslate"><span class="pre">#!cpp</span> <span class="pre">bool</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">boolean_t</span></code> is <code class="docutils literal notranslate"><span class="pre">#!cpp</span> <span class="pre">bool</span></code>.</p>
</div>
<div class="section" id="id9">
<h3>Storage<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Boolean values are stored directly inside a <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> type.</p>
</div>
</div>
<div class="section" id="numbers">
<h2>Numbers<a class="headerlink" href="#numbers" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference internal" href="number_handling.html"><span class="doc">number handling</span></a> article for a detailed discussion on how numbers are handled by this library.</p>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> describes numbers as follows:</p>
<blockquote>
<div><p>The representation of numbers is similar to that used in most programming languages. A number is represented in base 10 using decimal digits. It contains an integer component that may be prefixed with an optional minus sign, which may be followed by a fraction part and/or an exponent part. Leading zeros are not allowed. (…) Numeric values that cannot be represented in the grammar below (such as Infinity and NaN) are not permitted.</p>
</div></blockquote>
<p>This description includes both integer and floating-point numbers. However, C++ allows more precise storage if it is known whether the number is a signed integer, an unsigned integer or a floating-point number. Therefore, three different types, <code class="docutils literal notranslate"><span class="pre">number_integer_t</span></code>, <code class="docutils literal notranslate"><span class="pre">number_unsigned_t</span></code>, and <code class="docutils literal notranslate"><span class="pre">number_float_t</span></code> are used.</p>
<div class="section" id="default-types">
<h3>Default types<a class="headerlink" href="#default-types" title="Permalink to this headline">¶</a></h3>
<p>With the default values for <em>NumberIntegerType</em> (<code class="docutils literal notranslate"><span class="pre">std::int64_t</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">number_integer_t</span></code> is <code class="docutils literal notranslate"><span class="pre">std::int64_t</span></code>.
With the default values for <em>NumberUnsignedType</em> (<code class="docutils literal notranslate"><span class="pre">std::uint64_t</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">number_unsigned_t</span></code> is <code class="docutils literal notranslate"><span class="pre">std::uint64_t</span></code>.
With the default values for <em>NumberFloatType</em> (<code class="docutils literal notranslate"><span class="pre">#!cpp</span> <span class="pre">double</span></code>), the default value for <code class="docutils literal notranslate"><span class="pre">number_float_t</span></code> is <code class="docutils literal notranslate"><span class="pre">#!cpp</span> <span class="pre">double</span></code>.</p>
</div>
<div class="section" id="default-behavior">
<h3>Default behavior<a class="headerlink" href="#default-behavior" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The restrictions about leading zeros is not enforced in C++. Instead, leading zeros in integer literals lead to an interpretation as octal number. Internally, the value will be stored as decimal number. For instance, the C++ integer literal <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">010</span></code> will be serialized to <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">8</span></code>. During deserialization, leading zeros yield an error.</p></li>
<li><p>Not-a-number (NaN) values will be serialized to <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">null</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id10">
<h3>Limits<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> specifies:</p>
<blockquote>
<div><p>An implementation may set limits on the range and precision of numbers.</p>
</div></blockquote>
<p>When the default type is used, the maximal integer number that can be stored is <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">9223372036854775807</span></code> (<code class="docutils literal notranslate"><span class="pre">INT64_MAX</span></code>) and the minimal integer number that can be stored is <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">-9223372036854775808</span></code> (<code class="docutils literal notranslate"><span class="pre">INT64_MIN</span></code>). Integer numbers that are out of range will yield over/underflow when used in a constructor. During deserialization, too large or small integer numbers will be automatically be stored as <code class="docutils literal notranslate"><span class="pre">number_unsigned_t</span></code> or <code class="docutils literal notranslate"><span class="pre">number_float_t</span></code>.</p>
<p>When the default type is used, the maximal unsigned integer number that can be stored is <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">18446744073709551615</span></code> (<code class="docutils literal notranslate"><span class="pre">UINT64_MAX</span></code>) and the minimal integer number that can be stored is <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">0</span></code>. Integer numbers that are out of range will yield over/underflow when used in a constructor. During deserialization, too large or small integer numbers will be automatically be stored as <code class="docutils literal notranslate"><span class="pre">number_integer_t</span></code> or <code class="docutils literal notranslate"><span class="pre">number_float_t</span></code>.</p>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> further states:</p>
<blockquote>
<div><p>Note that when such software is used, numbers that are integers and are in the range $[-2^{53}+1, 2^{53}-1]$ are interoperable in the sense that implementations will agree exactly on their numeric values.</p>
</div></blockquote>
<p>As this range is a subrange of the exactly supported range [<code class="docutils literal notranslate"><span class="pre">INT64_MIN</span></code>, <code class="docutils literal notranslate"><span class="pre">INT64_MAX</span></code>], this class’s integer type is interoperable.</p>
<p><a class="reference external" href="https://tools.ietf.org/html/rfc8259">RFC 8259</a> states:</p>
<blockquote>
<div><p>This specification allows implementations to set limits on the range and precision of numbers accepted. Since software that implements IEEE 754-2008 binary64 (double precision) numbers is generally available and widely used, good interoperability can be achieved by implementations that expect no more precision or range than these provide, in the sense that implementations will approximate JSON numbers within the expected precision.</p>
</div></blockquote>
<p>This implementation does exactly follow this approach, as it uses double precision floating-point numbers. Note values smaller than <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">-1.79769313486232e+308</span></code> and values greater than <code class="docutils literal notranslate"><span class="pre">#!c</span> <span class="pre">1.79769313486232e+308</span></code> will be stored as NaN internally and be serialized to <code class="docutils literal notranslate"><span class="pre">#!json</span> <span class="pre">null</span></code>.</p>
</div>
<div class="section" id="id11">
<h3>Storage<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Integer number values, unsigned integer number values, and floating-point number values are stored directly inside a <code class="docutils literal notranslate"><span class="pre">basic_json</span></code> type.</p>
</div>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../../../../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="../../../../../../../../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright bladedisc-dev@list.alibaba-inc.com.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.
        </div>
    </div>  

</body>
</html>