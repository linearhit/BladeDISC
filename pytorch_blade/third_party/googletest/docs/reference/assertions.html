

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Assertions Reference &mdash; BladeDISC 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/copybutton.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../../../../../index.html">
                BladeDISC
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a></li>
        
      <li>Assertions Reference</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../../../../../_sources/pytorch_blade/third_party/googletest/docs/reference/assertions.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../../../../../search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../README_.html">BladeDISC Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#api-quickview">API QuickView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#for-pytorch-users">For PyTorch Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#setup-and-examples">Setup and Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#publications">Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#tutorials-and-documents-for-developers">Tutorials and Documents for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#how-to-contribute">How to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#faq">FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../README_.html#contact-us">Contact Us</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/install_with_docker.html">Install with Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/install_with_docker.html#download-a-bladedisc-docker-image">Download a BladeDISC Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/install_with_docker.html#start-a-docker-container">Start a Docker Container</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/build_from_source.html">Build from Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#prerequisite">Prerequisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#checkout-the-source">Checkout the Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#building-bladedisc-for-tensorflow-users">Building BladeDISC for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/build_from_source.html#building-bladedisc-for-pytorch-users">Building BladeDISC for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/quickstart.html">Quickstart for TensorFlow/PyTorch users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/quickstart.html#quickstart-for-tensorflow-users">Quickstart for TensorFlow Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/quickstart.html#quickstart-for-pytorch-users">Quickstart for PyTorch Users</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/contribution.html">How to Contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/contribution.html#local-development-environment">Local Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/contribution.html#submit-a-pull-request-to-bladedisc">Submit a Pull Request to BladeDISC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/developers/index.html">Documentation for Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/pass_pipeline.html">Tutorial: A Walkthough of the BladeDISC Pass Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/runtime_abstraction_layer.html">Runtime Abstraction Layer Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/bladedisc_torch_overview.html">BladeDISC Torch Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/developers/torch_add_a_new_converter.html">Tutorial: How to add the support of a new Torch Op</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../docs/tutorials/index.html">Tutorials on Example Use Cases</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/tutorials/tensorflow_inference_and_training.html">Use case of TensorFlow Inference and Training</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../docs/tutorials/torch_bert_inference.html">Use case of PyTorch Inference</a></li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="assertions-reference">
<h1>Assertions Reference<a class="headerlink" href="#assertions-reference" title="Permalink to this headline">¶</a></h1>
<p>This page lists the assertion macros provided by GoogleTest for verifying code
behavior. To use them, include the header <code class="docutils literal notranslate"><span class="pre">gtest/gtest.h</span></code>.</p>
<p>The majority of the macros listed below come as a pair with an <code class="docutils literal notranslate"><span class="pre">EXPECT_</span></code> variant
and an <code class="docutils literal notranslate"><span class="pre">ASSERT_</span></code> variant. Upon failure, <code class="docutils literal notranslate"><span class="pre">EXPECT_</span></code> macros generate nonfatal
failures and allow the current function to continue running, while <code class="docutils literal notranslate"><span class="pre">ASSERT_</span></code>
macros generate fatal failures and abort the current function.</p>
<p>All assertion macros support streaming a custom failure message into them with
the <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> operator, for example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">EXPECT_TRUE</span><span class="p">(</span><span class="n">my_condition</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;My condition is not true&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Anything that can be streamed to an <code class="docutils literal notranslate"><span class="pre">ostream</span></code> can be streamed to an assertion
macro—in particular, C strings and string objects. If a wide string (<code class="docutils literal notranslate"><span class="pre">wchar_t*</span></code>,
<code class="docutils literal notranslate"><span class="pre">TCHAR*</span></code> in <code class="docutils literal notranslate"><span class="pre">UNICODE</span></code> mode on Windows, or <code class="docutils literal notranslate"><span class="pre">std::wstring</span></code>) is streamed to an
assertion, it will be translated to UTF-8 when printed.</p>
<div class="section" id="explicit-success-and-failure-success-failure">
<h2>Explicit Success and Failure {#success-failure}<a class="headerlink" href="#explicit-success-and-failure-success-failure" title="Permalink to this headline">¶</a></h2>
<p>The assertions in this section generate a success or failure directly instead of
testing a value or expression. These are useful when control flow, rather than a
Boolean expression, determines the test’s success or failure, as shown by the
following example:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">switch</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="p">...</span> <span class="n">some</span> <span class="n">checks</span> <span class="p">...</span>
  <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="p">...</span> <span class="n">some</span> <span class="n">other</span> <span class="n">checks</span> <span class="p">...</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="n">FAIL</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;We shouldn&#39;t get here.&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="succeed-succeed">
<h3>SUCCEED {#SUCCEED}<a class="headerlink" href="#succeed-succeed" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SUCCEED()</span></code></p>
<p>Generates a success. This <em>does not</em> make the overall test succeed. A test is
considered successful only if none of its assertions fail during its execution.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SUCCEED</span></code> assertion is purely documentary and currently doesn’t generate any
user-visible output. However, we may add <code class="docutils literal notranslate"><span class="pre">SUCCEED</span></code> messages to GoogleTest output
in the future.</p>
</div>
<div class="section" id="fail-fail">
<h3>FAIL {#FAIL}<a class="headerlink" href="#fail-fail" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">FAIL()</span></code></p>
<p>Generates a fatal failure, which returns from the current function.</p>
<p>Can only be used in functions that return <code class="docutils literal notranslate"><span class="pre">void</span></code>. See
<a class="reference internal" href="../advanced.html#assertion-placement"><span class="std std-ref">Assertion Placement</span></a> for more information.</p>
</div>
<div class="section" id="add-failure-add-failure">
<h3>ADD_FAILURE {#ADD_FAILURE}<a class="headerlink" href="#add-failure-add-failure" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ADD_FAILURE()</span></code></p>
<p>Generates a nonfatal failure, which allows the current function to continue
running.</p>
</div>
<div class="section" id="add-failure-at-add-failure-at">
<h3>ADD_FAILURE_AT {#ADD_FAILURE_AT}<a class="headerlink" href="#add-failure-at-add-failure-at" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ADD_FAILURE_AT(</span></code><em><code class="docutils literal notranslate"><span class="pre">file_path</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">line_number</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Generates a nonfatal failure at the file and line number specified.</p>
</div>
</div>
<div class="section" id="generalized-assertion-generalized">
<h2>Generalized Assertion {#generalized}<a class="headerlink" href="#generalized-assertion-generalized" title="Permalink to this headline">¶</a></h2>
<p>The following assertion allows <a class="reference internal" href="matchers.html"><span class="doc">matchers</span></a> to be used to verify
values.</p>
<div class="section" id="expect-that-expect-that">
<h3>EXPECT_THAT {#EXPECT_THAT}<a class="headerlink" href="#expect-that-expect-that" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_THAT(</span></code><em><code class="docutils literal notranslate"><span class="pre">value</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_THAT(</span></code><em><code class="docutils literal notranslate"><span class="pre">value</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">value</span></code></em> matches the <a class="reference internal" href="matchers.html"><span class="doc">matcher</span></a> <em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em>.</p>
<p>For example, the following code verifies that the string <code class="docutils literal notranslate"><span class="pre">value1</span></code> starts with
<code class="docutils literal notranslate"><span class="pre">&quot;Hello&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">value2</span></code> matches a regular expression, and <code class="docutils literal notranslate"><span class="pre">value3</span></code> is between 5 and
10:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;gmock/gmock.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">AllOf</span><span class="p">;</span>
<span class="k">using</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Gt</span><span class="p">;</span>
<span class="k">using</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Lt</span><span class="p">;</span>
<span class="k">using</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">MatchesRegex</span><span class="p">;</span>
<span class="k">using</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">StartsWith</span><span class="p">;</span>

<span class="p">...</span>
<span class="n">EXPECT_THAT</span><span class="p">(</span><span class="n">value1</span><span class="p">,</span> <span class="n">StartsWith</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">));</span>
<span class="n">EXPECT_THAT</span><span class="p">(</span><span class="n">value2</span><span class="p">,</span> <span class="n">MatchesRegex</span><span class="p">(</span><span class="s">&quot;Line </span><span class="se">\\</span><span class="s">d+&quot;</span><span class="p">));</span>
<span class="n">ASSERT_THAT</span><span class="p">(</span><span class="n">value3</span><span class="p">,</span> <span class="n">AllOf</span><span class="p">(</span><span class="n">Gt</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">Lt</span><span class="p">(</span><span class="mi">10</span><span class="p">)));</span>
</pre></div>
</div>
<p>Matchers enable assertions of this form to read like English and generate
informative failure messages. For example, if the above assertion on <code class="docutils literal notranslate"><span class="pre">value1</span></code>
fails, the resulting message will be similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Value</span> <span class="n">of</span><span class="p">:</span> <span class="n">value1</span>
  <span class="n">Actual</span><span class="p">:</span> <span class="s2">&quot;Hi, world!&quot;</span>
<span class="n">Expected</span><span class="p">:</span> <span class="n">starts</span> <span class="k">with</span> <span class="s2">&quot;Hello&quot;</span>
</pre></div>
</div>
<p>GoogleTest provides a built-in library of matchers—see the
<a class="reference internal" href="matchers.html"><span class="doc">Matchers Reference</span></a>. It is also possible to write your own
matchers—see Writing New Matchers Quickly.
The use of matchers makes <code class="docutils literal notranslate"><span class="pre">EXPECT_THAT</span></code> a powerful, extensible assertion.</p>
<p><em>The idea for this assertion was borrowed from Joe Walnes’ Hamcrest project,
which adds <code class="docutils literal notranslate"><span class="pre">assertThat()</span></code> to JUnit.</em></p>
</div>
</div>
<div class="section" id="boolean-conditions-boolean">
<h2>Boolean Conditions {#boolean}<a class="headerlink" href="#boolean-conditions-boolean" title="Permalink to this headline">¶</a></h2>
<p>The following assertions test Boolean conditions.</p>
<div class="section" id="expect-true-expect-true">
<h3>EXPECT_TRUE {#EXPECT_TRUE}<a class="headerlink" href="#expect-true-expect-true" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_TRUE(</span></code><em><code class="docutils literal notranslate"><span class="pre">condition</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_TRUE(</span></code><em><code class="docutils literal notranslate"><span class="pre">condition</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">condition</span></code></em> is true.</p>
</div>
<div class="section" id="expect-false-expect-false">
<h3>EXPECT_FALSE {#EXPECT_FALSE}<a class="headerlink" href="#expect-false-expect-false" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_FALSE(</span></code><em><code class="docutils literal notranslate"><span class="pre">condition</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_FALSE(</span></code><em><code class="docutils literal notranslate"><span class="pre">condition</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">condition</span></code></em> is false.</p>
</div>
</div>
<div class="section" id="binary-comparison-binary-comparison">
<h2>Binary Comparison {#binary-comparison}<a class="headerlink" href="#binary-comparison-binary-comparison" title="Permalink to this headline">¶</a></h2>
<p>The following assertions compare two values. The value arguments must be
comparable by the assertion’s comparison operator, otherwise a compiler error
will result.</p>
<p>If an argument supports the <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> operator, it will be called to print the
argument when the assertion fails. Otherwise, GoogleTest will attempt to print
them in the best way it can—see
<a class="reference internal" href="../advanced.html#teaching-googletest-how-to-print-your-values"><span class="std std-ref">Teaching GoogleTest How to Print Your Values</span></a>.</p>
<p>Arguments are always evaluated exactly once, so it’s OK for the arguments to
have side effects. However, the argument evaluation order is undefined and
programs should not depend on any particular argument evaluation order.</p>
<p>These assertions work with both narrow and wide string objects (<code class="docutils literal notranslate"><span class="pre">string</span></code> and
<code class="docutils literal notranslate"><span class="pre">wstring</span></code>).</p>
<p>See also the <a class="reference external" href="#floating-point">Floating-Point Comparison</a> assertions to compare
floating-point numbers and avoid problems caused by rounding.</p>
<div class="section" id="expect-eq-expect-eq">
<h3>EXPECT_EQ {#EXPECT_EQ}<a class="headerlink" href="#expect-eq-expect-eq" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">==</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>.</p>
<p>Does pointer equality on pointers. If used on two C strings, it tests if they
are in the same memory location, not if they have the same value. Use
<a class="reference external" href="#EXPECT_STREQ"><code class="docutils literal notranslate"><span class="pre">EXPECT_STREQ</span></code></a> to compare C strings (e.g. <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span></code>) by
value.</p>
<p>When comparing a pointer to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, use <code class="docutils literal notranslate"><span class="pre">EXPECT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">ptr</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">nullptr)</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">EXPECT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">ptr</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">NULL)</span></code>.</p>
</div>
<div class="section" id="expect-ne-expect-ne">
<h3>EXPECT_NE {#EXPECT_NE}<a class="headerlink" href="#expect-ne-expect-ne" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_NE(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_NE(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">!=</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>.</p>
<p>Does pointer equality on pointers. If used on two C strings, it tests if they
are in different memory locations, not if they have different values. Use
<a class="reference external" href="#EXPECT_STRNE"><code class="docutils literal notranslate"><span class="pre">EXPECT_STRNE</span></code></a> to compare C strings (e.g. <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char*</span></code>) by
value.</p>
<p>When comparing a pointer to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, use <code class="docutils literal notranslate"><span class="pre">EXPECT_NE(</span></code><em><code class="docutils literal notranslate"><span class="pre">ptr</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">nullptr)</span></code> instead
of <code class="docutils literal notranslate"><span class="pre">EXPECT_NE(</span></code><em><code class="docutils literal notranslate"><span class="pre">ptr</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">NULL)</span></code>.</p>
</div>
<div class="section" id="expect-lt-expect-lt">
<h3>EXPECT_LT {#EXPECT_LT}<a class="headerlink" href="#expect-lt-expect-lt" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_LT(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_LT(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">&lt;</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>.</p>
</div>
<div class="section" id="expect-le-expect-le">
<h3>EXPECT_LE {#EXPECT_LE}<a class="headerlink" href="#expect-le-expect-le" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_LE(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_LE(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>.</p>
</div>
<div class="section" id="expect-gt-expect-gt">
<h3>EXPECT_GT {#EXPECT_GT}<a class="headerlink" href="#expect-gt-expect-gt" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_GT(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_GT(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">&gt;</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>.</p>
</div>
<div class="section" id="expect-ge-expect-ge">
<h3>EXPECT_GE {#EXPECT_GE}<a class="headerlink" href="#expect-ge-expect-ge" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_GE(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_GE(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>.</p>
</div>
</div>
<div class="section" id="string-comparison-c-strings">
<h2>String Comparison {#c-strings}<a class="headerlink" href="#string-comparison-c-strings" title="Permalink to this headline">¶</a></h2>
<p>The following assertions compare two <strong>C strings</strong>. To compare two <code class="docutils literal notranslate"><span class="pre">string</span></code>
objects, use <a class="reference external" href="#EXPECT_EQ"><code class="docutils literal notranslate"><span class="pre">EXPECT_EQ</span></code></a> or <a class="reference external" href="#EXPECT_NE"><code class="docutils literal notranslate"><span class="pre">EXPECT_NE</span></code></a> instead.</p>
<p>These assertions also accept wide C strings (<code class="docutils literal notranslate"><span class="pre">wchar_t*</span></code>). If a comparison of two
wide strings fails, their values will be printed as UTF-8 narrow strings.</p>
<p>To compare a C string with <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, use <code class="docutils literal notranslate"><span class="pre">EXPECT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">c_string</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">nullptr)</span></code> or
<code class="docutils literal notranslate"><span class="pre">EXPECT_NE(</span></code><em><code class="docutils literal notranslate"><span class="pre">c_string</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">nullptr)</span></code>.</p>
<div class="section" id="expect-streq-expect-streq">
<h3>EXPECT_STREQ {#EXPECT_STREQ}<a class="headerlink" href="#expect-streq-expect-streq" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_STREQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_STREQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the two C strings <em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em> have the same contents.</p>
</div>
<div class="section" id="expect-strne-expect-strne">
<h3>EXPECT_STRNE {#EXPECT_STRNE}<a class="headerlink" href="#expect-strne-expect-strne" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_STRNE(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_STRNE(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the two C strings <em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em> have different contents.</p>
</div>
<div class="section" id="expect-strcaseeq-expect-strcaseeq">
<h3>EXPECT_STRCASEEQ {#EXPECT_STRCASEEQ}<a class="headerlink" href="#expect-strcaseeq-expect-strcaseeq" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_STRCASEEQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_STRCASEEQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the two C strings <em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em> have the same contents,
ignoring case.</p>
</div>
<div class="section" id="expect-strcasene-expect-strcasene">
<h3>EXPECT_STRCASENE {#EXPECT_STRCASENE}<a class="headerlink" href="#expect-strcasene-expect-strcasene" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_STRCASENE(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_STRCASENE(</span></code><em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the two C strings <em><code class="docutils literal notranslate"><span class="pre">str1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">str2</span></code></em> have different contents,
ignoring case.</p>
</div>
</div>
<div class="section" id="floating-point-comparison-floating-point">
<h2>Floating-Point Comparison {#floating-point}<a class="headerlink" href="#floating-point-comparison-floating-point" title="Permalink to this headline">¶</a></h2>
<p>The following assertions compare two floating-point values.</p>
<p>Due to rounding errors, it is very unlikely that two floating-point values will
match exactly, so <code class="docutils literal notranslate"><span class="pre">EXPECT_EQ</span></code> is not suitable. In general, for floating-point
comparison to make sense, the user needs to carefully choose the error bound.</p>
<p>GoogleTest also provides assertions that use a default error bound based on
Units in the Last Place (ULPs). To learn more about ULPs, see the article
<a class="reference external" href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/">Comparing Floating Point Numbers</a>.</p>
<div class="section" id="expect-float-eq-expect-float-eq">
<h3>EXPECT_FLOAT_EQ {#EXPECT_FLOAT_EQ}<a class="headerlink" href="#expect-float-eq-expect-float-eq" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_FLOAT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_FLOAT_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the two <code class="docutils literal notranslate"><span class="pre">float</span></code> values <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em> are approximately
equal, to within 4 ULPs from each other.</p>
</div>
<div class="section" id="expect-double-eq-expect-double-eq">
<h3>EXPECT_DOUBLE_EQ {#EXPECT_DOUBLE_EQ}<a class="headerlink" href="#expect-double-eq-expect-double-eq" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_DOUBLE_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_DOUBLE_EQ(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the two <code class="docutils literal notranslate"><span class="pre">double</span></code> values <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em> are approximately
equal, to within 4 ULPs from each other.</p>
</div>
<div class="section" id="expect-near-expect-near">
<h3>EXPECT_NEAR {#EXPECT_NEAR}<a class="headerlink" href="#expect-near-expect-near" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_NEAR(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">abs_error</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_NEAR(</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">abs_error</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the difference between <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em> and <em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em> does not exceed the
absolute error bound <em><code class="docutils literal notranslate"><span class="pre">abs_error</span></code></em>.</p>
</div>
</div>
<div class="section" id="exception-assertions-exceptions">
<h2>Exception Assertions {#exceptions}<a class="headerlink" href="#exception-assertions-exceptions" title="Permalink to this headline">¶</a></h2>
<p>The following assertions verify that a piece of code throws, or does not throw,
an exception. Usage requires exceptions to be enabled in the build environment.</p>
<p>Note that the piece of code under test can be a compound statement, for example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">EXPECT_NO_THROW</span><span class="p">({</span>
  <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="n">DoSomething</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="section" id="expect-throw-expect-throw">
<h3>EXPECT_THROW {#EXPECT_THROW}<a class="headerlink" href="#expect-throw-expect-throw" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_THROW(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">exception_type</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_THROW(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">exception_type</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em> throws an exception of type <em><code class="docutils literal notranslate"><span class="pre">exception_type</span></code></em>.</p>
</div>
<div class="section" id="expect-any-throw-expect-any-throw">
<h3>EXPECT_ANY_THROW {#EXPECT_ANY_THROW}<a class="headerlink" href="#expect-any-throw-expect-any-throw" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_ANY_THROW(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_ANY_THROW(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em> throws an exception of any type.</p>
</div>
<div class="section" id="expect-no-throw-expect-no-throw">
<h3>EXPECT_NO_THROW {#EXPECT_NO_THROW}<a class="headerlink" href="#expect-no-throw-expect-no-throw" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_NO_THROW(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_NO_THROW(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em> does not throw any exception.</p>
</div>
</div>
<div class="section" id="predicate-assertions-predicates">
<h2>Predicate Assertions {#predicates}<a class="headerlink" href="#predicate-assertions-predicates" title="Permalink to this headline">¶</a></h2>
<p>The following assertions enable more complex predicates to be verified while
printing a more clear failure message than if <code class="docutils literal notranslate"><span class="pre">EXPECT_TRUE</span></code> were used alone.</p>
<div class="section" id="expect-pred-expect-pred">
<h3>EXPECT_PRED* {#EXPECT_PRED}<a class="headerlink" href="#expect-pred-expect-pred" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED1(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED2(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED3(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED4(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED5(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val5</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED1(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED2(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED3(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED4(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED5(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val5</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the predicate <em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em> returns <code class="docutils literal notranslate"><span class="pre">true</span></code> when passed the given values
as arguments.</p>
<p>The parameter <em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em> is a function or functor that accepts as many arguments
as the corresponding macro accepts values. If <em><code class="docutils literal notranslate"><span class="pre">pred</span></code></em> returns <code class="docutils literal notranslate"><span class="pre">true</span></code> for the
given arguments, the assertion succeeds, otherwise the assertion fails.</p>
<p>When the assertion fails, it prints the value of each argument. Arguments are
always evaluated exactly once.</p>
<p>As an example, see the following code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Returns true if m and n have no common divisors except 1.</span>
<span class="kt">bool</span> <span class="nf">MutuallyPrime</span><span class="p">(</span><span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">...</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">...</span>
<span class="n">EXPECT_PRED2</span><span class="p">(</span><span class="n">MutuallyPrime</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>  <span class="c1">// Succeeds</span>
<span class="n">EXPECT_PRED2</span><span class="p">(</span><span class="n">MutuallyPrime</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>  <span class="c1">// Fails</span>
</pre></div>
</div>
<p>In the above example, the first assertion succeeds, and the second fails with
the following message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MutuallyPrime</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">is</span> <span class="n">false</span><span class="p">,</span> <span class="n">where</span>
<span class="n">b</span> <span class="ow">is</span> <span class="mi">4</span>
<span class="n">c</span> <span class="ow">is</span> <span class="mi">10</span>
</pre></div>
</div>
<p>Note that if the given predicate is an overloaded function or a function
template, the assertion macro might not be able to determine which version to
use, and it might be necessary to explicitly specify the type of the function.
For example, for a Boolean function <code class="docutils literal notranslate"><span class="pre">IsPositive()</span></code> overloaded to take either a
single <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">double</span></code> argument, it would be necessary to write one of the
following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">EXPECT_PRED1</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">IsPositive</span><span class="p">),</span> <span class="mi">5</span><span class="p">);</span>
<span class="n">EXPECT_PRED1</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">double</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">IsPositive</span><span class="p">),</span> <span class="mf">3.14</span><span class="p">);</span>
</pre></div>
</div>
<p>Writing simply <code class="docutils literal notranslate"><span class="pre">EXPECT_PRED1(IsPositive,</span> <span class="pre">5);</span></code> would result in a compiler error.
Similarly, to use a template function, specify the template arguments:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">bool</span> <span class="n">IsNegative</span><span class="p">(</span><span class="n">T</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="n">EXPECT_PRED1</span><span class="p">(</span><span class="n">IsNegative</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">);</span>  <span class="c1">// Must specify type for IsNegative</span>
</pre></div>
</div>
<p>If a template has multiple parameters, wrap the predicate in parentheses so the
macro arguments are parsed correctly:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ASSERT_PRED2</span><span class="p">((</span><span class="n">MyPredicate</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">),</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="expect-pred-format-expect-pred-format">
<h3>EXPECT_PRED_FORMAT* {#EXPECT_PRED_FORMAT}<a class="headerlink" href="#expect-pred-format-expect-pred-format" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED_FORMAT1(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED_FORMAT2(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED_FORMAT3(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED_FORMAT4(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code>
<br /><code class="docutils literal notranslate"><span class="pre">EXPECT_PRED_FORMAT5(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val5</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED_FORMAT1(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED_FORMAT2(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED_FORMAT3(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED_FORMAT4(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code>
<br /><code class="docutils literal notranslate"><span class="pre">ASSERT_PRED_FORMAT5(</span></code><em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val3</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val4</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">val5</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that the predicate <em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em> succeeds when passed the given
values as arguments.</p>
<p>The parameter <em><code class="docutils literal notranslate"><span class="pre">pred_formatter</span></code></em> is a <em>predicate-formatter</em>, which is a function
or functor with the signature:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">testing</span><span class="o">::</span><span class="n">AssertionResult</span> <span class="n">PredicateFormatter</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr1</span><span class="p">,</span>
                                            <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">expr2</span><span class="p">,</span>
                                            <span class="p">...</span>
                                            <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">exprn</span><span class="p">,</span>
                                            <span class="n">T1</span> <span class="n">val1</span><span class="p">,</span>
                                            <span class="n">T2</span> <span class="n">val2</span><span class="p">,</span>
                                            <span class="p">...</span>
                                            <span class="n">Tn</span> <span class="n">valn</span><span class="p">);</span>
</pre></div>
</div>
<p>where <em><code class="docutils literal notranslate"><span class="pre">val1</span></code></em>, <em><code class="docutils literal notranslate"><span class="pre">val2</span></code></em>, …, <em><code class="docutils literal notranslate"><span class="pre">valn</span></code></em> are the values of the predicate
arguments, and <em><code class="docutils literal notranslate"><span class="pre">expr1</span></code></em>, <em><code class="docutils literal notranslate"><span class="pre">expr2</span></code></em>, …, <em><code class="docutils literal notranslate"><span class="pre">exprn</span></code></em> are the corresponding
expressions as they appear in the source code. The types <code class="docutils literal notranslate"><span class="pre">T1</span></code>, <code class="docutils literal notranslate"><span class="pre">T2</span></code>, …, <code class="docutils literal notranslate"><span class="pre">Tn</span></code>
can be either value types or reference types; if an argument has type <code class="docutils literal notranslate"><span class="pre">T</span></code>, it
can be declared as either <code class="docutils literal notranslate"><span class="pre">T</span></code> or <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">T&amp;</span></code>, whichever is appropriate. For more
about the return type <code class="docutils literal notranslate"><span class="pre">testing::AssertionResult</span></code>, see
<a class="reference internal" href="../advanced.html#using-a-function-that-returns-an-assertionresult"><span class="std std-ref">Using a Function That Returns an AssertionResult</span></a>.</p>
<p>As an example, see the following code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Returns the smallest prime common divisor of m and n,</span>
<span class="c1">// or 1 when m and n are mutually prime.</span>
<span class="kt">int</span> <span class="nf">SmallestPrimeCommonDivisor</span><span class="p">(</span><span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

<span class="c1">// Returns true if m and n have no common divisors except 1.</span>
<span class="kt">bool</span> <span class="nf">MutuallyPrime</span><span class="p">(</span><span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

<span class="c1">// A predicate-formatter for asserting that two integers are mutually prime.</span>
<span class="n">testing</span><span class="o">::</span><span class="n">AssertionResult</span> <span class="n">AssertMutuallyPrime</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">m_expr</span><span class="p">,</span>
                                             <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">n_expr</span><span class="p">,</span>
                                             <span class="kt">int</span> <span class="n">m</span><span class="p">,</span>
                                             <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">MutuallyPrime</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span> <span class="k">return</span> <span class="n">testing</span><span class="o">::</span><span class="n">AssertionSuccess</span><span class="p">();</span>

  <span class="k">return</span> <span class="n">testing</span><span class="o">::</span><span class="n">AssertionFailure</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">m_expr</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; and &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">n_expr</span>
      <span class="o">&lt;&lt;</span> <span class="s">&quot; (&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">m</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; and &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;) are not mutually prime, &quot;</span>
      <span class="o">&lt;&lt;</span> <span class="s">&quot;as they have a common divisor &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">SmallestPrimeCommonDivisor</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">...</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">...</span>
<span class="n">EXPECT_PRED_FORMAT2</span><span class="p">(</span><span class="n">AssertMutuallyPrime</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>  <span class="c1">// Succeeds</span>
<span class="n">EXPECT_PRED_FORMAT2</span><span class="p">(</span><span class="n">AssertMutuallyPrime</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>  <span class="c1">// Fails</span>
</pre></div>
</div>
<p>In the above example, the final assertion fails and the predicate-formatter
produces the following failure message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="ow">and</span> <span class="n">c</span> <span class="p">(</span><span class="mi">4</span> <span class="ow">and</span> <span class="mi">10</span><span class="p">)</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">mutually</span> <span class="n">prime</span><span class="p">,</span> <span class="k">as</span> <span class="n">they</span> <span class="n">have</span> <span class="n">a</span> <span class="n">common</span> <span class="n">divisor</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="windows-hresult-assertions-hresult">
<h2>Windows HRESULT Assertions {#HRESULT}<a class="headerlink" href="#windows-hresult-assertions-hresult" title="Permalink to this headline">¶</a></h2>
<p>The following assertions test for <code class="docutils literal notranslate"><span class="pre">HRESULT</span></code> success or failure. For example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">CComPtr</span><span class="o">&lt;</span><span class="n">IShellDispatch2</span><span class="o">&gt;</span> <span class="n">shell</span><span class="p">;</span>
<span class="n">ASSERT_HRESULT_SUCCEEDED</span><span class="p">(</span><span class="n">shell</span><span class="p">.</span><span class="n">CoCreateInstance</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;Shell.Application&quot;</span><span class="p">));</span>
<span class="n">CComVariant</span> <span class="n">empty</span><span class="p">;</span>
<span class="n">ASSERT_HRESULT_SUCCEEDED</span><span class="p">(</span><span class="n">shell</span><span class="o">-&gt;</span><span class="n">ShellExecute</span><span class="p">(</span><span class="n">CComBSTR</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">empty</span><span class="p">,</span> <span class="n">empty</span><span class="p">,</span> <span class="n">empty</span><span class="p">,</span> <span class="n">empty</span><span class="p">));</span>
</pre></div>
</div>
<p>The generated output contains the human-readable error message associated with
the returned <code class="docutils literal notranslate"><span class="pre">HRESULT</span></code> code.</p>
<div class="section" id="expect-hresult-succeeded-expect-hresult-succeeded">
<h3>EXPECT_HRESULT_SUCCEEDED {#EXPECT_HRESULT_SUCCEEDED}<a class="headerlink" href="#expect-hresult-succeeded-expect-hresult-succeeded" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_HRESULT_SUCCEEDED(</span></code><em><code class="docutils literal notranslate"><span class="pre">expression</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_HRESULT_SUCCEEDED(</span></code><em><code class="docutils literal notranslate"><span class="pre">expression</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">expression</span></code></em> is a success <code class="docutils literal notranslate"><span class="pre">HRESULT</span></code>.</p>
</div>
<div class="section" id="expect-hresult-failed-expect-hresult-failed">
<h3>EXPECT_HRESULT_FAILED {#EXPECT_HRESULT_FAILED}<a class="headerlink" href="#expect-hresult-failed-expect-hresult-failed" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_HRESULT_FAILED(</span></code><em><code class="docutils literal notranslate"><span class="pre">expression</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">EXPECT_HRESULT_FAILED(</span></code><em><code class="docutils literal notranslate"><span class="pre">expression</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">expression</span></code></em> is a failure <code class="docutils literal notranslate"><span class="pre">HRESULT</span></code>.</p>
</div>
</div>
<div class="section" id="death-assertions-death">
<h2>Death Assertions {#death}<a class="headerlink" href="#death-assertions-death" title="Permalink to this headline">¶</a></h2>
<p>The following assertions verify that a piece of code causes the process to
terminate. For context, see <a class="reference internal" href="../advanced.html#death-tests"><span class="std std-ref">Death Tests</span></a>.</p>
<p>These assertions spawn a new process and execute the code under test in that
process. How that happens depends on the platform and the variable
<code class="docutils literal notranslate"><span class="pre">::testing::GTEST_FLAG(death_test_style)</span></code>, which is initialized from the
command-line flag <code class="docutils literal notranslate"><span class="pre">--gtest_death_test_style</span></code>.</p>
<ul class="simple">
<li><p>On POSIX systems, <code class="docutils literal notranslate"><span class="pre">fork()</span></code> (or <code class="docutils literal notranslate"><span class="pre">clone()</span></code> on Linux) is used to spawn the
child, after which:</p>
<ul>
<li><p>If the variable’s value is <code class="docutils literal notranslate"><span class="pre">&quot;fast&quot;</span></code>, the death test statement is
immediately executed.</p></li>
<li><p>If the variable’s value is <code class="docutils literal notranslate"><span class="pre">&quot;threadsafe&quot;</span></code>, the child process re-executes
the unit test binary just as it was originally invoked, but with some
extra flags to cause just the single death test under consideration to
be run.</p></li>
</ul>
</li>
<li><p>On Windows, the child is spawned using the <code class="docutils literal notranslate"><span class="pre">CreateProcess()</span></code> API, and
re-executes the binary to cause just the single death test under
consideration to be run - much like the <code class="docutils literal notranslate"><span class="pre">&quot;threadsafe&quot;</span></code> mode on POSIX.</p></li>
</ul>
<p>Other values for the variable are illegal and will cause the death test to fail.
Currently, the flag’s default value is
<strong><code class="docutils literal notranslate"><span class="pre">&quot;fast&quot;</span></code></strong>.</p>
<p>If the death test statement runs to completion without dying, the child process
will nonetheless terminate, and the assertion fails.</p>
<p>Note that the piece of code under test can be a compound statement, for example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">EXPECT_DEATH</span><span class="p">({</span>
  <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="n">DoSomething</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
<span class="p">},</span> <span class="s">&quot;Error on line .* of DoSomething()&quot;</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="expect-death-expect-death">
<h3>EXPECT_DEATH {#EXPECT_DEATH}<a class="headerlink" href="#expect-death-expect-death" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_DEATH(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_DEATH(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em> causes the process to terminate with a nonzero exit
status and produces <code class="docutils literal notranslate"><span class="pre">stderr</span></code> output that matches <em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em>.</p>
<p>The parameter <em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em> is either a <a class="reference internal" href="matchers.html"><span class="doc">matcher</span></a> for a <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::string&amp;</span></code>, or a regular expression (see
<a class="reference internal" href="../advanced.html#regular-expression-syntax"><span class="std std-ref">Regular Expression Syntax</span></a>)—a bare
string <em><code class="docutils literal notranslate"><span class="pre">s</span></code></em> (with no matcher) is treated as
<a class="reference internal" href="matchers.html#string-matchers"><span class="std std-ref">ContainsRegex(s)</span></a>, <strong>not</strong>
<a class="reference internal" href="matchers.html#generic-comparison"><span class="std std-ref">Eq(s)</span></a>.</p>
<p>For example, the following code verifies that calling <code class="docutils literal notranslate"><span class="pre">DoSomething(42)</span></code> causes
the process to die with an error message that contains the text <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">error</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">EXPECT_DEATH</span><span class="p">(</span><span class="n">DoSomething</span><span class="p">(</span><span class="mi">42</span><span class="p">),</span> <span class="s">&quot;My error&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="expect-death-if-supported-expect-death-if-supported">
<h3>EXPECT_DEATH_IF_SUPPORTED {#EXPECT_DEATH_IF_SUPPORTED}<a class="headerlink" href="#expect-death-if-supported-expect-death-if-supported" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_DEATH_IF_SUPPORTED(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_DEATH_IF_SUPPORTED(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>If death tests are supported, behaves the same as
<a class="reference external" href="#EXPECT_DEATH"><code class="docutils literal notranslate"><span class="pre">EXPECT_DEATH</span></code></a>. Otherwise, verifies nothing.</p>
</div>
<div class="section" id="expect-debug-death-expect-debug-death">
<h3>EXPECT_DEBUG_DEATH {#EXPECT_DEBUG_DEATH}<a class="headerlink" href="#expect-debug-death-expect-debug-death" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_DEBUG_DEATH(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_DEBUG_DEATH(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>In debug mode, behaves the same as <a class="reference external" href="#EXPECT_DEATH"><code class="docutils literal notranslate"><span class="pre">EXPECT_DEATH</span></code></a>. When not in
debug mode (i.e. <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> is defined), just executes <em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em>.</p>
</div>
<div class="section" id="expect-exit-expect-exit">
<h3>EXPECT_EXIT {#EXPECT_EXIT}<a class="headerlink" href="#expect-exit-expect-exit" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">EXPECT_EXIT(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">predicate</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code> <br /><code class="docutils literal notranslate"><span class="pre">ASSERT_EXIT(</span></code><em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">predicate</span></code></em><code class="docutils literal notranslate"><span class="pre">,</span></code><em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em><code class="docutils literal notranslate"><span class="pre">)</span></code></p>
<p>Verifies that <em><code class="docutils literal notranslate"><span class="pre">statement</span></code></em> causes the process to terminate with an exit status
that satisfies <em><code class="docutils literal notranslate"><span class="pre">predicate</span></code></em>, and produces <code class="docutils literal notranslate"><span class="pre">stderr</span></code> output that matches
<em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em>.</p>
<p>The parameter <em><code class="docutils literal notranslate"><span class="pre">predicate</span></code></em> is a function or functor that accepts an <code class="docutils literal notranslate"><span class="pre">int</span></code> exit
status and returns a <code class="docutils literal notranslate"><span class="pre">bool</span></code>. GoogleTest provides two predicates to handle common
cases:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Returns true if the program exited normally with the given exit status code.</span>
<span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">ExitedWithCode</span><span class="p">(</span><span class="n">exit_code</span><span class="p">);</span>

<span class="c1">// Returns true if the program was killed by the given signal.</span>
<span class="c1">// Not available on Windows.</span>
<span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">KilledBySignal</span><span class="p">(</span><span class="n">signal_number</span><span class="p">);</span>
</pre></div>
</div>
<p>The parameter <em><code class="docutils literal notranslate"><span class="pre">matcher</span></code></em> is either a <a class="reference internal" href="matchers.html"><span class="doc">matcher</span></a> for a <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::string&amp;</span></code>, or a regular expression (see
<a class="reference internal" href="../advanced.html#regular-expression-syntax"><span class="std std-ref">Regular Expression Syntax</span></a>)—a bare
string <em><code class="docutils literal notranslate"><span class="pre">s</span></code></em> (with no matcher) is treated as
<a class="reference internal" href="matchers.html#string-matchers"><span class="std std-ref">ContainsRegex(s)</span></a>, <strong>not</strong>
<a class="reference internal" href="matchers.html#generic-comparison"><span class="std std-ref">Eq(s)</span></a>.</p>
<p>For example, the following code verifies that calling <code class="docutils literal notranslate"><span class="pre">NormalExit()</span></code> causes the
process to print a message containing the text <code class="docutils literal notranslate"><span class="pre">Success</span></code> to <code class="docutils literal notranslate"><span class="pre">stderr</span></code> and exit
with exit status code 0:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">EXPECT_EXIT</span><span class="p">(</span><span class="n">NormalExit</span><span class="p">(),</span> <span class="n">testing</span><span class="o">::</span><span class="n">ExitedWithCode</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="s">&quot;Success&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright bladedisc-dev@list.alibaba-inc.com.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.
        </div>
    </div>  

</body>
</html>